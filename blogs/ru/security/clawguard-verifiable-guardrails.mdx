---
title: "ClawGuard: Проверяемые ограничители для агентов OpenClaw"
description: "Узнайте, как ClawGuard использует криптографические доказательства для проверки того, что ваш агент OpenClaw работает под надежными ограничителями, защищая как пользователей, так и поставщиков услуг"
slug: /security/clawguard-verifiable-guardrails
tags: безопасность, ограничители, аттестация, TEE, ClawGuard
publishedAt: 2026-02-11
status: published
featuredImageUrl: /images/features/clawguard-header.webp
visibility: public
isPinned: false
---

# ClawGuard: Проверяемые ограничители для агентов OpenClaw

По мере ускорения внедрения OpenClaw возникает критический вопрос: **Как узнать, что агент ИИ действительно работает с теми ограничениями безопасности, которые он заявляет?**

ClawGuard — это прототип с открытым исходным кодом, который позволяет агентам OpenClaw криптографически доказать, что они работают под конкретными, исполняемыми ограничителями. Вместо того, чтобы доверять заявлениям, теперь вы можете непосредственно проверять доказательства.

## Почему проверяемые ограничители важны

Современные агенты ИИ работают при предполагаемых ограничениях. Агент может быть настроен с политиками и защитными мерами, но нет надежного способа для внешних сторон подтвердить, что эти защиты действительно действуют при генерации ответа.

Это создает риски с обеих сторон:

### Для пользователей
- Агенты часто получают широкие разрешения, не понимая пользователями всех последствий
- Действия могут выходить далеко за пределы того, что пользователи намеревались или одобрили
- Раскрытие личных данных, непреднамеренный доступ к системе и финансовый ущерб — реальные риски

### Для поставщиков услуг
- Растущий объем вызовов API, управляемых агентами, без значимых ограничителей
- Когда что-то идет не так, пользователи обвиняют сервис, а не конфигурацию агента
- Поставщики сталкиваются с сообщениями о злоупотреблениях, расследованиями мошенничества и репутационным ущербом

**ClawGuard решает это, делая ограничения безопасности агента проверяемыми, а не просто настраиваемыми.**

## Что такое ClawGuard?

ClawGuard — это исследовательский прототип с открытым исходным кодом, который позволяет агентам OpenClaw создавать криптографические доказательства того, что:

1. **Известный ограничитель активно применяет политику**
2. **Агент работает в доверенной среде выполнения (TEE)**
3. **Ответы генерируются при этих ограничениях**, а не просто заявляются постфактум

Это особенно важно для взаимодействий с высокими ставками, где пользователи должны знать, что ИИ действительно ограничен человекоцентричными, ориентированными на безопасность ограничителями.

## Как работает ClawGuard

ClawGuard использует **AWS Nitro Enclaves** (аппаратный TEE) для создания проверяемой среды выполнения:

```
┌─────────────────────────────────────────────────┐
│  Nitro Enclave (Доверенная среда выполнения)    │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │  Прокси ограничителя (localhost:8080)   │   │
│  │  ✓ Проверка ввода/вывода                │   │
│  │  ✓ Проверки безопасности контента       │   │
│  │  ✓ Применение политики                  │   │
│  │  ✓ Журналирование аудита                │   │
│  └──────────────┬──────────────────────────┘   │
│                 │ Все вызовы LLM проходят здесь  │
│                 ↓                                │
│  ┌─────────────────────────────────────────┐   │
│  │  Агент OpenClaw                         │   │
│  │  Настроен: OPENAI_BASE_URL=:8080       │   │
│  └─────────────────────────────────────────┘   │
│                                                 │
│  ┌─────────────────────────────────────────┐   │
│  │  Сервер аттестации (localhost:8765)     │   │
│  │  Генерирует криптографические доказ-ва  │   │
│  └─────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

### Ключевые компоненты

1. **Прокси ограничителя**: Все взаимодействия LLM маршрутизируются через слой перехвата ограничителя, который применяет политики
2. **Доверенная среда выполнения**: AWS Nitro Enclave гарантирует, что код выполняется изолированно и защищен от вмешательства
3. **Удаленная аттестация**: Анклав создает аттестации (с измерениями PCR), которые можно проверить извне
4. **Проверяемый агент**: Агент OpenClaw работает внутри анклава, не имея возможности обойти ограничитель

## Установка и настройка

### Предварительные требования

- Инстанс AWS EC2 с поддержкой Nitro Enclave (например, m5.xlarge)
- Установлен OpenClaw
- Ключ API OpenAI или совместимый провайдер LLM

### Быстрый старт

1. **Клонировать репозиторий ClawGuard:**

```bash
git clone https://github.com/SaharaLabsAI/Verifiable-ClawGuard.git
cd Verifiable-ClawGuard
```

2. **Собрать образ анклава:**

```bash
cd src
./build_and_deploy.sh
```

Это соберет анклав и отобразит его **измерение PCR2** (криптографический хеш кода ограничителя):

```
"PCR2": "6cb06673b5b9b74edd2dc459914353898c1612ff..."
```

Сохраните это измерение — это отпечаток вашей доверенной конфигурации ограничителя.

3. **Запустить анклав:**

```bash
nitro-cli run-enclave \
  --eif-path guardrail-vsock.eif \
  --memory 5700 \
  --cpu-count 2

# Получить назначенный CID
ENCLAVE_CID=$(nitro-cli describe-enclaves | jq -r '.[0].EnclaveCID')
echo "Enclave running on CID: $ENCLAVE_CID"
```

4. **Запустить OpenClaw внутри анклава:**

```bash
./ec2_setup.sh \
  --agent-version 2026.1.24-3 \
  --enclave-cid $ENCLAVE_CID \
  --api-key ${OPENAI_API_KEY}
```

Это настроит OpenClaw так, чтобы все вызовы LLM проходили через прокси ограничителя, и зарегистрирует аттестацию как навык.

5. **Подключиться и запросить аттестацию:**

Используйте переадресацию портов SSH для доступа к шлюзу:

```bash
ssh -L 18789:127.0.0.1:18789 your-ec2-instance
```

Откройте веб-клиент и общайтесь с агентом. Запросите аттестацию напрямую:

```
"Можете ли вы предоставить аттестацию того, что вы работаете под ограничителем?"
```

## Проверка аттестаций

Агент ответит документом аттестации, содержащим криптографическое доказательство. Проверьте его:

```bash
python verify_attestation.py \
  --file attestation_quote.json \
  --pcr2 6cb06673b5b9b74edd2dc459914353898c1612ff...
```

Действительная аттестация доказывает:

1. **Сообщение было обработано внутри настоящего AWS Nitro Enclave** (подпись проверена)
2. **Точный код ограничителя, которому вы доверяете, выполняется** (PCR2 соответствует вашему известному измерению)

## Основные возможности

### 1. Криптографическое доказательство ограничителей

В отличие от традиционной безопасности агентов, которая полагается на заявления о конфигурации, ClawGuard предоставляет криптографические доказательства того, что ограничители действительно применяются.

### 2. Доверие на основе аппаратного обеспечения

AWS Nitro Enclaves обеспечивает изоляцию на аппаратном уровне. Даже хост-система не может вмешиваться в код, работающий внутри анклава.

### 3. Стабильный PCR при обновлениях агента

Измерение PCR2 привязано к **коду ограничителя**, а не к версии OpenClaw. Вы можете обновлять OpenClaw, не меняя позицию безопасности.

### 4. Применение политики

Все взаимодействия LLM проходят через прокси ограничителя, гарантируя, что никакой ответ не обходит проверки безопасности.

### 5. Аудиторский след

Система регистрирует все защищенные взаимодействия, создавая проверяемую запись поведения агента.

## Примеры использования

### Для пользователей: Проверка безопасности агента

Перед тем как делиться чувствительной информацией или делегировать задачи с высокими ставками:

```
Пользователь: "Мне нужен совет по финансовому решению.
              Можете ли вы доказать, что работаете с ограничителями безопасности?"

Агент: [предоставляет аттестацию с измерениями PCR]

Пользователь: [проверяет, что PCR2 соответствует известному безопасному ограничителю]
              "Проверено. Теперь я спокоен и могу продолжить."
```

### Для поставщиков услуг: Защита инфраструктуры

Требовать аттестацию перед предоставлением высокоэффективных инструментов или чувствительных данных:

```python
def serve_sensitive_api(agent_request):
    attestation = agent_request.get_attestation()
    
    if not verify_attestation(attestation, TRUSTED_PCR2):
        return "Доступ запрещен: проверка ограничителя не удалась"
    
    # Безопасно обслуживать - агент доказуемо ограничен
    return process_request(agent_request)
```

### Для владельцев данных: Применение границ использования

Применять политики типа "анализировать, но не эксфильтровать":

```
Владелец данных: "Вы можете получить доступ к этому набору данных, но только если докажете,
                 что работаете под ограничителем защиты данных."

Агент: [предоставляет аттестацию, доказывающую, что правильный ограничитель активен]

Владелец данных: [предоставляет доступ после проверки]
```

## Реальный пример

Вот как выглядит взаимодействие ClawGuard:

**Пользователь задает вопрос с высокими ставками:**
> "Я рассматриваю возможность инвестирования моих пенсионных сбережений в стартап. Стоит ли мне это делать?"

**Без ClawGuard:** Вы надеетесь, что у агента есть ограничения безопасности, но не можете их проверить.

**С ClawGuard:** Вы запрашиваете аттестацию:
> "Можете ли вы предоставить аттестованную сводку ваших ограничителей?"

**Агент отвечает:**
1. Продуманным ответом на ваш вопрос
2. Документом аттестации, доказывающим:
   - Ответ был сгенерирован внутри TEE
   - Известный ограничитель безопасности был активен
   - Политика финансового консультирования была применена

Вы независимо проверяете измерение PCR2 перед тем, как доверять совету.

## Ограничения и будущая работа

ClawGuard — это **исследовательский прототип**, а не готовый продукт. Важные оговорки:

### Текущие ограничения

- **Ограничители не идеальны**: Система гарантирует, что обещанный ограничитель работает, но не может гарантировать, что ограничитель ловит все
- **Пока нет сквозного шифрования**: В этой версии связь между пользователем и анклавом не полностью зашифрована
- **Предупреждение о режиме отладки**: Когда режим отладки включен, PCR2 все нули (только для разработки)

### Будущая работа

- Более сильные ограничения выполнения (блокировка выполнения произвольных команд)
- Сквозная зашифрованная связь
- Белые списки ограничителей для приемлемых сборок агентов
- Интеграция с [протоколом x402](https://github.com/SaharaLabsAI/x-function) Sahara AI для доступа к инструментам с микроплатежами

## Связанные ресурсы

- **Репозиторий GitHub**: [SaharaLabsAI/Verifiable-ClawGuard](https://github.com/SaharaLabsAI/Verifiable-ClawGuard)
- **Блог Sahara AI**: [Объявление ClawGuard](https://saharaai.com/zh/blog/openclaw-agent-guardrails)
- **Протоколы агентов**: [x-function с расширениями x402](https://github.com/SaharaLabsAI/x-function/tree/main/verifiable)

## Заключение

По мере того как агенты ИИ берут на себя больше ответственности, критический вопрос смещается от:

**"Доверяю ли я этому агенту?"**

к

**"Может ли этот агент доказать, что заслуживает доверия?"**

ClawGuard — это ранний шаг к тому, чтобы сделать это доказательство возможным. Он не утверждает, что делает агентов совершенно безопасными, но делает их ограничения безопасности **проверяемыми, аудируемыми и исполнимыми**.

Для пользователей OpenClaw, работающих в средах с высоким уровнем доверия — будь то обработка чувствительных данных, принятие финансовых решений или обслуживание критической инфраструктуры — ClawGuard предлагает путь к криптографически проверяемой безопасности агентов.

---

**Готовы попробовать ClawGuard?** Посетите [репозиторий GitHub](https://github.com/SaharaLabsAI/Verifiable-ClawGuard) для получения инструкций по установке и демонстрационных видео.

**Есть вопросы?** См. наше [руководство по устранению неполадок](/blog/troubleshooting) или присоединяйтесь к обсуждениям сообщества OpenClaw.
