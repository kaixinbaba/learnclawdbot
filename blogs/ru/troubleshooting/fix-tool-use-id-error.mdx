---
title: "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: LLM –∑–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω ‚Äî –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π tool_use_id –≤ –±–ª–æ–∫–∞—Ö tool_result"
description: "–ö–∞–∫ —Ä–µ—à–∏—Ç—å –æ—à–∏–±–∫—É '–Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π tool_use_id –Ω–∞–π–¥–µ–Ω –≤ –±–ª–æ–∫–∞—Ö tool_result' –≤ OpenClaw, –æ—á–∏—Å—Ç–∏–≤ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–µ–∞–Ω—Å–æ–≤"
slug: /troubleshooting/fix-tool-use-id-error
tags: troubleshooting, error, session, fix
publishedAt: 2026-02-01
status: published
visibility: public
isPinned: false
featuredImageUrl: /images/features/fix_tool_use_id_head.webp
---

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: LLM –∑–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω ‚Äî –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π tool_use_id –≤ –±–ª–æ–∫–∞—Ö tool_result

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OpenClaw –∏ –≤–Ω–µ–∑–∞–ø–Ω–æ —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å —ç—Ç–æ–π –æ—à–∏–±–∫–æ–π:

```
LLM request rejected: messages.58.content.1: unexpected tool_use_id found
in tool_result blocks: toolu_01BuEWGgvuHAY9iAXdbCpCEw.
Each tool_result block must have a corresponding tool_use block in the
previous message.
```

–ù–µ –ø–∞–Ω–∏–∫—É–π—Ç–µ. –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å **–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º —Å–µ–∞–Ω—Å–∞**, –∏ –µ—ë –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

## –ß—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É –æ—à–∏–±–∫—É?

–ö–æ–≥–¥–∞ OpenClaw –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å LLM (–Ω–∞–ø—Ä–∏–º–µ—Ä, Claude), –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –≤ –≤–∏–¥–µ —Å–µ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π. –ö–∞–∂–¥—ã–π –±–ª–æ–∫ `tool_result` –¥–æ–ª–∂–µ–Ω —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –±–ª–æ–∫ `tool_use` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–º–∏.

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏—Å—Ç–æ—Ä–∏—è —Å–µ–∞–Ω—Å–∞ —Ç–µ—Ä—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:

- **–°–∂–∞—Ç–∏–µ —Å–µ–∞–Ω—Å–∞** —É–¥–∞–ª–∏–ª–æ –±–ª–æ–∫ `tool_use`, –Ω–æ –æ—Å—Ç–∞–≤–∏–ª–æ `tool_result`
- –ü—Ä–æ—Ü–µ—Å—Å –±—ã–ª **–ø—Ä–µ—Ä–≤–∞–Ω –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞** (—Å–±–æ–π, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ç–∞–π–º-–∞—É—Ç —Å–µ—Ç–∏)
- **–†—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ñ–∞–π–ª–æ–≤ —Å–µ–∞–Ω—Å–∞ –Ω–∞—Ä—É—à–∏–ª–æ —Ü–µ–ø–æ—á–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

API LLM —Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–æ–æ–±—â–µ–Ω–∏–π. –ï—Å–ª–∏ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç `tool_result`, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ `tool_use_id`, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏, –æ–Ω –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –≤–µ—Å—å –∑–∞–ø—Ä–æ—Å.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–µ–∞–Ω—Å–∞

### –®–∞–≥ 1: –ù–∞–π–¥–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ —Å–µ–∞–Ω—Å–æ–≤

OpenClaw —Ö—Ä–∞–Ω–∏—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ —Å–µ–∞–Ω—Å–æ–≤ –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤ `.jsonl`. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
# –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ macOS/Linux
~/.openclaw/agents/main/sessions/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à—É —Ä–∞–±–æ—á—É—é –æ–±–ª–∞—Å—Ç—å
ls -lt ~/.openclaw/agents/main/sessions/*.jsonl | head -5
```

### –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

–ü–æ—Å–ª–µ–¥–Ω–∏–π –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª `.jsonl` —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —è–≤–ª—è–µ—Ç—Å—è –≤–∏–Ω–æ–≤–Ω–∏–∫–æ–º:

```bash
# –°–ø–∏—Å–æ–∫ —Å–µ–∞–Ω—Å–æ–≤, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Å–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ)
ls -lt ~/.openclaw/agents/main/sessions/*.jsonl | head -5
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
-rw-r--r--  1 user  staff  245632 Feb  1 12:30 abc123-def456.jsonl
-rw-r--r--  1 user  staff  189421 Feb  1 10:15 789ghi-012jkl.jsonl
```

### –®–∞–≥ 3: –£–¥–∞–ª–∏—Ç–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Å–µ–∞–Ω—Å

```bash
# –£–¥–∞–ª–∏—Ç–µ —Å–∞–º—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª —Å–µ–∞–Ω—Å–∞
rm ~/.openclaw/agents/main/sessions/<corrupted-file>.jsonl
```

–ò–ª–∏ –µ—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

```bash
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è
mv ~/.openclaw/agents/main/sessions/<corrupted-file>.jsonl /tmp/
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —à–ª—é–∑

```bash
openclaw gateway restart
```

–í–æ—Ç –∏ –≤—Å—ë. OpenClaw –∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π —Å–µ–∞–Ω—Å, –∏ –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å.

## –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—é

1. **–ù–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–π—Ç–µ OpenClaw** –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ ‚Äî –¥–∞–π—Ç–µ –µ–º—É –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/abort`
2. **–ò–∑–±–µ–≥–∞–π—Ç–µ —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ `.jsonl`** ‚Äî —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏
3. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ —à–ª—é–∑–∞** –º–æ–≥—É—Ç –ø–æ–º–æ—á—å –æ—á–∏—Å—Ç–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ–∞–Ω—Å–∞
4. –ï—Å–ª–∏ –≤—ã —á–∞—Å—Ç–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç–µ—Å—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ —Å–∂–∞—Ç–∏—è, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `compaction` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–ª—é–∑–∞

## –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –æ—à–∏–±–∫—É:

| –ß–∞—Å—Ç—å | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-------|----------|
| `messages.58.content.1` | 59-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å 0), 2-–π –±–ª–æ–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ |
| `unexpected tool_use_id` | –ù–∞–π–¥–µ–Ω tool_result, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π tool_use |
| `toolu_01BuEWGgvuHAY9iAXdbCpCEw` | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Å—Ç–∞–ª—Å—è "—Å–∏—Ä–æ—Ç–æ–π" |
| `Each tool_result block must have a corresponding tool_use block` | –ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ API |

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **"All models failed"** ‚Äî –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞—à–∏ API-–∫–ª—é—á–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–¥–µ–ª–∏.
- **"Session too large"** ‚Äî –ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–µ–≥–æ —Å–µ–∞–Ω—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–π. OpenClaw –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∂–∞—Ç–∏—è.
- **Gateway won't start** ‚Äî –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `openclaw doctor` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º.

## –†–µ–∑—é–º–µ

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–µ–∞–Ω—Å–∞ —Å "–æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏–º–∏" –±–ª–æ–∫–∞–º–∏ tool_result |
|----------|---------------------------------------------------------------|
| –ü—Ä–∏—á–∏–Ω–∞ | –°–∂–∞—Ç–∏–µ —Å–µ–∞–Ω—Å–∞, —Å–±–æ–π –∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |
| –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –£–¥–∞–ª–∏—Ç–µ —Å–∞–º—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ñ–∞–π–ª `.jsonl` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ —Å–µ–∞–Ω—Å–æ–≤ |
| –í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | 30 —Å–µ–∫—É–Ω–¥ |
| –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ | –ù–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–π—Ç–µ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ |

–≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Ç–µ—Ö –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≥–ª—è–¥–∏—Ç —Å—Ç—Ä–∞—à–Ω–æ, –Ω–æ –∏–º–µ–µ—Ç –ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ. –ï—Å–ª–∏ –≤—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–µ–π, –ø—Ä–æ—Å—Ç–æ –æ—á–∏—Å—Ç–∏—Ç–µ —Å–µ–∞–Ω—Å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ. –ü—Ä–∏—è—Ç–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ
