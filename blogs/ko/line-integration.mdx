---
title: "AI 챗봇에 LINE 메시징 통합하는 방법"
description: "OpenClaw AI 에이전트를 LINE Messaging API에 연결하는 단계별 가이드. 웹훅 설정, 인증 및 리치 메시지 지원으로 LINE 사용자를 위한 지능형 채팅 자동화를 구현하세요."
slug: /line-integration
publishedAt: 2026-02-16
status: published
visibility: public
featuredImageUrl: /images/features/line-integration.webp
---

# AI 챗봇에 LINE 메시징 통합하는 방법

LINE은 일본, 대만, 태국, 인도네시아에서 월간 2억 명 이상의 활성 사용자를 보유한 아시아에서 가장 인기 있는 메시징 플랫폼 중 하나입니다. AI 챗봇을 LINE과 통합하면 지능적이고 자동화된 대화로 이 방대한 청중에게 도달할 수 있습니다.

이 가이드에서는 OpenClaw AI 에이전트를 LINE Messaging API에 연결하여 챗봇이 다이렉트 메시지, 그룹 채팅, 미디어 공유 및 풍부한 대화형 메시지를 처리할 수 있도록 하는 방법을 배웁니다.

## 얻을 수 있는 것

이 통합을 완료하면 AI 어시스턴트가 다음을 수행할 수 있습니다:

- **LINE 사용자에게 실시간으로 응답**하여 지능형 대화 제공
- **그룹 채팅**과 다이렉트 메시지를 원활하게 처리
- 이미지, 동영상, 위치를 포함한 **미디어 공유**
- LINE의 Flex Message 및 템플릿 형식을 사용하여 **리치 메시지 전송**
- 더 나은 사용자 경험을 위한 **빠른 답장 제공**
- 단일 OpenClaw 인스턴스에서 **여러 LINE 계정 지원**

## 사전 요구사항

시작하기 전에 다음을 확인하세요:

1. **OpenClaw가 설치되고 실행 중** - 아직 OpenClaw를 설치하지 않았다면 [설치 가이드](/docs/getting-started)를 따르세요.
2. **LINE Developers 계정** - [LINE Developers Console](https://developers.line.biz/console/)에서 가입하세요.
3. **HTTPS 엔드포인트** - LINE 웹훅에는 HTTPS가 필요합니다. 리버스 프록시(nginx, Caddy) 또는 터널 서비스(ngrok, Cloudflare Tunnel)를 사용하세요.
4. **Gateway 액세스** - OpenClaw 게이트웨이가 인터넷에서 액세스 가능한지 확인하세요.

## 단계 1: LINE 플러그인 설치

OpenClaw는 메시징 채널에 플러그인 아키텍처를 사용합니다. LINE 플러그인을 설치하세요:

```bash
openclaw plugins install @openclaw/line
```

git 저장소에서 OpenClaw를 실행하는 경우 로컬 버전을 설치할 수 있습니다:

```bash
openclaw plugins install ./extensions/line
```

## 단계 2: LINE Messaging API 채널 생성

1. **LINE Developers Console에 로그인**  
   [https://developers.line.biz/console/](https://developers.line.biz/console/)을 방문하여 LINE 계정으로 로그인하세요.

2. **Provider 생성**  
   아직 Provider가 없다면 생성하세요. Provider는 회사 또는 서비스를 나타냅니다.

3. **Messaging API 채널 추가**  
   - **새 채널 만들기**를 클릭
   - 채널 유형으로 **Messaging API** 선택
   - 필수 정보 입력:
     - 채널 이름 (예: "내 AI 어시스턴트")
     - 채널 설명
     - 카테고리 및 하위 카테고리
     - 이메일 주소
   - 약관에 동의하고 **생성**을 클릭

4. **자격 증명 가져오기**  
   채널을 생성한 후 **기본 설정** 및 **Messaging API** 탭으로 이동하여 다음을 찾으세요:
   - **Channel access token** - "발급"을 클릭하여 장기 토큰 생성
   - **Channel secret** - 기본 설정 탭에서 확인

   이러한 자격 증명을 안전하게 보관하세요 - OpenClaw 구성에 필요합니다.

5. **웹훅 활성화**  
   **Messaging API** 탭에서:
   - **웹훅 사용**을 켜짐으로 전환
   - 웹훅 URL 설정 (다음 단계에서 구성)
   - AI가 모든 상호작용을 처리하도록 하려면 **자동 응답 메시지** 및 **인사 메시지**를 비활성화

## 단계 3: 웹훅 URL 구성

LINE은 수신 메시지를 OpenClaw 게이트웨이로 전송해야 합니다. 기본 웹훅 경로는 다음과 같습니다:

```
https://your-gateway-domain.com/line/webhook
```

`your-gateway-domain.com`을 실제 게이트웨이 도메인 또는 IP 주소로 바꾸세요.

**중요:** LINE은 HTTPS가 필요합니다. 로컬에서 테스트하는 경우 터널 서비스를 사용하세요:

```bash
# ngrok 사용
ngrok http 3100

# Cloudflare Tunnel 사용
cloudflared tunnel --url http://localhost:3100
```

HTTPS 엔드포인트로 LINE Developers Console의 웹훅 URL을 업데이트하세요.

## 단계 4: OpenClaw 구성

OpenClaw 구성 파일(일반적으로 `~/.openclaw/config.json5` 또는 작업 공간의 `config.json5`)에 LINE 채널 구성을 추가하세요:

### 최소 구성

```json5
{
  channels: {
    line: {
      enabled: true,
      channelAccessToken: "YOUR_CHANNEL_ACCESS_TOKEN",
      channelSecret: "YOUR_CHANNEL_SECRET",
      dmPolicy: "pairing",
    },
  },
}
```

### 환경 변수 사용

보안 향상을 위해 환경 변수를 사용하세요:

```bash
export LINE_CHANNEL_ACCESS_TOKEN="your_channel_access_token_here"
export LINE_CHANNEL_SECRET="your_channel_secret_here"
```

그런 다음 구성에서 참조하세요:

```json5
{
  channels: {
    line: {
      enabled: true,
      // Token과 secret은 환경 변수에서 읽습니다
      dmPolicy: "pairing",
    },
  },
}
```

### 토큰 파일 사용

프로덕션 배포의 경우 자격 증명을 파일에 저장하세요:

```json5
{
  channels: {
    line: {
      enabled: true,
      tokenFile: "/secure/path/line-token.txt",
      secretFile: "/secure/path/line-secret.txt",
      dmPolicy: "pairing",
    },
  },
}
```

### 여러 LINE 계정

하나의 OpenClaw 인스턴스에서 여러 LINE 채널을 관리할 수 있습니다:

```json5
{
  channels: {
    line: {
      accounts: {
        marketing: {
          channelAccessToken: "MARKETING_TOKEN",
          channelSecret: "MARKETING_SECRET",
          webhookPath: "/line/marketing",
        },
        support: {
          channelAccessToken: "SUPPORT_TOKEN",
          channelSecret: "SUPPORT_SECRET",
          webhookPath: "/line/support",
        },
      },
    },
  },
}
```

사용자 지정 경로와 일치하도록 LINE 콘솔의 웹훅 URL을 업데이트하는 것을 잊지 마세요!

## 단계 5: 액세스 제어 구성

LINE 통합은 봇과 상호작용할 수 있는 사용자를 제어하기 위한 여러 액세스 정책을 지원합니다:

### 페어링 모드 (권장)

이것은 기본값이며 가장 안전한 옵션입니다. 새 사용자는 채팅하기 전에 승인되어야 합니다:

```json5
{
  channels: {
    line: {
      dmPolicy: "pairing",
    },
  },
}
```

새 사용자가 봇에 메시지를 보내면 페어링 코드를 받게 됩니다. 다음 명령으로 승인하세요:

```bash
# 대기 중인 페어링 요청 나열
openclaw pairing list line

# 사용자 승인
openclaw pairing approve line <CODE>
```

### 허용 목록 모드

지정된 LINE 사용자 ID만 봇과 상호작용할 수 있습니다:

```json5
{
  channels: {
    line: {
      dmPolicy: "allowlist",
      allowFrom: [
        "U1234567890abcdef1234567890abcdef",
        "Uabcdef1234567890abcdef1234567890",
      ],
    },
  },
}
```

### 개방 모드

누구나 봇에 메시지를 보낼 수 있습니다 (주의해서 사용):

```json5
{
  channels: {
    line: {
      dmPolicy: "open",
    },
  },
}
```

### 그룹 채팅 정책

LINE 그룹 채팅에 대한 액세스를 별도로 구성하세요:

```json5
{
  channels: {
    line: {
      groupPolicy: "allowlist",
      groupAllowFrom: [
        "U1234567890abcdef1234567890abcdef", // 봇을 그룹에 추가할 수 있는 사용자
      ],
      groups: {
        "C1234567890abcdef1234567890abcdef": {
          // 그룹별 재정의
          allowFrom: ["Uabcdef1234567890abcdef1234567890"],
        },
      },
    },
  },
}
```

**참고:** LINE ID는 대소문자를 구분하며 다음 패턴을 따릅니다:
- 사용자 ID: `U` + 32자리 16진수
- 그룹 ID: `C` + 32자리 16진수
- 룸 ID: `R` + 32자리 16진수

## 단계 6: 재시작 및 테스트

구성을 적용하려면 OpenClaw 게이트웨이를 재시작하세요:

```bash
openclaw gateway restart
```

이제 통합을 테스트하세요:

1. **친구로 봇 추가** - LINE Developers Console에서 QR 코드를 스캔하거나 LINE ID로 검색
2. **테스트 메시지 전송** - 봇에 "안녕하세요" 또는 메시지 입력
3. **응답 확인** - 페어링이 활성화된 경우 먼저 페어링 코드를 받게 됩니다

웹훅 이벤트에 대한 게이트웨이 로그를 모니터링하세요:

```bash
openclaw gateway logs -f
```

수신된 LINE 웹훅 이벤트와 발신 응답이 표시되어야 합니다.

## 고급 기능

### Flex Cards로 리치 메시지

LINE은 Flex Messages라는 강력한 리치 메시지를 지원합니다. `channelData`를 사용하여 대화형 카드를 보내세요:

```json5
{
  text: "주문 상태입니다",
  channelData: {
    line: {
      flexMessage: {
        altText: "주문 상태 카드",
        contents: {
          type: "bubble",
          body: {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "text",
                text: "주문 #12345",
                weight: "bold",
                size: "xl",
              },
              {
                type: "text",
                text: "상태: 배송됨",
                color: "#00B900",
              },
            ],
          },
        },
      },
    },
  },
}
```

### 빠른 답장

더 나은 UX를 위해 빠른 답장 버튼을 제공하세요:

```json5
{
  text: "무엇을 하시겠습니까?",
  channelData: {
    line: {
      quickReplies: ["상태 확인", "지원 문의", "기록 보기"],
    },
  },
}
```

### 위치 공유

위치 정보를 전송하세요:

```json5
{
  text: "저희 사무실 위치입니다",
  channelData: {
    line: {
      location: {
        title: "OpenClaw 본사",
        address: "테크 시티 AI 거리 123번지",
        latitude: 35.681236,
        longitude: 139.767125,
      },
    },
  },
}
```

### 미디어 처리

LINE 플러그인은 미디어 업로드 및 다운로드를 자동으로 처리합니다. 크기 제한을 구성하세요:

```json5
{
  channels: {
    line: {
      mediaMaxMb: 20, // 기본값은 10 MB
    },
  },
}
```

## 문제 해결

### 웹훅 확인 실패

**문제:** LINE 콘솔에 "웹훅 확인 실패" 표시

**해결 방법:**
- 웹훅 URL이 HTTPS(HTTP가 아닌)를 사용하는지 확인
- 구성의 `channelSecret`이 LINE 콘솔과 정확히 일치하는지 확인
- 게이트웨이가 인터넷에서 액세스 가능한지 확인
- 엔드포인트를 수동으로 테스트: `curl https://your-gateway/line/webhook`

### 수신 메시지 없음

**문제:** 봇이 LINE 사용자로부터 메시지를 받지 못함

**해결 방법:**
- 웹훅 경로가 구성의 `channels.line.webhookPath`와 일치하는지 확인
- 웹훅 POST 요청에 대한 게이트웨이 로그 확인: `openclaw gateway logs -f`
- LINE Developers Console에서 웹훅 URL이 활성화되었는지 확인
- LINE 콘솔에서 자동 응답이 비활성화되었는지 확인 (웹훅 전달을 방해함)

### 미디어 다운로드 오류

**문제:** 이미지 또는 동영상 다운로드 실패

**해결 방법:**
- 파일이 10 MB를 초과하는 경우 `channels.line.mediaMaxMb` 증가
- 임시 디렉터리에 대한 게이트웨이 쓰기 권한 확인
- LINE 채널 액세스 토큰에 미디어 다운로드 권한이 있는지 확인

### 메시지가 전송되지 않음

**문제:** 봇이 메시지를 받지만 답장을 보낼 수 없음

**해결 방법:**
- `channelAccessToken`이 유효하고 만료되지 않았는지 확인
- LINE 콘솔에서 토큰에 "SEND_MESSAGE" 권한이 있는지 확인
- API 오류 응답에 대한 게이트웨이 로그 검토
- 사용자가 봇을 차단하지 않았는지 확인

### 페어링 승인이 작동하지 않음

**문제:** 페어링 요청을 승인할 수 없음

**해결 방법:**
- `openclaw pairing list line`을 실행하여 대기 중인 요청 확인
- 페어링 코드가 올바른지 확인 (대소문자 구분)
- 구성에서 `dmPolicy`가 `"pairing"`으로 설정되었는지 확인
- 승인 후 게이트웨이 재시작: `openclaw gateway restart`

## 요약

축하합니다! OpenClaw AI 챗봇과 LINE Messaging 통합에 성공했습니다. 이제 봇이 다음을 수행할 수 있습니다:

✅ LINE 메시지 수신 및 응답  
✅ 그룹 채팅 및 다이렉트 메시지 처리  
✅ Flex Messages로 풍부한 대화형 콘텐츠 전송  
✅ 미디어, 위치, 빠른 답장 공유  
✅ 페어링, 허용 목록 또는 개방 정책으로 액세스 제어  
✅ 하나의 게이트웨이에서 여러 LINE 계정 관리  

### 다음 단계

- **응답 사용자 정의** - 에이전트의 개성과 동작 구성
- **사용자 정의 명령 추가** - `/card` 및 기타 도구로 LINE 전용 명령 생성
- **사용량 모니터링** - LINE 상호작용을 위한 분석 및 로깅 설정
- **통합 탐색** - LINE을 Discord, Slack 또는 WhatsApp과 같은 다른 채널과 연결

### 유용한 리소스

- [LINE Messaging API 문서](https://developers.line.biz/en/docs/messaging-api/)
- [OpenClaw 채널 문서](/docs/channels)
- [Flex Message 시뮬레이터](https://developers.line.biz/flex-simulator/)
- [LINE Developers Console](https://developers.line.biz/console/)

즐거운 채팅 되세요! 🤖💚
