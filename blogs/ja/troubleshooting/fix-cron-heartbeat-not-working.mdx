---
title: "修正：OpenClaw の Cron ジョブと Heartbeat が動作しない"
description: "OpenClaw cron スケジューラの問題、heartbeat の失敗、スケジュールされたタスクが起動しない場合の包括的なトラブルシューティングガイド"
slug: /troubleshooting/fix-cron-heartbeat-not-working
tags: troubleshooting, cron, heartbeat, scheduler, fix
publishedAt: 2026-02-10
status: published
visibility: public
isPinned: false
featuredImageUrl: /images/features/cron_heartbeat_troubleshooting_head.webp
---

# 修正：OpenClaw の Cron ジョブと Heartbeat が動作しない

OpenClaw ユーザーが直面する最も一般的な問題の1つは、スケジュールされたタスクが起動しないことです。cron ジョブや heartbeat を設定したのに、何も起こらない。このガイドでは、最も頻繁な原因と修正方法を説明します。

## クイック診断

深く調べる前に、これらのチェックを実行してください:

```bash
# Check cron status
openclaw cron status

# List all scheduled jobs
openclaw cron list

# Check gateway logs for scheduler errors
tail -100 ~/.openclaw/logs/gateway.log | grep -i "cron\|heartbeat\|scheduler"
```

## よくある問題 #1: Cron ジョブが全く起動しない

### 症状
- ジョブが `enabled: true` と表示されているのに実行されない
- ログにエラーがなく、ジョブが黙って実行されない
- `openclaw cron list` でジョブが表示されるが `lastRun` が常に null

### 原因: Gateway が実行されていない、または再起動された

Cron ジョブは Gateway が実行されている時のみ起動します。以下の場合:
- ターミナルを閉じた
- コンピュータを再起動した  
- `openclaw gateway stop` を実行した

あなたの cron ジョブも停止しています。

### 修正方法

```bash
# Check if gateway is running
openclaw gateway status

# If not running, start it
openclaw gateway start

# Or restart to pick up config changes
openclaw gateway restart
```

**プロのヒント:** `openclaw gateway start --daemon` を使用してバックグラウンドで実行するか、システムサービスとして設定してください。

---

## よくある問題 #2: Heartbeat が実行されない

### 症状
- Heartbeat ポーリングが設定されているのにエージェントが応答しない
- `HEARTBEAT_OK` やプロアクティブなメッセージがない
- 直接メッセージを送ると正常に動作する

### 原因 A: 間違った wakeMode

最も一般的な原因は、`wakeMode: "next-heartbeat"` の意味を理解せずに使用していることです。

```json
// ❌ これは次の heartbeat サイクルを待ち、即座には実行されません
{
  "schedule": { "kind": "every", "everyMs": 1800000 },
  "payload": { "kind": "systemEvent", "text": "Check inbox" },
  "wakeMode": "next-heartbeat"
}
```

### 修正方法

即座に実行するには、`wakeMode: "now"` を使用するか、省略してください:

```json
// ✅ スケジュール時に即座に起動
{
  "schedule": { "kind": "every", "everyMs": 1800000 },
  "payload": { "kind": "systemEvent", "text": "Check inbox" }
}
```

### 原因 B: HEARTBEAT.md が空

`HEARTBEAT.md` ファイルが空か、コメントのみの場合、エージェントは正しく `HEARTBEAT_OK` を返し、何もしません。

### 修正方法

`HEARTBEAT.md` に実際のタスクを追加してください:

```markdown
# HEARTBEAT.md

- Check for unread emails (if not checked in last 2 hours)
- Review calendar for upcoming events in next 24h
- Check project status if any tasks are overdue
```

---

## よくある問題 #3: ワンショットジョブが無限ループする

### 症状
- `schedule.kind: "at"` で1回限りのジョブを作成した
- ジョブが1回ではなく繰り返し起動する
- ステータスが "skipped" と表示されるがジョブが起動し続ける

### 原因: deleteAfterRun と Skipped ステータスのバグ

一部のバージョンでは、`deleteAfterRun: true` を持つワンショットジョブがステータスが "skipped" の時に適切に削除されません。

### 修正方法

**オプション 1:** 実行後に手動でジョブを削除:
```bash
openclaw cron remove --id <job-id>
```

**オプション 2:** 回避策のスケジュールを使用:
```json
{
  "schedule": { 
    "kind": "at", 
    "at": "2026-02-10T15:00:00Z"
  },
  "deleteAfterRun": true,
  "payload": { "kind": "systemEvent", "text": "Reminder: Call mom" }
}
```

**オプション 3:** これが修正された最新の OpenClaw バージョンにアップデート。

---

## よくある問題 #4: 分離セッションジョブが通知しない

### 症状
- `sessionTarget: "isolated"` ジョブが実行されるが出力が見えない
- `openclaw cron runs` でジョブが完了と表示される
- チャットにメッセージが配信されない

### 原因: 欠落または誤設定された Delivery

分離セッションジョブは、結果を通知するために明示的な delivery 設定が必要です。

### 修正方法

`delivery` 設定を追加:

```json
{
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Summarize today's news"
  },
  "delivery": {
    "mode": "announce",
    "channel": "telegram"  // or your channel
  }
}
```

---

## よくある問題 #5: タイムゾーンの混乱

### 症状
- ジョブが間違った時間に起動する
- 午前8:00のジョブが午前3:00や真夜中に起動する
- スケジュールは正しく見えるが、タイミングがずれている

### 原因: UTC vs ローカル時間

OpenClaw はデフォルトで UTC を使用します。以下のように書くと:
```json
{ "kind": "at", "at": "2026-02-10T08:00:00" }
```
これは **UTC** の午前8:00であり、あなたのローカル時間ではありません。

### 修正方法

**オプション 1:** スケジュールにタイムゾーンを追加:
```json
{
  "kind": "cron",
  "expr": "0 8 * * *",
  "tz": "Asia/Shanghai"  // or America/New_York, Europe/London, etc.
}
```

**オプション 2:** タイムゾーンオフセット付きの ISO 形式を使用:
```json
{
  "kind": "at",
  "at": "2026-02-10T08:00:00+08:00"
}
```

---

## デバッグチェックリスト

上記のいずれも問題を解決しない場合、このチェックリストを確認してください:

### 1. Gateway が実行中であることを確認
```bash
openclaw gateway status
# Should show "running"
```

### 2. ジョブの設定を確認
```bash
openclaw cron list --include-disabled
# Verify schedule, payload, and enabled status
```

### 3. 最近の実行を確認
```bash
openclaw cron runs --id <job-id> --limit 10
# Check status of recent executions
```

### 4. ログでエラーを確認
```bash
tail -f ~/.openclaw/logs/gateway.log | grep -E "cron|scheduler|heartbeat"
```

### 5. 手動トリガーをテスト
```bash
openclaw cron run --id <job-id>
# Forces immediate execution to test if job works
```

### 6. JSON 構文を検証
```bash
# Check your config file for JSON errors
cat ~/.openclaw/openclaw.json | jq .
```

---

## 予防のヒント

1. **スケジュールに依存する前に必ず `openclaw cron run` でテスト**
2. **スケジューライベントをキャプチャするためにログを設定**
3. **すべてのスケジュールで明示的なタイムゾーンを使用**
4. **heartbeat で監視** - 静かな失敗を捕捉するために毎日の "I'm alive" ジョブを設定
5. **OpenClaw を最新に保つ** - 多くのスケジューラのバグは新しいバージョンで修正されています

---

## まだ解決しませんか?

すべてを試した場合:

1. [OpenClaw GitHub Issues](https://github.com/openclaw/openclaw/issues) で既知のバグを確認
2. `openclaw doctor` を実行して自動診断
3. [OpenClaw Discord](https://discord.com/invite/clawd) で設定(編集済み)を共有

覚えておいてください: ほとんどの cron 問題は、gateway が実行されていない、タイムゾーンの混乱、または delivery 設定の欠落に起因します。この3つから始めてください。
