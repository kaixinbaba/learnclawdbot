---
title: OpenClaw WhatsApp 連携 - グループ、メディア、マルチアカウント完全ガイド
description: Baileys を使用して OpenClaw を WhatsApp に接続する完全ガイド。QR ログイン、DM ポリシー、グループチャット、メディア処理、ペアリングモード、マルチアカウント設定を網羅。
slug: /whatsapp-integration
tags: whatsapp, 連携, baileys, メッセージング, グループ, メディア
publishedAt: 2025-02-15
status: published
visibility: public
featuredImageUrl: /images/features/whatsapp-integration.webp
---

# OpenClaw WhatsApp 連携：完全設定ガイド

AI アシスタントを WhatsApp に接続して、友達とチャットするように会話しましょう。OpenClaw は WhatsApp Web（Baileys 経由）を使用してシームレスなメッセージング体験を提供します — ビジネス API 不要、24 時間の返信ウィンドウ制限なし、純粋なパーソナルアシスタントマジックです。

このガイドでは、基本的な QR コードログインから高度なグループチャット設定、メディア処理、マルチアカウントセットアップまですべてをカバーします。

## 仕組み

OpenClaw は Baileys ライブラリを使用して WhatsApp Web に接続します（多くの WhatsApp ボットの背後にある同じ技術）。スマートフォンが認証デバイスとして機能し、OpenClaw はコンピュータ上で永続的なセッションを維持します。

**WhatsApp Business API に対する利点：**
- 24 時間返信ウィンドウ制限なし
- 個人番号で動作
- Meta Business Manager のセットアップ不要
- 完全なグループチャットサポート

## 前提条件

始める前に：

- OpenClaw Gateway がインストールされ実行中
- WhatsApp 用の電話番号（個人番号または専用番号）
- Node.js ランタイム（**Bun は不可** — Baileys は Bun で不安定）

## ステップ 1：基本設定

WhatsApp を `~/.openclaw/openclaw.json` に追加：

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+819012345678"], // あなたの電話番号（E.164 形式）
    },
  },
}
```

**重要：** E.164 形式の電話番号を使用（例：`+81` は日本、`+1` は米国）。

## ステップ 2：QR コードでログイン

WhatsApp アカウントをリンク：

```bash
openclaw channels login --channel whatsapp
```

ターミナルに QR コードが表示されます。スマートフォンでスキャン：

1. スマートフォンで WhatsApp を開く
2. **設定 → リンク済みデバイス** に移動
3. **デバイスをリンク** をタップ
4. QR コードをスキャン

リンクされると確認が表示されます。セッションは `~/.openclaw/credentials/whatsapp/default/creds.json` に保存されます。

## ステップ 3：接続を確認

チャンネルステータスを確認：

```bash
openclaw channels status --probe
```

WhatsApp が `linked: true` と `running` で表示されるはずです。

## 電話番号オプション

### オプション A：専用番号（推奨）

OpenClaw 用に**別の電話番号**を使用。利点：
- 個人メッセージと明確に分離
- 連絡先を混乱させるリスクなし
- トラブルシューティングが容易

**最適なセットアップ：** 古い Android スマートフォン + eSIM を Wi-Fi に接続し、WhatsApp Business を実行。

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+819012345678"], // ボットと会話するための個人番号
    },
  },
}
```

### オプション B：個人番号（代替）

**自分の WhatsApp 番号**で OpenClaw を実行。「自分にメッセージ」を使用してテスト。セルフチャットモードを有効に：

```json5
{
  channels: {
    whatsapp: {
      selfChatMode: true,
      dmPolicy: "allowlist",
      allowFrom: ["+819012345678"], // WhatsApp 番号と同じ
    },
  },
}
```

**番号の入手先：**
- ローカルキャリアの eSIM（最も信頼性が高い）
- プリペイド SIM（確認 SMS を 1 通受信するだけ）
- **避けるべき：** Google Voice、TextNow、「無料 SMS」サービス — WhatsApp はこれらをブロック

## DM アクセス制御

WhatsApp は 3 つの DM ポリシーをサポート：

### 許可リストモード（デフォルト、最も安全）

特定の番号のみがボットにメッセージ可能：

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+819012345678", "+819087654321"],
    },
  },
}
```

### ペアリングモード（新しい送信者を承認）

未知の送信者にはペアリングコードが送られます。手動で承認：

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "pairing",
    },
  },
}
```

**送信者を承認：**

```bash
openclaw pairing list whatsapp
openclaw pairing approve whatsapp <CODE>
```

ペアリングコード：
- 8 文字、大文字
- 1 時間後に期限切れ
- チャンネルごとに最大 3 つの保留リクエスト

### オープンモード（全員を許可）

誰でもボットにメッセージ可能（**注意して使用**）：

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "open",
      allowFrom: ["*"],
    },
  },
}
```

## グループチャット設定

OpenClaw はスマートなアクティベーションで WhatsApp グループに参加できます。

### グループアクセスを有効化

```json5
{
  channels: {
    whatsapp: {
      groupPolicy: "allowlist", // または "open" ですべてのグループを許可
      groups: {
        "*": { requireMention: true }, // すべてのグループを許可、@メンション必須
      },
    },
  },
}
```

### アクティベーションモード

**メンションモード（デフォルト）：** ボットは @メンションされた時のみ応答：

```json5
{
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          mentionPatterns: ["@openclaw", "openclaw", "\\+819055550123"],
          historyLimit: 50,
        },
      },
    ],
  },
}
```

**常時モード：** ボットはすべてのメッセージに応答（控えめに使用）：

```
/activation always
```

`/activation mention` で切り替え（オーナー専用コマンド）。

## メディア処理

### メディアの受信

OpenClaw は受信メディアをダウンロードして処理：

```json5
{
  channels: {
    whatsapp: {
      mediaMaxMb: 50, // 最大受信メディアサイズ
    },
  },
}
```

### メディアの送信

ボットは画像、動画、音声、ドキュメントを送信可能：

```json5
{
  agents: {
    defaults: {
      mediaMaxMb: 5, // 最大送信メディアサイズ
    },
  },
}
```

## 自動リアクション

メッセージ受信時に絵文字リアクションを送信：

```json5
{
  channels: {
    whatsapp: {
      ackReaction: {
        emoji: "👀",
        direct: true,     // DM でリアクション
        group: "mentions", // グループでメンションされた時のみリアクション
      },
    },
  },
}
```

## マルチアカウント設定

1 つの Gateway で複数の WhatsApp アカウントを実行：

```json5
{
  channels: {
    whatsapp: {
      accounts: {
        personal: {
          allowFrom: ["+819011111111"],
        },
        work: {
          allowFrom: ["+819022222222"],
          ackReaction: { emoji: "✅" },
        },
      },
    },
  },
}
```

**特定のアカウントにログイン：**

```bash
openclaw channels login --account personal
openclaw channels login --account work
```

## CLI コマンド

```bash
# ステータス確認
openclaw channels status --probe

# メッセージ送信
openclaw message send --channel whatsapp --to "+819012345678" --message "こんにちは！"

# ログ表示
openclaw channels logs --channel whatsapp

# ログアウト
openclaw channels logout --channel whatsapp
```

## トラブルシューティング

### 「未リンク」または QR ログインが必要

**症状：** `channels status` が `linked: false` を表示

**修正：** `openclaw channels login` を実行して QR コードを再スキャン。

### リンクされているが切断 / 再接続ループ

**修正：**
1. `openclaw doctor` を実行
2. Gateway を再起動
3. 続く場合は `openclaw channels login` で再リンク

### Bun ランタイムの問題

**修正：** WhatsApp (Baileys) は Bun で不安定。Node.js に切り替え：

```bash
export OPENCLAW_RUNTIME=node
```

## まとめ

WhatsApp 連携を設定しました：

- ✅ **QR コードログイン** WhatsApp Web 経由
- ✅ **DM ポリシー** アクセス制御用
- ✅ **グループチャットサポート** メンションアクティベーション付き
- ✅ **メディア処理** 画像、動画、音声メッセージ対応
- ✅ **自動リアクション** 即座のフィードバック
- ✅ **マルチアカウント** サポート

AI アシスタントが WhatsApp で利用可能になりました！💬
