---
title: OpenClaw の Telegram ボット設定 - QR コード、Webhook、ポーリングの完全ガイド
description: OpenClaw の Telegram ボットを段階的に設定する方法を学びます。ボットがメッセージを受信しない、webhook 設定、ポーリングモードの問題などの一般的な問題をトラブルシューティングします。
slug: /integrations/telegram-setup
publishedAt: 2026-02-13
status: published
visibility: public
featuredImageUrl: /images/integrations/telegram_head.webp
---

# OpenClaw の Telegram ボット設定:完全ガイド

Telegram は、ボット統合のための最も人気のあるメッセージングプラットフォームの 1 つであり、堅牢な API と優れた開発者エクスペリエンスを提供しています。OpenClaw インスタンスを Telegram と統合することで、安全な暗号化メッセージを通じて Claude と対話し、デバイス間で会話を管理し、インラインキーボード、ファイル共有、グループチャットサポートなどの Telegram の豊富な機能を活用できます。

この包括的なガイドでは、BotFather を使用してボットを作成することから、実際の GitHub レポートに基づく一般的な問題のトラブルシューティングまで、完全な **openclaw telegram bot setup(OpenClaw Telegram ボット設定)**プロセスを説明します。迅速なローカル開発のためにポーリングモードを設定する場合でも、本番デプロイメント用に webhook を構成する場合でも、このガイドで対応できます。

## 前提条件

**openclaw telegram bot setup** を始める前に、以下を確認してください:

- **OpenClaw がインストールされ実行中** - バージョン 0.5.0 以降を推奨
- **Telegram アカウント** - モバイル、デスクトップ、または Web で利用可能
- **基本的なターミナル/コマンドラインの知識** - OpenClaw コマンドを実行するため
- **オプション:公開 HTTPS エンドポイント** - webhook モードのみ必要

## ステップ 1: BotFather でボットを作成する

BotFather は、他のボットを作成および管理するための Telegram の公式ボットです。これは、あらゆる **openclaw telegram bot setup** の出発点です。

### ボットの作成

1. Telegram を開いて **@BotFather** を検索
2. 会話を開始して `/newbot` を送信
3. プロンプトに従います:
   - **ボット名**: 表示名を選択(例: "My OpenClaw Assistant")
   - **ボットユーザー名**: "bot" で終わる必要があります(例: "my_openclaw_bot")
4. BotFather が **ボットトークン**を返します - `123456789:ABCdefGHIjklMNOpqrsTUVwxyz` のような文字列

**⚠️ セキュリティ警告**: ボットトークンはパスワードのようなものです。バージョン管理にコミットしたり、公開したりしないでください。このトークンを持っている人は誰でもあなたのボットを制御できます。

### 重要なボット設定

BotFather を通じてこれらの重要な設定を構成します:

**プライバシーモード** (`/setprivacy`):
- ボットがグループチャット内のすべてのメッセージを見られるようにする場合は、プライバシーモードを**無効化**
- ボットが言及されたメッセージまたは直接返信のみを見る必要がある場合は**有効化**(デフォルト)

**グループ権限** (`/setjoingroups`):
- ボットをグループ会話に追加したい場合は**有効化**
- プライベートな 1 対 1 のやり取りのみの場合は**無効化**

**コマンド** (`/setcommands`):
オプションでコマンドの提案を設定できます:
```
status - OpenClaw のステータスを確認
help - 利用可能なコマンドを表示
reset - 会話コンテキストをリセット
```

## ステップ 2: OpenClaw を設定する

ボットトークンを取得したら、**openclaw telegram** 統合を設定します。

### 基本設定

**telegram bot polling mode(Telegram ボットポーリングモード)**を開始するための最小限の設定:

1. OpenClaw ゲートウェイが実行中の場合は停止します:
```bash
openclaw gateway stop
```

2. OpenClaw 設定ファイルを編集します(通常は `~/.openclaw/config.yaml` または類似):

```yaml
plugins:
  entries:
    telegram:
      enabled: true
      token: "YOUR_BOT_TOKEN_HERE"
      dmPolicy: "pair-once"
```

**設定オプションの説明:**

- `enabled`: Telegram プラグインを有効にするには `true` である必要があります
- `token`: BotFather からのボットトークン
- `dmPolicy`: ダイレクトメッセージの動作を制御
  - `"pair-once"`: ユーザーはペアリングを開始する必要があり、その後自由にチャットできます(推奨)
  - `"open"`: 誰でもペアリングなしでボットにメッセージを送信できます
  - `"allowlist-only"`: 事前承認されたユーザーのみが対話できます

### 高度なオプション

本番デプロイメントまたはマルチユーザーシナリオの場合、これらの追加設定を検討してください:

```yaml
plugins:
  entries:
    telegram:
      enabled: true
      token: "YOUR_BOT_TOKEN_HERE"
      dmPolicy: "allowlist-only"
      allowlist:
        - 123456789  # あなたの Telegram ユーザー ID
        - 987654321  # 別の承認済みユーザー ID
      groupPolicy: "allowlist-only"
      groupAllowlist:
        - -1001234567890  # グループチャット ID(負の接頭辞に注意)
      streamMode: true
```

**高度なオプションの説明:**

- `allowlist`: ボットとの対話を許可された Telegram ユーザー ID の配列
- `groupPolicy`: `dmPolicy` と同じオプションですが、グループチャット用
- `groupAllowlist`: ボットが応答できるグループチャット ID の配列
- `streamMode`: `true` の場合、長い応答に対してより良い UX のためにリアルタイムチャンクで応答を送信

**Telegram ユーザー ID を見つける:**

ユーザー ID を見つける最も簡単な方法は、ボットにメッセージを送信して OpenClaw ログを確認するか、Telegram の @userinfobot のようなボットを使用することです。

## ステップ 3: 接続モードを選択する

OpenClaw は、Telegram メッセージを受信するための 2 つの方法をサポートしています:**ポーリング**と **webhook**。それぞれに異なる利点とトレードオフがあります。

### オプション A: ポーリングモード(デフォルト)

**仕組み:**
ポーリングモードは、OpenClaw が定期的に Telegram のサーバーに新しいメッセージがないか確認することで機能します。通常 1-3 秒ごとです。これはデフォルトモードであり、追加の **openclaw telegram webhook config(OpenClaw Telegram webhook 設定)**は必要ありません。

**利点:**
- ✅ **シンプルなセットアップ** - 基本設定ですぐに使えます
- ✅ **公開 IP 不要** - 開発とローカルテストに最適
- ✅ **ファイアウォール内で動作** - インバウンドネットワーク設定不要
- ✅ **デバッグが簡単** - すべてのロジックがローカルプロセスで実行されます

**欠点:**
- ⚠️ **わずかな遅延** - メッセージ受信前に 1-3 秒の遅延
- ⚠️ **リソース使用** - 継続的なポーリングは CPU とネットワーク帯域幅を消費
- ⚠️ **スケーリングの制限** - 高トラフィックシナリオには理想的ではない

**設定:**
ポーリングモードはデフォルトで有効です。ステップ 2 の基本設定以外に追加の設定は不要です。

### オプション B: Webhook モード

**仕組み:**
Webhook モードは、Telegram が HTTPS POST リクエストを介して新しいメッセージを直接 OpenClaw インスタンスにプッシュするように設定します。これには公開アクセス可能なエンドポイントが必要です。

**利点:**
- ✅ **即時配信** - ポーリング遅延ゼロ、メッセージは即座に到着
- ✅ **リソース効率** - 継続的なポーリングのオーバーヘッドなし
- ✅ **スケーラブル** - 本番環境と高トラフィックシナリオに適しています

**欠点:**
- ⚠️ **公開 HTTPS エンドポイントが必要** - Telegram のサーバーからアクセス可能である必要があります
- ⚠️ **SSL 証明書が必要** - 自己署名証明書はサポートされていません
- ⚠️ **より複雑なセットアップ** - リバースプロキシまたはクラウドホスティングが必要

**設定:**

```yaml
plugins:
  entries:
    telegram:
      enabled: true
      token: "YOUR_BOT_TOKEN_HERE"
      dmPolicy: "pair-once"
      webhook:
        enabled: true
        url: "https://your-domain.com/telegram/webhook"
        secretToken: "your-random-secret-string-here"
        port: 8443  # オプション、デフォルトは OpenClaw のメインポート
```

**Webhook セットアップ手順:**

1. **シークレットトークンを生成**して webhook 検証用に:
```bash
openssl rand -hex 32
```

2. **リバースプロキシを設定**(nginx の例):
```nginx
location /telegram/webhook {
    proxy_pass http://localhost:3000/telegram/webhook;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```

3. **SSL が設定されていることを確認** - Telegram は有効な証明書を持つ HTTPS を必要とします(Let's Encrypt が最適)

4. **OpenClaw を再起動** - webhook は自動的に Telegram に登録されます

### ポーリング vs Webhook 比較

| 機能 | ポーリングモード | Webhook モード |
|------|--------------|---------------|
| **セットアップの複雑さ** | シンプル ✅ | 中程度 ⚠️ |
| **公開 IP が必要** | いいえ ✅ | はい ⚠️ |
| **メッセージの遅延** | 1-3 秒 ⚠️ | 即時 ✅ |
| **リソース使用** | 高い ⚠️ | 低い ✅ |
| **最適な用途** | 開発、ローカルテスト | 本番環境、スケーリング |
| **デバッグ** | より簡単 ✅ | 中程度 ⚠️ |

**推奨:** 初期セットアップとテストにはポーリングモードから始めてください。本番環境にデプロイするとき、またはメッセージの遅延が問題になったときに webhook に移行します。

## ステップ 4: ボットをテストする

設定が完了したら、OpenClaw ゲートウェイを起動して統合をテストします:

### OpenClaw の起動

```bash
openclaw gateway start
```

起動ログで Telegram の初期化を確認します:
```
[INFO] Telegram plugin enabled
[INFO] Telegram: Polling mode active
[INFO] Bot username: @my_openclaw_bot
```

### 最初のメッセージを送信

1. Telegram を開いてボットを見つけます(作成したユーザー名を検索)
2. `/start` を送信して会話を開始
3. `dmPolicy: "pair-once"` を設定した場合、ペアリングプロセスを完了する必要があります
4. "こんにちは!" のようなテストメッセージを送信
5. OpenClaw インスタンスが Claude を通じて応答するはずです

### ステータスの確認

OpenClaw ステータスをチェックして **telegram bot polling mode** が動作していることを確認します:

```bash
openclaw status
```

Telegram が接続されていることを示す出力が表示されるはずです:
```
Plugins:
  telegram: ✓ Connected (@my_openclaw_bot)
```

### ペアリングフローの理解

`dmPolicy: "pair-once"` を設定した場合:

1. ユーザーがボットに最初のメッセージを送信
2. OpenClaw がペアリングリクエストを生成
3. ユーザーはペアリングを確認する必要があります(正確なフローは OpenClaw のバージョンによって異なります)
4. ペアリング後、そのユーザーからのすべてのメッセージが受け入れられます

このセキュリティモデルは、Claude インスタンスへの不正アクセスを防ぎます。

## 一般的な問題のトラブルシューティング

OpenClaw コミュニティによって報告された実際の GitHub issue に基づいて、最も一般的な問題とその解決策を以下に示します。

### 問題: ボットがメッセージを受信しない(ポーリングモード)

**GitHub Issue [#6665](https://github.com/openclaw/openclaw/issues/6665) に基づく**

**症状:**
- `openclaw status` が Telegram プラグインを "✓ Connected" と表示
- Telegram でボットがオンラインであることを確認できます
- ボットに送信されたメッセージが応答を受信しない
- 検索履歴に **openclaw telegram not receiving messages** が表示されます

**診断手順:**

1. **ボットトークンが正しいことを確認:**
```bash
grep -A 5 "telegram:" ~/.openclaw/config.yaml
```

2. **webhook がポーリングに干渉していないか確認:**
Telegram は両方のモードを同時に許可しません。以前に webhook が設定されていた場合、ポーリングがブロックされます。

webhook ステータスをテスト:
```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

値を持つ `url` フィールドが表示される場合、webhook モードがアクティブでポーリングをブロックしています。

3. **ユーザー ID と allowlist 設定を確認:**
`dmPolicy: "allowlist-only"` を使用している場合、Telegram ユーザー ID が allowlist にあることを確認してください。

ボットにメッセージを送信して OpenClaw ログを確認することでユーザー ID を見つけます:
```bash
openclaw gateway logs | grep "Telegram user"
```

4. **プラグインが実際に有効になっていることを確認:**
```bash
openclaw config get plugins.entries.telegram.enabled
```

`true` を返すはずです。

**解決策:**

**解決策 A: webhook をクリアしてポーリングを有効化**
```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/deleteWebhook?drop_pending_updates=true"
```

**解決策 B: ゲートウェイを完全に再起動**
```bash
openclaw gateway stop
sleep 2
openclaw gateway start
```

**解決策 C: allowlist 設定を確認して修正**
```yaml
plugins:
  entries:
    telegram:
      enabled: true
      token: "YOUR_BOT_TOKEN"
      dmPolicy: "allowlist-only"
      allowlist:
        - 123456789  # 実際のユーザー ID をここに追加
```

**解決策 D: 保留中の更新をクリア**

古いメッセージがキューを詰まらせることがあります:
```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates?offset=-1"
```

解決策を実装した後、ボットに新しいメッセージを送信してテストします。

### 問題: ネットワーク中断中にゲートウェイがクラッシュする

**GitHub Issue [#6676](https://github.com/openclaw/openclaw/issues/6676) に基づく**

**症状:**
- OpenClaw ゲートウェイが正常に実行中
- 短いネットワーク中断(WiFi 切断、ISP の問題、VPN 再接続)
- ゲートウェイがクラッシュし、エラー: `Unhandled promise rejection: fetch failed`
- ネットワーク回復後に **telegram bot not working**

**根本原因:**

以前のバージョンの OpenClaw の Telegram プラグインは、ポーリングリクエスト中にネットワークエラーを適切に処理せず、未処理の promise 拒否により Node.js プロセスがクラッシュしました。

**解決策:**

**解決策 A: 最新の OpenClaw バージョンにアップグレード(推奨)**

この問題は OpenClaw v0.5.2 以降で修正されました:
```bash
npm install -g openclaw@latest
# または
brew upgrade openclaw  # Homebrew 経由でインストールした場合
```

バージョンを確認:
```bash
openclaw --version
```

**解決策 B: 自動再起動を設定(systemd)**

Linux サーバーの場合、クラッシュ時に自動的に再起動するように systemd を設定します:

`/etc/systemd/system/openclaw.service` を作成:
```ini
[Unit]
Description=OpenClaw Gateway
After=network.target

[Service]
Type=simple
User=youruser
WorkingDirectory=/home/youruser
ExecStart=/usr/local/bin/openclaw gateway start --no-daemon
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
```

有効化して起動:
```bash
sudo systemctl enable openclaw
sudo systemctl start openclaw
```

**解決策 C: 再起動ループスクリプトを使用(一時的な回避策)**

systemd のない開発またはシステムの場合:

```bash
#!/bin/bash
while true; do
  openclaw gateway start
  echo "Gateway crashed, restarting in 5 seconds..."
  sleep 5
done
```

`run-openclaw.sh` として保存し、実行可能にして実行:
```bash
chmod +x run-openclaw.sh
./run-openclaw.sh
```

**予防:**

- OpenClaw を最新バージョンに保つ
- 早期警告の兆候についてゲートウェイログを監視
- 本番環境でプロセスマネージャー(systemd、PM2、supervisord)を使用
- カスタムプラグインを使用する場合、ネットワーク再試行ロジックを設定

### 問題: Markdown テーブルで空のメッセージ

**GitHub Issue [#6652](https://github.com/openclaw/openclaw/issues/6652) に基づく**

**症状:**
- Claude が markdown テーブルを含む応答を生成
- Telegram API がエラーを返す: `message text is empty`
- ユーザーが応答を受信しないか、エラーメッセージを受信する
- テーブルを含む応答でのみ問題が発生

**根本原因:**

Telegram の markdown パーサーには複雑なフォーマットに制限があります。OpenClaw が markdown テーブル(`|` パイプ文字と配置マーカーを使用)を送信しようとすると、Telegram のパーサーがメッセージ全体を無効として削除し、空のメッセージエラーが発生することがあります。

**解決策:**

**解決策 A: Telegram 応答でテーブルを避ける**

Telegram のテーブルフォーマットを避けるように OpenClaw プロンプトを設定します:

```yaml
plugins:
  entries:
    telegram:
      enabled: true
      systemPrompt: |
        Telegram の応答をフォーマットする場合:
        - テーブルの代わりに箇条書きリストを使用
        - シンプルな markdown を使用(太字、斜体、コード)
        - 複雑なフォーマット構造を避ける
```

**解決策 B: 箇条書きリストを代わりに使用**

テーブルデータを構造化リストに変換:

❌ **使用しないでください:**
```markdown
| 機能 | ステータス |
|------|-----------|
| ポーリング | アクティブ |
| Webhook | 非アクティブ |
```

✅ **代わりに使用:**
```markdown
**接続ステータス:**
• ポーリング: アクティブ ✅
• Webhook: 非アクティブ ⚠️
```

**解決策 C: 外部フォーマットコンテンツにリンク**

複雑なデータの場合、代わりにリンクを送信します:
```markdown
詳細な比較表を用意しました:
👉 https://your-domain.com/comparison

要点のまとめ:
• 機能 A: 利用可能
• 機能 B: 近日公開
```

**解決策 D: HTML モードを使用(高度)**

OpenClaw を Markdown の代わりに HTML モードで Telegram メッセージを送信するように設定できます:

```yaml
plugins:
  entries:
    telegram:
      enabled: true
      parseMode: "HTML"  # "Markdown" の代わりに
```

次に HTML テーブルを使用:
```html
<table>
  <tr><th>機能</th><th>ステータス</th></tr>
  <tr><td>ポーリング</td><td>アクティブ</td></tr>
</table>
```

**注意:** HTML モードは複雑なフォーマットのサポートが優れていますが、特殊文字の HTML セーフなエスケープが必要です。

### 問題: ターミナルで QR コードがレンダリングされない

**GitHub Issue [#6640](https://github.com/openclaw/openclaw/issues/6640) に基づく**

**症状:**
- 初期セットアップ中、OpenClaw がペアリング用の QR コードを表示
- QR コードが文字化けまたはボックスとして表示される
- macOS Terminal.app および一部の Linux ターミナルで特に一般的
- 初期セットアップが困難になる

**根本原因:**

QR コードは Unicode ブロック文字を使用してレンダリングされます。一部のターミナルエミュレーターは必要な Unicode 範囲を適切にサポートしていないか、フォントレンダリングの問題があります。

**解決策:**

**解決策 A: モダンなターミナルエミュレーターを使用**

優れた Unicode サポートを持つ推奨ターミナル:

- **macOS**: [iTerm2](https://iterm2.com/) または [Kitty](https://sw.kovidgoyal.net/kitty/)
- **Linux**: [Kitty](https://sw.kovidgoyal.net/kitty/)、[Alacritty](https://alacritty.org/)、または GNOME Terminal
- **Windows**: [Windows Terminal](https://aka.ms/terminal) または [WezTerm](https://wezfurlong.org/wezterm/)

**解決策 B: 適切な Unicode サポートを持つフォントを設定**

完全な Unicode ブロック文字サポートを持つフォントをインストールして設定します:

1. [JetBrains Mono](https://www.jetbrains.com/lp/mono/) または [Fira Code](https://github.com/tonsky/FiraCode) をインストール
2. 環境設定でターミナルフォントとして設定
3. ターミナルを再起動して再試行

**解決策 C: QR コードなしで手動設定**

QR コードペアリングを完全にスキップして手動で設定:

```bash
# QR コードをスキャンする代わりに、直接設定を編集
openclaw config set plugins.entries.telegram.token "YOUR_BOT_TOKEN"
openclaw config set plugins.entries.telegram.enabled true
```

**解決策 D: Web ベースのセットアップを使用(利用可能な場合)**

一部の OpenClaw バージョンは Web ベースの設定 UI を提供します:

```bash
openclaw gateway config --web
```

これにより、ターミナル QR コードなしで Telegram を設定できるブラウザインターフェースが開きます。

## セキュリティのベストプラクティス

**openclaw telegram bot setup** を保護することは、あなたに代わって Claude AI へのアクセスを提供するため、非常に重要です。

### 1. ボットトークンを保護する

- **トークンを git にコミットしない** - バージョン管理外の環境変数または設定ファイルを使用
- **定期的にトークンをローテーション** - 侵害の疑いがある場合は新しいボットを作成
- **シークレット管理を使用** - HashiCorp Vault、AWS Secrets Manager、または暗号化された設定ファイルなどのツール

### 2. アクセス制御に Allowlist を使用

本番環境では常に allowlist を設定します:

```yaml
plugins:
  entries:
    telegram:
      dmPolicy: "allowlist-only"
      allowlist:
        - 123456789  # 承認されたユーザーのみ
```

### 3. ボット権限を定期的に確認

BotFather を通じてボットができることを確認:
- `/mybots` → ボットを選択 → 設定を確認
- 未使用の機能(グループ、インラインモードなど)を無効化
- 必要ない場合はグループ権限を制限

### 4. Webhook シークレットトークンを使用

**openclaw telegram webhook config** を使用する場合、常にシークレットトークンを設定します:

```yaml
webhook:
  secretToken: "use-a-long-random-string-here"
```

Telegram はこれを `X-Telegram-Bot-Api-Secret-Token` ヘッダーに含め、リクエストが本物であることを確認できます。

### 5. 使用状況とログを監視

定期的にボットを使用しているユーザーを確認:
```bash
openclaw gateway logs | grep "Telegram message from"
```

異常なアクティビティパターンにアラートを設定します。

### 6. OpenClaw を最新の状態に保つ

セキュリティ修正は定期的にリリースされます:
```bash
openclaw update
# または
npm update -g openclaw
```

## 関連リソース

- **[OpenClaw 初心者ガイド](/blog/guide)** - OpenClaw セットアップの完全な紹介
- **[セッションメモリ問題の修正](/blog/troubleshooting/fix-session-memory-issues)** - 一般的な問題のトラブルシューティングガイド
- **[公式 Telegram Bot API ドキュメント](https://core.telegram.org/bots/api)** - Telegram の機能の詳細
- **[OpenClaw プラグイン開発](https://docs.openclaw.org/plugins)** - カスタム機能で OpenClaw を拡張
- **[GitHub Issues リポジトリ](https://github.com/openclaw/openclaw/issues)** - バグ報告と機能リクエスト

## まとめ

**openclaw telegram bot setup** を設定することで、世界で最も人気のあるメッセージングプラットフォームの 1 つを通じて Claude AI と対話するための強力で柔軟な方法が提供されます。以下は私たちがカバーした内容です:

**主要なステップ:**
1. ✅ BotFather でボットを作成してトークンを取得
2. ✅ 基本設定で OpenClaw を設定(トークン、dmPolicy)
3. ✅ ポーリング(シンプル)と webhook(本番)モード間で選択
4. ✅ ボットをテストしてペアリングワークフローを確認
5. ✅ 実際の解決策を使用して一般的な問題をトラブルシューティング

**覚えておいてください:**
- **ポーリングモード**は開始とローカル開発に最適
- **Webhook モード**は低遅延の本番デプロイメントに適しています
- **Allowlist 設定**はセキュリティに不可欠
- **OpenClaw を最新に保つ**ことでネットワーククラッシュバグなどの既知の問題を回避
- **markdown テーブルを避ける** Telegram 応答で空のメッセージエラーを防ぐため

**openclaw telegram not receiving messages**、**openclaw telegram webhook config** の設定、または **telegram bot polling mode** 問題のトラブルシューティングを行っている場合でも、このガイドはコミュニティによって報告された実際の GitHub issue に基づく実際の解決策を提供します。

Telegram で Claude と楽しくチャットしてください! 🤖✨
