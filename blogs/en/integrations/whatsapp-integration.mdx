---
title: WhatsApp Integration for OpenClaw - Complete Setup Guide with Groups, Media & Multi-Account
description: Complete guide to connecting OpenClaw with WhatsApp using Baileys. Covers QR login, DM policies, group chats, media handling, pairing mode, and multi-account setup.
slug: /whatsapp-integration
tags: whatsapp, integration, baileys, messaging, groups, media
publishedAt: 2025-02-15
status: published
visibility: public
featuredImageUrl: /images/features/whatsapp-integration.webp
---

# WhatsApp Integration for OpenClaw: Complete Setup Guide

Connect your AI assistant to WhatsApp and chat with it just like a friend. OpenClaw uses WhatsApp Web (via Baileys) to provide a seamless messaging experience â€” no business API needed, no 24-hour reply windows, just pure personal assistant magic.

This guide covers everything: from basic QR code login to advanced group chat configuration, media handling, and multi-account setups.

## How It Works

OpenClaw connects to WhatsApp Web using the Baileys library (the same technology behind many WhatsApp bots). Your phone acts as the authentication device, and OpenClaw maintains a persistent session on your computer.

**Key benefits over WhatsApp Business API:**
- No 24-hour reply window restrictions
- Works with personal numbers
- No Meta Business Manager setup required
- Full group chat support

## Prerequisites

Before you begin:

- OpenClaw Gateway installed and running
- A phone number for WhatsApp (can be your personal number or a dedicated one)
- Node.js runtime (**not Bun** â€” Baileys is unreliable on Bun)

## Step 1: Basic Configuration

Add WhatsApp to your `~/.openclaw/openclaw.json`:

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"], // Your phone number (E.164 format)
    },
  },
}
```

**Important:** Use E.164 format for phone numbers (e.g., `+1` for US, `+86` for China, `+44` for UK).

## Step 2: Login via QR Code

Link your WhatsApp account:

```bash
openclaw channels login --channel whatsapp
```

This displays a QR code in your terminal. Scan it with your phone:

1. Open WhatsApp on your phone
2. Go to **Settings â†’ Linked Devices**
3. Tap **Link a Device**
4. Scan the QR code

Once linked, you'll see a confirmation. The session persists in `~/.openclaw/credentials/whatsapp/default/creds.json`.

## Step 3: Verify Connection

Check your channel status:

```bash
openclaw channels status --probe
```

You should see WhatsApp listed as `linked: true` and `running`.

## Phone Number Options

### Option A: Dedicated Number (Recommended)

Use a **separate phone number** for OpenClaw. This provides:
- Clean separation from personal messages
- No risk of confusing contacts
- Easier troubleshooting

**Best setup:** Old Android phone + eSIM on Wi-Fi, running WhatsApp Business with your OpenClaw number.

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"], // Your personal number to talk to the bot
    },
  },
}
```

### Option B: Personal Number (Fallback)

Run OpenClaw on your **own WhatsApp number**. Use "Message yourself" for testing. Enable self-chat mode:

```json5
{
  channels: {
    whatsapp: {
      selfChatMode: true,
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"], // Same as your WhatsApp number
    },
  },
}
```

**Where to get a number:**
- Local eSIM from your mobile carrier (most reliable)
- Prepaid SIM (just needs one SMS for verification)
- **Avoid:** Google Voice, TextNow, "free SMS" services â€” WhatsApp blocks these

## DM Access Control

WhatsApp supports three DM policies:

### Allowlist Mode (Default for security)

Only specific numbers can message the bot:

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567", "+15559876543"],
    },
  },
}
```

### Pairing Mode (Approve new senders)

Unknown senders receive a pairing code. Approve them manually:

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "pairing",
    },
  },
}
```

**Approve a sender:**

```bash
openclaw pairing list whatsapp
openclaw pairing approve whatsapp <CODE>
```

Pairing codes:
- 8 characters, uppercase
- Expire after 1 hour
- Max 3 pending requests per channel

### Open Mode (Allow everyone)

Allow anyone to message the bot (**use with caution**):

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "open",
      allowFrom: ["*"],
    },
  },
}
```

## Group Chat Configuration

OpenClaw can participate in WhatsApp groups with smart activation.

### Enable Group Access

```json5
{
  channels: {
    whatsapp: {
      groupPolicy: "allowlist", // or "open" for all groups
      groups: {
        "*": { requireMention: true }, // Allow all groups, require @mention
      },
    },
  },
}
```

### Activation Modes

**Mention mode (default):** Bot only responds when @mentioned:

```json5
{
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          mentionPatterns: ["@openclaw", "openclaw", "\\+15555550123"],
          historyLimit: 50,
        },
      },
    ],
  },
}
```

**Always mode:** Bot responds to every message (use sparingly):

```
/activation always
```

Switch back with `/activation mention` (owner-only command).

### Group Context

When triggered in a group, the bot receives:
- Recent unprocessed messages (default 50) for context
- Current message marked separately
- Sender info: `[from: Name (+E164)]`
- Group metadata: subject, participants

## Media Handling

### Receiving Media

OpenClaw downloads and processes incoming media:

```json5
{
  channels: {
    whatsapp: {
      mediaMaxMb: 50, // Max inbound media size
    },
  },
}
```

Media types supported:
- Images, videos, audio
- Documents, stickers
- Voice notes (transcribed if audio transcription is configured)

### Sending Media

The bot can send images, videos, audio, and documents:

```json5
{
  agents: {
    defaults: {
      mediaMaxMb: 5, // Max outbound media size
    },
  },
}
```

**GIF support:** For animated GIFs, WhatsApp requires MP4 with `gifPlayback: true`:

```bash
openclaw message send --channel whatsapp --to "+15551234567" --media video.mp4 --gif-playback
```

### Voice Notes

Audio is automatically sent as voice notes (PTT bubble). Best format: OGG/Opus.

## Auto-Reactions

Send emoji reactions when messages are received:

```json5
{
  channels: {
    whatsapp: {
      ackReaction: {
        emoji: "ðŸ‘€",
        direct: true,     // React in DMs
        group: "mentions", // Only react when mentioned in groups
      },
    },
  },
}
```

Group options:
- `"always"`: React to all group messages
- `"mentions"`: React only when @mentioned
- `"never"`: Never react in groups

## Read Receipts

By default, OpenClaw sends read receipts (blue ticks). Disable if needed:

```json5
{
  channels: {
    whatsapp: {
      sendReadReceipts: false,
    },
  },
}
```

## Multi-Account Setup

Run multiple WhatsApp accounts in one Gateway:

```json5
{
  channels: {
    whatsapp: {
      accounts: {
        personal: {
          allowFrom: ["+15551111111"],
        },
        work: {
          allowFrom: ["+15552222222"],
          ackReaction: { emoji: "âœ…" },
        },
      },
    },
  },
}
```

**Login to specific account:**

```bash
openclaw channels login --account personal
openclaw channels login --account work
```

## Complete Configuration Example

Here's a full setup with all major features:

```json5
{
  identity: {
    name: "Clawd",
    emoji: "ðŸ¦ž",
  },

  channels: {
    whatsapp: {
      // DM access control
      dmPolicy: "allowlist",
      allowFrom: ["+15551234567"],
      
      // Group settings
      groupPolicy: "allowlist",
      groups: {
        "*": { requireMention: true },
      },
      
      // Media limits
      mediaMaxMb: 50,
      
      // Auto-reactions
      ackReaction: {
        emoji: "ðŸ‘€",
        direct: true,
        group: "mentions",
      },
      
      // Message chunking (for long replies)
      textChunkLimit: 4000,
      chunkMode: "newline", // Split on paragraphs
    },
  },
  
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          mentionPatterns: ["@clawd", "clawd"],
          historyLimit: 50,
        },
      },
    ],
  },
}
```

## CLI Commands

### Check Status

```bash
openclaw channels status --probe
```

### Send Messages

```bash
openclaw message send --channel whatsapp --to "+15551234567" --message "Hello!"
openclaw message send --channel whatsapp --to "+15551234567" --media image.jpg
```

### View Logs

```bash
openclaw channels logs --channel whatsapp
```

### Logout

```bash
openclaw channels logout --channel whatsapp
```

## Troubleshooting

### "Not linked" or QR login required

**Symptom:** `channels status` shows `linked: false`

**Fix:** Run `openclaw channels login` and scan the QR code again. Sessions can expire if your phone is offline for too long.

### Linked but disconnected / reconnect loop

**Symptom:** Status shows `running, disconnected`

**Fix:**
1. Run `openclaw doctor`
2. Restart the gateway
3. If persistent, re-link via `openclaw channels login`

### Messages not being received

**Check:**
1. Is `dmPolicy` set correctly?
2. Is the sender in `allowFrom`?
3. For groups: Is `groupPolicy` set? Is `requireMention` blocking messages?

### Bun runtime issues

**Symptom:** Random disconnects, failed sends

**Fix:** WhatsApp (Baileys) is unreliable on Bun. Switch to Node.js:

```bash
# In your shell profile
export OPENCLAW_RUNTIME=node
```

### Media sending fails

**Check:**
1. File size within `mediaMaxMb` limit
2. Supported format (JPEG, PNG, MP4, OGG)
3. Gateway has internet access

## Security Considerations

- **Credentials:** Stored in `~/.openclaw/credentials/whatsapp/`. Back these up and keep them secure.
- **Pairing store:** `~/.openclaw/credentials/whatsapp-pairing.json` and `whatsapp-allowFrom.json` control access.
- **Don't share:** Never share your `creds.json` â€” it provides full access to your WhatsApp account.

## Why Not Twilio WhatsApp?

OpenClaw removed Twilio WhatsApp Business support because:
- 24-hour reply window restrictions
- Business accounts aren't meant for personal assistant use
- High-volume usage triggers blocking
- Unreliable delivery for chatty assistants

WhatsApp Web via Baileys avoids all these issues.

## Next Steps

- Set up [group chat activation](/blog/multi-agent-setup) with multiple agents
- Configure [audio transcription](/blog/voice-call-setup) for voice notes
- Add [cron jobs](/blog/cron-job-best-practices) for scheduled messages

## Summary

You've configured WhatsApp integration with:

- âœ… **QR code login** via WhatsApp Web
- âœ… **DM policies** for access control
- âœ… **Group chat support** with mention activation
- âœ… **Media handling** for images, videos, and voice notes
- âœ… **Auto-reactions** for instant feedback
- âœ… **Multi-account** support

Your AI assistant is now available on WhatsApp! ðŸ’¬
