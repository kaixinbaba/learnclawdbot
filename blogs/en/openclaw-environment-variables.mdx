---
title: "OpenClaw Environment Variables: Complete Configuration Reference"
description: "Master OpenClaw environment variables for Gateway setup, model authentication, and deployment. Covers OPENCLAW_GATEWAY_TOKEN, API keys, bind settings, and platform-specific configurations."
slug: /openclaw-environment-variables
publishedAt: 2026-02-17
status: published
visibility: public
featuredImageUrl: /images/features/env-vars-guide.webp
---

# OpenClaw Environment Variables: Complete Configuration Reference

Environment variables are the backbone of OpenClaw deployment. Whether you're running locally, on a VPS, or in Docker, understanding these variables is essential for security, connectivity, and proper authentication.

This guide covers every environment variable you need to know, with real-world examples and troubleshooting tips.

## Quick Reference Table

| Variable | Required | Purpose |
|----------|----------|---------|
| `OPENCLAW_GATEWAY_TOKEN` | For remote | Gateway authentication token |
| `OPENCLAW_GATEWAY_PORT` | No | Gateway port (default: 18789) |
| `OPENCLAW_GATEWAY_BIND` | No | Network binding (lan/tailnet) |
| `ANTHROPIC_API_KEY` | Yes* | Anthropic model access |
| `OPENAI_API_KEY` | Yes* | OpenAI model access |
| `BRAVE_API_KEY` | No | Web search functionality |
| `GEMINI_API_KEY` | No | Google Gemini models |

*At least one model API key is required.

## Gateway Variables

### OPENCLAW_GATEWAY_TOKEN

The most critical security variable. Required when the Gateway binds to non-loopback addresses.

```bash
# Generate a secure token
export OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
```

**When you need it:**
- Docker deployments
- VPS/cloud hosting
- Any non-localhost access

**Security notes:**
- Treat this as an admin secret
- Never commit to version control
- Rotate periodically in production

### OPENCLAW_GATEWAY_PORT

Override the default Gateway port (18789).

```bash
export OPENCLAW_GATEWAY_PORT=3000
```

**Common scenarios:**
- Port conflicts with other services
- Platform requirements (e.g., Fly.io health checks)
- Reverse proxy setups

### OPENCLAW_GATEWAY_BIND

Control which network interfaces the Gateway listens on.

```bash
# Listen on all LAN interfaces
export OPENCLAW_GATEWAY_BIND=lan

# Listen only on Tailscale interface
export OPENCLAW_GATEWAY_BIND=tailnet
```

**Options:**
- `localhost` (default) — loopback only
- `lan` — all network interfaces
- `tailnet` — Tailscale interface only

**Security warning:** Using `lan` without `OPENCLAW_GATEWAY_TOKEN` is dangerous!

## Model API Keys

### ANTHROPIC_API_KEY

Primary key for Claude models.

```bash
export ANTHROPIC_API_KEY="sk-ant-api03-..."
```

**Setup options:**
1. Export in shell
2. Add to `~/.openclaw/.env`
3. Use `openclaw onboard` wizard

**Verification:**

```bash
openclaw models status
openclaw doctor
```

### OPENAI_API_KEY

For OpenAI models (GPT-4, etc.).

```bash
export OPENAI_API_KEY="sk-..."
```

### GEMINI_API_KEY

For Google Gemini models and image generation.

```bash
export GEMINI_API_KEY="AIza..."
```

## Tool-Specific Variables

### BRAVE_API_KEY

Enable web search functionality.

```bash
export BRAVE_API_KEY="BSA..."
```

**Note:** Use the "Data for Search" plan, not "Data for AI".

## Platform-Specific Configurations

### Docker / Docker Compose

Create a `.env` file:

```bash
OPENCLAW_GATEWAY_TOKEN=your-secure-token
OPENCLAW_GATEWAY_BIND=lan
OPENCLAW_GATEWAY_PORT=18789
ANTHROPIC_API_KEY=sk-ant-...
```

Reference in `docker-compose.yml`:

```yaml
services:
  openclaw:
    image: openclaw/gateway
    env_file:
      - .env
    ports:
      - "18789:18789"
```

### Fly.io

Set secrets via CLI:

```bash
fly secrets set OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
fly secrets set ANTHROPIC_API_KEY=sk-ant-...
```

**Important:** Match `internal_port` with `OPENCLAW_GATEWAY_PORT`:

```toml
[[services]]
  internal_port = 3000
```

```bash
fly secrets set OPENCLAW_GATEWAY_PORT=3000
```

### Hetzner / GCP / Generic VPS

Create `~/.openclaw/.env` on the server:

```bash
OPENCLAW_GATEWAY_TOKEN=change-me-now
OPENCLAW_GATEWAY_BIND=lan
OPENCLAW_GATEWAY_PORT=18789
ANTHROPIC_API_KEY=sk-ant-...
```

Then restart the Gateway:

```bash
openclaw gateway restart
```

### systemd / launchd

For daemon persistence, put keys in `~/.openclaw/.env`:

```bash
cat >> ~/.openclaw/.env << 'EOF'
ANTHROPIC_API_KEY=sk-ant-...
BRAVE_API_KEY=BSA...
EOF
```

The Gateway reads this file automatically on startup.

## The ~/.openclaw/.env File

This is the recommended location for persistent environment variables:

```bash
# ~/.openclaw/.env
ANTHROPIC_API_KEY=sk-ant-api03-xxx
OPENAI_API_KEY=sk-xxx
BRAVE_API_KEY=BSA-xxx
OPENCLAW_GATEWAY_TOKEN=your-secure-token
```

**Why use this file:**
- Survives shell restarts
- Works with systemd/launchd daemons
- Keeps secrets out of shell history
- Single source of truth

## Advanced Variables

### Exec Tool Configuration

```bash
# Default background timeout (ms)
PI_BASH_YIELD_MS=10000

# Max output buffer (chars)
PI_BASH_MAX_OUTPUT_CHARS=100000

# Job TTL for finished sessions (ms, 1m-3h)
PI_BASH_JOB_TTL_MS=1800000
```

### Canvas Host

```bash
# Disable canvas host
OPENCLAW_SKIP_CANVAS_HOST=1
```

## Troubleshooting

### "No credentials found"

**Cause:** API key not set or not readable by Gateway.

**Fix:**
1. Check the variable is exported: `echo $ANTHROPIC_API_KEY`
2. If using daemon, add to `~/.openclaw/.env`
3. Restart Gateway: `openclaw gateway restart`
4. Verify: `openclaw models status`

### "Connection refused" on remote Gateway

**Cause:** Gateway bound to localhost only.

**Fix:**
```bash
export OPENCLAW_GATEWAY_BIND=lan
export OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
openclaw gateway restart
```

### "Unauthorized" error

**Cause:** Token mismatch between client and Gateway.

**Fix:**
1. Check token on Gateway host: `echo $OPENCLAW_GATEWAY_TOKEN`
2. Use same token when connecting from client
3. Ensure no whitespace or quotes issues

### Port already in use

**Cause:** Another process using port 18789.

**Fix:**
```bash
# Find the process
lsof -i :18789

# Use a different port
export OPENCLAW_GATEWAY_PORT=3001
openclaw gateway restart
```

## Best Practices

1. **Never commit secrets** — Use `.env` files and add to `.gitignore`
2. **Use secure token generation** — `openssl rand -hex 32` or equivalent
3. **Prefer `~/.openclaw/.env`** — Works across restarts and daemons
4. **Rotate tokens periodically** — Especially in production
5. **Use `openclaw doctor`** — Catches configuration issues early
6. **Bind to tailnet when possible** — More secure than `lan`

## Environment Variable Precedence

OpenClaw reads variables in this order (later overrides earlier):

1. System environment
2. `~/.openclaw/.env` file
3. Config file (`~/.openclaw/openclaw.json`)

## Summary

Environment variables control OpenClaw's security, connectivity, and model access:

| Category | Key Variables |
|----------|--------------|
| **Security** | `OPENCLAW_GATEWAY_TOKEN` |
| **Network** | `OPENCLAW_GATEWAY_BIND`, `OPENCLAW_GATEWAY_PORT` |
| **Models** | `ANTHROPIC_API_KEY`, `OPENAI_API_KEY`, `GEMINI_API_KEY` |
| **Tools** | `BRAVE_API_KEY` |

Get these right, and your OpenClaw deployment will be secure and functional.

## Related Resources

- [Gateway Configuration](/docs/gateway) — Full Gateway setup guide
- [Docker Deployment](/docs/docker) — Containerized deployment
- [VPS Setup](/docs/vps) — Cloud server deployment
- [Authentication](/docs/authentication) — Model auth deep dive
