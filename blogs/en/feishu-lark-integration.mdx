---
title: "How to Integrate Feishu/Lark with OpenClaw AI Bot"
description: "Complete guide to connecting OpenClaw AI assistant with Feishu (China) and Lark (International) enterprise messaging platforms. Learn setup, configuration, and advanced features for Chinese enterprise collaboration."
slug: /feishu-lark-integration
tags: Feishu, Lark, Enterprise, Integration, Chinese Market, WebSocket, AI Bot
publishedAt: 2026-02-16
status: published
visibility: public
featuredImageUrl: /images/features/feishu-lark-integration.webp
---

# How to Integrate Feishu/Lark with OpenClaw AI Bot

Feishu (飞书) and Lark are enterprise messaging platforms widely used in Chinese and global companies for team collaboration. This guide shows you how to connect your OpenClaw AI assistant to Feishu/Lark using WebSocket-based event subscriptions, enabling seamless AI interactions in your corporate chat environment.

## What's the Difference Between Feishu and Lark?

- **Feishu (飞书)**: The China-based version, used by Chinese enterprises. Platform: `https://open.feishu.cn`
- **Lark**: The international version, used globally. Platform: `https://open.larksuite.com`

Both use the same API architecture, but you'll need to configure the correct domain in OpenClaw.

---

## Prerequisites

Before you start, make sure you have:

- OpenClaw installed and running
- A Feishu/Lark account with admin access to create enterprise apps
- Basic familiarity with terminal/command line

---

## Step 1: Install the Feishu Plugin

First, install the official Feishu plugin for OpenClaw:

```bash
openclaw plugins install @openclaw/feishu
```

If you're running from a git repository:

```bash
openclaw plugins install ./extensions/feishu
```

---

## Step 2: Create a Feishu/Lark App

### 1. Open the Developer Platform

Visit the appropriate platform based on your region:

- **Feishu (China)**: [https://open.feishu.cn/app](https://open.feishu.cn/app)
- **Lark (International)**: [https://open.larksuite.com/app](https://open.larksuite.com/app)

Sign in with your account.

### 2. Create an Enterprise App

1. Click **Create enterprise app**
2. Fill in the app name and description
3. Choose an app icon

### 3. Copy Your Credentials

From **Credentials & Basic Info**, copy:

- **App ID** (format: `cli_xxx`)
- **App Secret**

⚠️ **Important**: Keep the App Secret private and never commit it to version control.

### 4. Configure Permissions

On the **Permissions** page, click **Batch import** and paste this JSON:

```json
{
  "scopes": {
    "tenant": [
      "aily:file:read",
      "aily:file:write",
      "application:application.app_message_stats.overview:readonly",
      "application:application:self_manage",
      "application:bot.menu:write",
      "contact:user.employee_id:readonly",
      "corehr:file:download",
      "event:ip_list",
      "im:chat.access_event.bot_p2p_chat:read",
      "im:chat.members:bot_access",
      "im:message",
      "im:message.group_at_msg:readonly",
      "im:message.p2p_msg:readonly",
      "im:message:readonly",
      "im:message:send_as_bot",
      "im:resource"
    ],
    "user": [
      "aily:file:read",
      "aily:file:write",
      "im:chat.access_event.bot_p2p_chat:read"
    ]
  }
}
```

This grants the bot all necessary permissions to send/receive messages, access files, and manage bot capabilities.

### 5. Enable Bot Capability

In **App Capability** > **Bot**:

1. Enable bot capability
2. Set the bot name

### 6. Configure Event Subscription

⚠️ **Critical**: Before setting up event subscription, ensure:

1. You've added the Feishu channel to OpenClaw (see Step 3)
2. The OpenClaw gateway is running (`openclaw gateway status`)

In **Event Subscription**:

1. Choose **Use long connection to receive events** (WebSocket mode)
2. Add the event: `im.message.receive_v1`

⚠️ If the gateway is not running, the WebSocket connection setup will fail.

### 7. Publish the App

1. Create a version in **Version Management & Release**
2. Submit for review and publish
3. Wait for admin approval (enterprise apps usually auto-approve)

---

## Step 3: Configure OpenClaw

### Method 1: Interactive Setup (Recommended)

Run the channel setup wizard:

```bash
openclaw channels add
```

Choose **Feishu** and enter your App ID and App Secret when prompted.

### Method 2: Manual Configuration

Edit `~/.openclaw/openclaw.json`:

```json5
{
  channels: {
    feishu: {
      enabled: true,
      dmPolicy: "pairing",
      accounts: {
        main: {
          appId: "cli_xxx",
          appSecret: "xxx",
          botName: "My AI Assistant",
        },
      },
    },
  },
}
```

### For Lark (International)

If you're using Lark instead of Feishu, add the `domain` setting:

```json5
{
  channels: {
    feishu: {
      domain: "lark",
      accounts: {
        main: {
          appId: "cli_xxx",
          appSecret: "xxx",
        },
      },
    },
  },
}
```

---

## Step 4: Start and Test

### 1. Start the Gateway

```bash
openclaw gateway
```

Check the gateway status:

```bash
openclaw gateway status
```

### 2. Send a Test Message

In Feishu/Lark, find your bot and send a message.

### 3. Approve Pairing

By default, the bot uses pairing mode for security. When a new user messages the bot, they'll receive a pairing code.

Approve the pairing:

```bash
openclaw pairing list feishu
openclaw pairing approve feishu <CODE>
```

After approval, you can chat normally with the bot.

---

## Advanced Features

### Group Chat Configuration

**Default behavior**: In group chats, the bot requires @mention to respond.

To allow the bot to respond without @mention in a specific group:

```json5
{
  channels: {
    feishu: {
      groups: {
        oc_xxx: { requireMention: false },
      },
    },
  },
}
```

**Get the group ID**: Send a message in the group with @mention, then check the logs:

```bash
openclaw logs --follow
```

Look for the `chat_id` (format: `oc_xxx`).

### Access Control Policies

**DM Policy** (`dmPolicy`):

- `"pairing"` (default): Requires admin approval for new users
- `"allowlist"`: Only specific users can chat
- `"open"`: Allow everyone (requires `"*"` in allowFrom)
- `"disabled"`: Disable DMs

**Group Policy** (`groupPolicy`):

- `"open"` (default): Allow all users in groups
- `"allowlist"`: Only specific users in `groupAllowFrom`
- `"disabled"`: Disable group messages

Example allowlist configuration:

```json5
{
  channels: {
    feishu: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["ou_xxx", "ou_yyy"],
    },
  },
}
```

### Multiple Accounts

You can manage multiple Feishu/Lark bots:

```json5
{
  channels: {
    feishu: {
      accounts: {
        main: {
          appId: "cli_xxx",
          appSecret: "xxx",
          botName: "Primary Bot",
        },
        backup: {
          appId: "cli_yyy",
          appSecret: "yyy",
          botName: "Backup Bot",
          enabled: false,
        },
      },
    },
  },
}
```

---

## Troubleshooting

### Bot Does Not Respond in Groups

1. Ensure the bot is added to the group
2. Ensure you @mention the bot (default behavior)
3. Check `groupPolicy` is not set to `"disabled"`
4. Check logs: `openclaw logs --follow`

### Bot Does Not Receive Messages

1. Ensure the app is published and approved
2. Ensure event subscription includes `im.message.receive_v1`
3. Ensure **long connection** (WebSocket) is enabled
4. Ensure all permissions are granted
5. Ensure the gateway is running: `openclaw gateway status`
6. Check logs: `openclaw logs --follow`

### App Secret Leaked

1. Reset the App Secret in Feishu/Lark Open Platform
2. Update the App Secret in your OpenClaw config
3. Restart the gateway: `openclaw gateway restart`

### Message Send Failures

1. Ensure the app has `im:message:send_as_bot` permission
2. Ensure the app is published
3. Check logs for detailed error messages

---

## Common Commands

| Command   | Description       |
| --------- | ----------------- |
| `/status` | Show bot status   |
| `/reset`  | Reset the session |
| `/model`  | Show/switch model |

---

## Supported Message Types

**Receive**:
- ✅ Text
- ✅ Images
- ✅ Files
- ✅ Audio
- ✅ Video
- ✅ Stickers

**Send**:
- ✅ Text
- ✅ Images
- ✅ Files
- ✅ Audio
- ⚠️ Rich text (partial support)

---

## Summary

You've successfully integrated OpenClaw with Feishu/Lark! This setup enables your team to interact with AI directly in your enterprise messaging platform, whether you're using the China-based Feishu or the international Lark version.

**Key Takeaways**:
- Feishu and Lark use the same API, just different domains
- WebSocket mode eliminates the need for public webhook URLs
- Pairing mode provides secure access control for enterprise use
- Both DMs and group chats are fully supported with flexible policies

For more configuration options, check the [official OpenClaw documentation](https://docs.openclaw.ai).
