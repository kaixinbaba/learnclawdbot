---
title: OpenClaw WhatsApp é›†æˆ - ç¾¤ç»„ã€åª’ä½“ä¸å¤šè´¦æˆ·å®Œæ•´é…ç½®æŒ‡å—
description: ä½¿ç”¨ Baileys è¿æ¥ OpenClaw ä¸ WhatsApp çš„å®Œæ•´æŒ‡å—ã€‚æ¶µç›– QR ç™»å½•ã€ç§èŠç­–ç•¥ã€ç¾¤ç»„èŠå¤©ã€åª’ä½“å¤„ç†ã€é…å¯¹æ¨¡å¼å’Œå¤šè´¦æˆ·è®¾ç½®ã€‚
slug: /whatsapp-integration
tags: whatsapp, é›†æˆ, baileys, æ¶ˆæ¯, ç¾¤ç»„, åª’ä½“
publishedAt: 2025-02-15
status: published
visibility: public
featuredImageUrl: /images/features/whatsapp-integration.webp
---

# OpenClaw WhatsApp é›†æˆï¼šå®Œæ•´é…ç½®æŒ‡å—

å°†ä½ çš„ AI åŠ©æ‰‹è¿æ¥åˆ° WhatsAppï¼Œåƒå’Œæœ‹å‹èŠå¤©ä¸€æ ·ä¸å®ƒå¯¹è¯ã€‚OpenClaw ä½¿ç”¨ WhatsApp Webï¼ˆé€šè¿‡ Baileysï¼‰æä¾›æ— ç¼çš„æ¶ˆæ¯ä½“éªŒâ€”â€”æ— éœ€å•†ä¸š APIï¼Œæ²¡æœ‰ 24 å°æ—¶å›å¤çª—å£é™åˆ¶ï¼Œåªæœ‰çº¯ç²¹çš„ä¸ªäººåŠ©æ‰‹é­”æ³•ã€‚

æœ¬æŒ‡å—æ¶µç›–æ‰€æœ‰å†…å®¹ï¼šä»åŸºæœ¬çš„ QR ç ç™»å½•åˆ°é«˜çº§ç¾¤ç»„èŠå¤©é…ç½®ã€åª’ä½“å¤„ç†å’Œå¤šè´¦æˆ·è®¾ç½®ã€‚

## å·¥ä½œåŸç†

OpenClaw ä½¿ç”¨ Baileys åº“è¿æ¥åˆ° WhatsApp Webï¼ˆè¿™æ˜¯è®¸å¤š WhatsApp æœºå™¨äººèƒŒåçš„ç›¸åŒæŠ€æœ¯ï¼‰ã€‚ä½ çš„æ‰‹æœºä½œä¸ºè®¤è¯è®¾å¤‡ï¼ŒOpenClaw åœ¨ç”µè„‘ä¸Šç»´æŠ¤æŒä¹…ä¼šè¯ã€‚

**ç›¸æ¯” WhatsApp Business API çš„ä¼˜åŠ¿ï¼š**
- æ²¡æœ‰ 24 å°æ—¶å›å¤çª—å£é™åˆ¶
- å¯ä»¥ä½¿ç”¨ä¸ªäººå·ç 
- æ— éœ€ Meta Business Manager è®¾ç½®
- å®Œæ•´çš„ç¾¤ç»„èŠå¤©æ”¯æŒ

## å‰ç½®æ¡ä»¶

å¼€å§‹ä¹‹å‰ï¼š

- OpenClaw Gateway å·²å®‰è£…å¹¶è¿è¡Œ
- ä¸€ä¸ªç”¨äº WhatsApp çš„æ‰‹æœºå·ç ï¼ˆå¯ä»¥æ˜¯ä¸ªäººå·ç æˆ–ä¸“ç”¨å·ç ï¼‰
- Node.js è¿è¡Œæ—¶ï¼ˆ**ä¸è¦ç”¨ Bun**â€”â€”Baileys åœ¨ Bun ä¸Šä¸ç¨³å®šï¼‰

## ç¬¬ä¸€æ­¥ï¼šåŸºæœ¬é…ç½®

å°† WhatsApp æ·»åŠ åˆ° `~/.openclaw/openclaw.json`ï¼š

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+8613812345678"], // ä½ çš„æ‰‹æœºå·ç ï¼ˆE.164 æ ¼å¼ï¼‰
    },
  },
}
```

**é‡è¦ï¼š** ä½¿ç”¨ E.164 æ ¼å¼çš„æ‰‹æœºå·ç ï¼ˆä¾‹å¦‚ `+86` ä»£è¡¨ä¸­å›½ï¼Œ`+1` ä»£è¡¨ç¾å›½ï¼Œ`+44` ä»£è¡¨è‹±å›½ï¼‰ã€‚

## ç¬¬äºŒæ­¥ï¼šé€šè¿‡ QR ç ç™»å½•

é“¾æ¥ä½ çš„ WhatsApp è´¦æˆ·ï¼š

```bash
openclaw channels login --channel whatsapp
```

ç»ˆç«¯ä¼šæ˜¾ç¤ºä¸€ä¸ª QR ç ã€‚ç”¨æ‰‹æœºæ‰«æï¼š

1. æ‰“å¼€æ‰‹æœºä¸Šçš„ WhatsApp
2. è¿›å…¥**è®¾ç½® â†’ å·²å…³è”çš„è®¾å¤‡**
3. ç‚¹å‡»**å…³è”è®¾å¤‡**
4. æ‰«æ QR ç 

é“¾æ¥æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°ç¡®è®¤ä¿¡æ¯ã€‚ä¼šè¯ä¿å­˜åœ¨ `~/.openclaw/credentials/whatsapp/default/creds.json`ã€‚

## ç¬¬ä¸‰æ­¥ï¼šéªŒè¯è¿æ¥

æ£€æŸ¥é¢‘é“çŠ¶æ€ï¼š

```bash
openclaw channels status --probe
```

ä½ åº”è¯¥çœ‹åˆ° WhatsApp æ˜¾ç¤ºä¸º `linked: true` å’Œ `running`ã€‚

## æ‰‹æœºå·ç é€‰é¡¹

### é€‰é¡¹ Aï¼šä¸“ç”¨å·ç ï¼ˆæ¨èï¼‰

ä¸º OpenClaw ä½¿ç”¨**å•ç‹¬çš„æ‰‹æœºå·ç **ã€‚è¿™æ ·å¯ä»¥ï¼š
- ä¸ä¸ªäººæ¶ˆæ¯æ¸…æ™°åˆ†ç¦»
- ä¸ä¼šæ··æ·†è”ç³»äºº
- æ›´å®¹æ˜“æ’æŸ¥é—®é¢˜

**æœ€ä½³è®¾ç½®ï¼š** æ—§ Android æ‰‹æœº + eSIMï¼Œè¿æ¥ Wi-Fiï¼Œè¿è¡Œ WhatsApp Businessã€‚

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+8613812345678"], // ä½ è¦ç”¨æ¥å’Œæœºå™¨äººå¯¹è¯çš„ä¸ªäººå·ç 
    },
  },
}
```

### é€‰é¡¹ Bï¼šä¸ªäººå·ç ï¼ˆå¤‡é€‰ï¼‰

åœ¨ä½ **è‡ªå·±çš„ WhatsApp å·ç **ä¸Šè¿è¡Œ OpenClawã€‚ä½¿ç”¨"ç»™è‡ªå·±å‘æ¶ˆæ¯"è¿›è¡Œæµ‹è¯•ã€‚å¯ç”¨è‡ªèŠå¤©æ¨¡å¼ï¼š

```json5
{
  channels: {
    whatsapp: {
      selfChatMode: true,
      dmPolicy: "allowlist",
      allowFrom: ["+8613812345678"], // ä¸ä½ çš„ WhatsApp å·ç ç›¸åŒ
    },
  },
}
```

**å·ç æ¥æºï¼š**
- æœ¬åœ°è¿è¥å•†çš„ eSIMï¼ˆæœ€å¯é ï¼‰
- é¢„ä»˜è´¹ SIM å¡ï¼ˆåªéœ€è¦æ¥æ”¶ä¸€æ¡éªŒè¯çŸ­ä¿¡ï¼‰
- **é¿å…ï¼š** Google Voiceã€TextNowã€"å…è´¹çŸ­ä¿¡"æœåŠ¡â€”â€”WhatsApp ä¼šå°ç¦è¿™äº›

## ç§èŠè®¿é—®æ§åˆ¶

WhatsApp æ”¯æŒä¸‰ç§ç§èŠç­–ç•¥ï¼š

### å…è®¸åˆ—è¡¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œæœ€å®‰å…¨ï¼‰

åªæœ‰ç‰¹å®šå·ç å¯ä»¥ç»™æœºå™¨äººå‘æ¶ˆæ¯ï¼š

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "allowlist",
      allowFrom: ["+8613812345678", "+8613987654321"],
    },
  },
}
```

### é…å¯¹æ¨¡å¼ï¼ˆå®¡æ‰¹æ–°å‘é€è€…ï¼‰

æœªçŸ¥å‘é€è€…ä¼šæ”¶åˆ°é…å¯¹ç ã€‚æ‰‹åŠ¨æ‰¹å‡†ä»–ä»¬ï¼š

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "pairing",
    },
  },
}
```

**æ‰¹å‡†å‘é€è€…ï¼š**

```bash
openclaw pairing list whatsapp
openclaw pairing approve whatsapp <CODE>
```

é…å¯¹ç ï¼š
- 8 ä¸ªå­—ç¬¦ï¼Œå¤§å†™
- 1 å°æ—¶åè¿‡æœŸ
- æ¯ä¸ªé¢‘é“æœ€å¤š 3 ä¸ªå¾…å¤„ç†è¯·æ±‚

### å¼€æ”¾æ¨¡å¼ï¼ˆå…è®¸æ‰€æœ‰äººï¼‰

å…è®¸ä»»ä½•äººç»™æœºå™¨äººå‘æ¶ˆæ¯ï¼ˆ**è°¨æ…ä½¿ç”¨**ï¼‰ï¼š

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "open",
      allowFrom: ["*"],
    },
  },
}
```

## ç¾¤ç»„èŠå¤©é…ç½®

OpenClaw å¯ä»¥æ™ºèƒ½åœ°å‚ä¸ WhatsApp ç¾¤ç»„ã€‚

### å¯ç”¨ç¾¤ç»„è®¿é—®

```json5
{
  channels: {
    whatsapp: {
      groupPolicy: "allowlist", // æˆ– "open" å…è®¸æ‰€æœ‰ç¾¤ç»„
      groups: {
        "*": { requireMention: true }, // å…è®¸æ‰€æœ‰ç¾¤ç»„ï¼Œéœ€è¦ @æåŠ
      },
    },
  },
}
```

### æ¿€æ´»æ¨¡å¼

**æåŠæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼š** æœºå™¨äººåªåœ¨è¢« @æåŠæ—¶å“åº”ï¼š

```json5
{
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          mentionPatterns: ["@openclaw", "openclaw", "\\+8615555550123"],
          historyLimit: 50,
        },
      },
    ],
  },
}
```

**å§‹ç»ˆæ¨¡å¼ï¼š** æœºå™¨äººå“åº”æ¯æ¡æ¶ˆæ¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ï¼š

```
/activation always
```

ç”¨ `/activation mention` åˆ‡æ¢å›æ¥ï¼ˆä»…é™æ‰€æœ‰è€…å‘½ä»¤ï¼‰ã€‚

### ç¾¤ç»„ä¸Šä¸‹æ–‡

åœ¨ç¾¤ç»„ä¸­è¢«è§¦å‘æ—¶ï¼Œæœºå™¨äººä¼šæ”¶åˆ°ï¼š
- æœ€è¿‘æœªå¤„ç†çš„æ¶ˆæ¯ï¼ˆé»˜è®¤ 50 æ¡ï¼‰ä½œä¸ºä¸Šä¸‹æ–‡
- å½“å‰æ¶ˆæ¯å•ç‹¬æ ‡è®°
- å‘é€è€…ä¿¡æ¯ï¼š`[from: åå­— (+E164)]`
- ç¾¤ç»„å…ƒæ•°æ®ï¼šä¸»é¢˜ã€å‚ä¸è€…

## åª’ä½“å¤„ç†

### æ¥æ”¶åª’ä½“

OpenClaw ä¸‹è½½å¹¶å¤„ç†æ”¶åˆ°çš„åª’ä½“ï¼š

```json5
{
  channels: {
    whatsapp: {
      mediaMaxMb: 50, // æœ€å¤§æ¥æ”¶åª’ä½“å¤§å°
    },
  },
}
```

æ”¯æŒçš„åª’ä½“ç±»å‹ï¼š
- å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘
- æ–‡æ¡£ã€è´´çº¸
- è¯­éŸ³æ¶ˆæ¯ï¼ˆå¦‚æœé…ç½®äº†éŸ³é¢‘è½¬å½•åˆ™ä¼šè½¬å½•ï¼‰

### å‘é€åª’ä½“

æœºå™¨äººå¯ä»¥å‘é€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘å’Œæ–‡æ¡£ï¼š

```json5
{
  agents: {
    defaults: {
      mediaMaxMb: 5, // æœ€å¤§å‘é€åª’ä½“å¤§å°
    },
  },
}
```

**GIF æ”¯æŒï¼š** å¯¹äºåŠ¨æ€ GIFï¼ŒWhatsApp éœ€è¦ MP4 æ ¼å¼å¹¶è®¾ç½® `gifPlayback: true`ï¼š

```bash
openclaw message send --channel whatsapp --to "+8613812345678" --media video.mp4 --gif-playback
```

### è¯­éŸ³æ¶ˆæ¯

éŸ³é¢‘è‡ªåŠ¨ä½œä¸ºè¯­éŸ³æ¶ˆæ¯ï¼ˆPTT æ°”æ³¡ï¼‰å‘é€ã€‚æœ€ä½³æ ¼å¼ï¼šOGG/Opusã€‚

## è‡ªåŠ¨ååº”

æ”¶åˆ°æ¶ˆæ¯æ—¶å‘é€è¡¨æƒ…ååº”ï¼š

```json5
{
  channels: {
    whatsapp: {
      ackReaction: {
        emoji: "ğŸ‘€",
        direct: true,     // åœ¨ç§èŠä¸­ååº”
        group: "mentions", // ä»…åœ¨ç¾¤ç»„ä¸­è¢«æåŠæ—¶ååº”
      },
    },
  },
}
```

ç¾¤ç»„é€‰é¡¹ï¼š
- `"always"`ï¼šå¯¹æ‰€æœ‰ç¾¤ç»„æ¶ˆæ¯ååº”
- `"mentions"`ï¼šä»…åœ¨è¢« @æåŠæ—¶ååº”
- `"never"`ï¼šä»ä¸åœ¨ç¾¤ç»„ä¸­ååº”

## å·²è¯»å›æ‰§

é»˜è®¤æƒ…å†µä¸‹ï¼ŒOpenClaw å‘é€å·²è¯»å›æ‰§ï¼ˆè“è‰²å¯¹å‹¾ï¼‰ã€‚å¦‚éœ€ç¦ç”¨ï¼š

```json5
{
  channels: {
    whatsapp: {
      sendReadReceipts: false,
    },
  },
}
```

## å¤šè´¦æˆ·è®¾ç½®

åœ¨ä¸€ä¸ª Gateway ä¸­è¿è¡Œå¤šä¸ª WhatsApp è´¦æˆ·ï¼š

```json5
{
  channels: {
    whatsapp: {
      accounts: {
        personal: {
          allowFrom: ["+8613811111111"],
        },
        work: {
          allowFrom: ["+8613822222222"],
          ackReaction: { emoji: "âœ…" },
        },
      },
    },
  },
}
```

**ç™»å½•ç‰¹å®šè´¦æˆ·ï¼š**

```bash
openclaw channels login --account personal
openclaw channels login --account work
```

## å®Œæ•´é…ç½®ç¤ºä¾‹

è¿™æ˜¯åŒ…å«æ‰€æœ‰ä¸»è¦åŠŸèƒ½çš„å®Œæ•´è®¾ç½®ï¼š

```json5
{
  identity: {
    name: "Clawd",
    emoji: "ğŸ¦",
  },

  channels: {
    whatsapp: {
      // ç§èŠè®¿é—®æ§åˆ¶
      dmPolicy: "allowlist",
      allowFrom: ["+8613812345678"],
      
      // ç¾¤ç»„è®¾ç½®
      groupPolicy: "allowlist",
      groups: {
        "*": { requireMention: true },
      },
      
      // åª’ä½“é™åˆ¶
      mediaMaxMb: 50,
      
      // è‡ªåŠ¨ååº”
      ackReaction: {
        emoji: "ğŸ‘€",
        direct: true,
        group: "mentions",
      },
      
      // æ¶ˆæ¯åˆ†å—ï¼ˆç”¨äºé•¿å›å¤ï¼‰
      textChunkLimit: 4000,
      chunkMode: "newline", // æŒ‰æ®µè½åˆ†å‰²
    },
  },
  
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          mentionPatterns: ["@clawd", "clawd"],
          historyLimit: 50,
        },
      },
    ],
  },
}
```

## CLI å‘½ä»¤

### æ£€æŸ¥çŠ¶æ€

```bash
openclaw channels status --probe
```

### å‘é€æ¶ˆæ¯

```bash
openclaw message send --channel whatsapp --to "+8613812345678" --message "ä½ å¥½ï¼"
openclaw message send --channel whatsapp --to "+8613812345678" --media image.jpg
```

### æŸ¥çœ‹æ—¥å¿—

```bash
openclaw channels logs --channel whatsapp
```

### ç™»å‡º

```bash
openclaw channels logout --channel whatsapp
```

## æ•…éšœæ’é™¤

### "æœªé“¾æ¥"æˆ–éœ€è¦ QR ç™»å½•

**ç—‡çŠ¶ï¼š** `channels status` æ˜¾ç¤º `linked: false`

**è§£å†³ï¼š** è¿è¡Œ `openclaw channels login` å¹¶é‡æ–°æ‰«æ QR ç ã€‚å¦‚æœæ‰‹æœºç¦»çº¿æ—¶é—´å¤ªé•¿ï¼Œä¼šè¯å¯èƒ½ä¼šè¿‡æœŸã€‚

### å·²é“¾æ¥ä½†æ–­å¼€è¿æ¥ / é‡è¿å¾ªç¯

**ç—‡çŠ¶ï¼š** çŠ¶æ€æ˜¾ç¤º `running, disconnected`

**è§£å†³ï¼š**
1. è¿è¡Œ `openclaw doctor`
2. é‡å¯ gateway
3. å¦‚æœæŒç»­å­˜åœ¨ï¼Œé€šè¿‡ `openclaw channels login` é‡æ–°é“¾æ¥

### æ¶ˆæ¯æœªæ”¶åˆ°

**æ£€æŸ¥ï¼š**
1. `dmPolicy` è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼Ÿ
2. å‘é€è€…æ˜¯å¦åœ¨ `allowFrom` ä¸­ï¼Ÿ
3. å¯¹äºç¾¤ç»„ï¼š`groupPolicy` æ˜¯å¦è®¾ç½®ï¼Ÿ`requireMention` æ˜¯å¦é˜»æ­¢äº†æ¶ˆæ¯ï¼Ÿ

### Bun è¿è¡Œæ—¶é—®é¢˜

**ç—‡çŠ¶ï¼š** éšæœºæ–­å¼€è¿æ¥ã€å‘é€å¤±è´¥

**è§£å†³ï¼š** WhatsApp (Baileys) åœ¨ Bun ä¸Šä¸ç¨³å®šã€‚åˆ‡æ¢åˆ° Node.jsï¼š

```bash
# åœ¨ shell é…ç½®æ–‡ä»¶ä¸­
export OPENCLAW_RUNTIME=node
```

### åª’ä½“å‘é€å¤±è´¥

**æ£€æŸ¥ï¼š**
1. æ–‡ä»¶å¤§å°æ˜¯å¦åœ¨ `mediaMaxMb` é™åˆ¶å†…
2. æ˜¯å¦ä¸ºæ”¯æŒçš„æ ¼å¼ï¼ˆJPEGã€PNGã€MP4ã€OGGï¼‰
3. Gateway æ˜¯å¦å¯ä»¥è®¿é—®äº’è”ç½‘

## å®‰å…¨æ³¨æ„äº‹é¡¹

- **å‡­è¯ï¼š** å­˜å‚¨åœ¨ `~/.openclaw/credentials/whatsapp/`ã€‚å¤‡ä»½è¿™äº›æ–‡ä»¶å¹¶ç¡®ä¿å®‰å…¨ã€‚
- **é…å¯¹å­˜å‚¨ï¼š** `~/.openclaw/credentials/whatsapp-pairing.json` å’Œ `whatsapp-allowFrom.json` æ§åˆ¶è®¿é—®æƒé™ã€‚
- **ä¸è¦åˆ†äº«ï¼š** æ°¸è¿œä¸è¦åˆ†äº«ä½ çš„ `creds.json`â€”â€”å®ƒæä¾›å¯¹ä½  WhatsApp è´¦æˆ·çš„å®Œå…¨è®¿é—®æƒé™ã€‚

## ä¸ºä»€ä¹ˆä¸ç”¨ Twilio WhatsAppï¼Ÿ

OpenClaw ç§»é™¤äº† Twilio WhatsApp Business æ”¯æŒï¼Œå› ä¸ºï¼š
- 24 å°æ—¶å›å¤çª—å£é™åˆ¶
- å•†ä¸šè´¦æˆ·ä¸é€‚åˆä¸ªäººåŠ©æ‰‹ä½¿ç”¨
- é«˜é¢‘ä½¿ç”¨ä¼šè§¦å‘å°ç¦
- å¯¹äºå¥è°ˆçš„åŠ©æ‰‹æ¥è¯´æŠ•é€’ä¸å¯é 

é€šè¿‡ Baileys ä½¿ç”¨ WhatsApp Web å¯ä»¥é¿å…æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚

## ä¸‹ä¸€æ­¥

- è®¾ç½®[ç¾¤ç»„èŠå¤©æ¿€æ´»](/blog/multi-agent-setup)ä¸å¤šä¸ª agent
- é…ç½®è¯­éŸ³æ¶ˆæ¯çš„[éŸ³é¢‘è½¬å½•](/blog/voice-call-setup)
- æ·»åŠ  [cron ä»»åŠ¡](/blog/cron-job-best-practices)ç”¨äºå®šæ—¶æ¶ˆæ¯

## æ€»ç»“

ä½ å·²ç»é…ç½®äº† WhatsApp é›†æˆï¼š

- âœ… **QR ç ç™»å½•** é€šè¿‡ WhatsApp Web
- âœ… **ç§èŠç­–ç•¥** ç”¨äºè®¿é—®æ§åˆ¶
- âœ… **ç¾¤ç»„èŠå¤©æ”¯æŒ** å¸¦æåŠæ¿€æ´»
- âœ… **åª’ä½“å¤„ç†** æ”¯æŒå›¾ç‰‡ã€è§†é¢‘å’Œè¯­éŸ³æ¶ˆæ¯
- âœ… **è‡ªåŠ¨ååº”** æä¾›å³æ—¶åé¦ˆ
- âœ… **å¤šè´¦æˆ·** æ”¯æŒ

ä½ çš„ AI åŠ©æ‰‹ç°åœ¨å¯ä»¥åœ¨ WhatsApp ä¸Šä½¿ç”¨äº†ï¼ğŸ’¬
