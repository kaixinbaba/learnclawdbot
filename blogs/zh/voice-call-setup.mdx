---
title: OpenClaw è¯­éŸ³é€šè¯é…ç½® - Twilioã€STT ä¸ TTS å®Œæ•´æŒ‡å—
description: å®Œæ•´æŒ‡å—ï¼šåœ¨ OpenClaw ä¸­é…ç½® Twilio è¯­éŸ³é€šè¯ã€Deepgram/Whisper è¯­éŸ³è½¬æ–‡å­— (STT) å’Œ OpenAI/ElevenLabs æ–‡å­—è½¬è¯­éŸ³ (TTS)ã€‚
slug: /voice-call-setup
tags: è¯­éŸ³é€šè¯, twilio, tts, stt, deepgram, elevenlabs, openai, ç”µè¯
publishedAt: 2025-02-15
status: published
visibility: public
featuredImageUrl: /images/features/voice-call-setup.webp
---

# OpenClaw è¯­éŸ³é€šè¯é…ç½®ï¼šTwilioã€STT ä¸ TTS å®Œæ•´æŒ‡å—

æƒ³è®©ä½ çš„ AI åŠ©æ‰‹èƒ½å¤Ÿæ‹¨æ‰“å’Œæ¥å¬ç”µè¯å—ï¼ŸOpenClaw çš„ Voice Call æ’ä»¶å¯ä»¥é€šè¿‡ Twilio å®ç°çœŸå®çš„è¯­éŸ³å¯¹è¯ï¼Œå¹¶é›†æˆä¸“ä¸šçº§çš„è¯­éŸ³è½¬æ–‡å­— (STT) å’Œæ–‡å­—è½¬è¯­éŸ³ (TTS) åŠŸèƒ½ã€‚

æœ¬æŒ‡å—å°†å¸¦ä½ å®Œæˆæ•´ä¸ªé…ç½®æµç¨‹ï¼šä»å®‰è£…æ’ä»¶åˆ°é…ç½® Twilio å›è°ƒã€STT æœåŠ¡å•†ï¼ˆDeepgramã€OpenAI Whisperã€Groqï¼‰ä»¥åŠ TTS è¯­éŸ³ï¼ˆOpenAIã€ElevenLabsï¼‰ã€‚

## å‰ç½®æ¡ä»¶

å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å…·å¤‡ï¼š

- OpenClaw Gateway æ­£åœ¨è¿è¡Œï¼ˆv1.0+ï¼‰
- æ‹¥æœ‰ç”µè¯å·ç çš„ Twilio è´¦æˆ·
- ä½ é€‰æ‹©çš„ STT/TTS æœåŠ¡å•†çš„ API å¯†é’¥
- ä¸€ä¸ªå¯å…¬å¼€è®¿é—®çš„ Webhook URLï¼ˆé€šè¿‡ ngrokã€Tailscale æˆ– VPSï¼‰

## ç¬¬ä¸€æ­¥ï¼šå®‰è£… Voice Call æ’ä»¶

Voice Call æ’ä»¶è¿è¡Œåœ¨ Gateway è¿›ç¨‹å†…éƒ¨ã€‚ä½¿ç”¨ OpenClaw CLI å®‰è£…ï¼š

```bash
openclaw plugins install @openclaw/voice-call
```

å®‰è£…åï¼Œé‡å¯ä½ çš„ Gatewayï¼š

```bash
openclaw gateway restart
```

éªŒè¯æ’ä»¶æ˜¯å¦å·²åŠ è½½ï¼š

```bash
openclaw status
```

ä½ åº”è¯¥èƒ½åœ¨æ´»è·ƒæ’ä»¶åˆ—è¡¨ä¸­çœ‹åˆ° `voice-call`ã€‚

## ç¬¬äºŒæ­¥ï¼šé…ç½® Twilio

é¦–å…ˆï¼Œä» [Twilio æ§åˆ¶å°](https://console.twilio.com) è·å–ä½ çš„å‡­è¯ï¼š

- **Account SID**ï¼šåœ¨ä»ªè¡¨æ¿ä¸­å¯ä»¥æ‰¾åˆ°
- **Auth Token**ï¼šåœ¨ä»ªè¡¨æ¿ä¸­å¯ä»¥æ‰¾åˆ°
- **ç”µè¯å·ç **ï¼šå…·æœ‰è¯­éŸ³åŠŸèƒ½çš„ Twilio å·ç 

å°† Twilio é…ç½®æ·»åŠ åˆ°ä½ çš„ `openclaw.json`ï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        enabled: true,
        config: {
          provider: "twilio",
          fromNumber: "+15550001234", // ä½ çš„ Twilio å·ç 
          toNumber: "+15550005678",   // é»˜è®¤æ¥æ”¶æ–¹ï¼ˆå¯é€‰ï¼‰
          
          twilio: {
            accountSid: "ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
            authToken: "your_auth_token_here",
          },
        },
      },
    },
  },
}
```

## ç¬¬ä¸‰æ­¥ï¼šè®¾ç½® Webhooks

Twilio éœ€è¦èƒ½å¤Ÿè®¿é—®ä½ çš„ OpenClaw å®ä¾‹æ¥ä¼ é€’é€šè¯äº‹ä»¶ã€‚ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©ï¼š

### é€‰é¡¹ Aï¼šngrokï¼ˆå¼€å‘ç¯å¢ƒï¼‰

æœ¬åœ°å¼€å‘æ—¶ï¼Œä½¿ç”¨ ngrokï¼š

```bash
ngrok http 3334
```

ç„¶ååœ¨é…ç½®ä¸­è®¾ç½®å…¬å¼€ URLï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        config: {
          publicUrl: "https://abc123.ngrok.app/voice/webhook",
          
          serve: {
            port: 3334,
            path: "/voice/webhook",
          },
        },
      },
    },
  },
}
```

### é€‰é¡¹ Bï¼šTailscale Funnelï¼ˆæ¨èï¼‰

Tailscale Funnel æä¾›ç¨³å®šã€å®‰å…¨çš„ç«¯ç‚¹ï¼š

```bash
openclaw voicecall expose --mode funnel
```

åœ¨ `openclaw.json` ä¸­é…ç½®ï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        config: {
          tailscale: {
            mode: "funnel",
            path: "/voice/webhook",
          },
          
          serve: {
            port: 3334,
            path: "/voice/webhook",
          },
        },
      },
    },
  },
}
```

### é€‰é¡¹ Cï¼šVPS + åå‘ä»£ç†

ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ VPS é…åˆ nginxï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        config: {
          publicUrl: "https://voice.example.com/voice/webhook",
          
          webhookSecurity: {
            allowedHosts: ["voice.example.com"],
            trustedProxyIPs: ["100.64.0.1"],
          },
          
          serve: {
            port: 3334,
            path: "/voice/webhook",
          },
        },
      },
    },
  },
}
```

## ç¬¬å››æ­¥ï¼šé…ç½®è¯­éŸ³è½¬æ–‡å­—ï¼ˆSTTï¼‰

STT å°†æ¥ç”µè¯­éŸ³è½¬æ¢ä¸ºæ–‡å­—ã€‚OpenClaw æ”¯æŒå¤šä¸ªæœåŠ¡å•†ï¼Œå¹¶è‡ªåŠ¨é™çº§åˆ‡æ¢ã€‚

### é€‰é¡¹ Aï¼šDeepgramï¼ˆæ¨èï¼‰

Deepgram æä¾›å‡ºè‰²çš„å‡†ç¡®æ€§å’Œé€Ÿåº¦ï¼š

```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        models: [{ provider: "deepgram", model: "nova-3" }],
        providerOptions: {
          deepgram: {
            detect_language: true,
            punctuate: true,
            smart_format: true,
          },
        },
      },
    },
  },
}
```

è®¾ç½®ä½ çš„ API å¯†é’¥ï¼š

```bash
export DEEPGRAM_API_KEY="dg_xxxxxxxxxxxxxxxx"
```

### é€‰é¡¹ Bï¼šOpenAI Whisper

ä½¿ç”¨ OpenAI é›†æˆï¼š

```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        models: [{ provider: "openai", model: "gpt-4o-mini-transcribe" }],
      },
    },
  },
}
```

æˆ–ä½¿ç”¨æ›´é«˜å‡†ç¡®åº¦çš„æ¨¡å‹ï¼š

```json5
{
  tools: {
    media: {
      audio: {
        models: [{ provider: "openai", model: "gpt-4o-transcribe" }],
      },
    },
  },
}
```

### é€‰é¡¹ Cï¼šGroqï¼ˆå¿«é€Ÿä¸”å®æƒ ï¼‰

Groq æä¾›å¿«é€Ÿçš„ Whisper æ¨ç†ï¼š

```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        models: [{ provider: "groq", model: "whisper-large-v3-turbo" }],
      },
    },
  },
}
```

### é€‰é¡¹ Dï¼šæœ¬åœ° Whisper CLIï¼ˆç¦»çº¿ï¼‰

æ³¨é‡éšç§çš„é…ç½®ï¼Œä½¿ç”¨æœ¬åœ° Whisperï¼š

```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        models: [
          {
            type: "cli",
            command: "whisper",
            args: ["--model", "base", "{{MediaPath}}"],
            timeoutSeconds: 45,
          },
        ],
      },
    },
  },
}
```

### å¤šæœåŠ¡å•†é™çº§

é…ç½®å¤šä¸ªæœåŠ¡å•†ä»¥æé«˜å¯é æ€§ï¼š

```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        maxBytes: 20971520,
        models: [
          { provider: "openai", model: "gpt-4o-mini-transcribe" },
          { provider: "deepgram", model: "nova-3" },
          {
            type: "cli",
            command: "whisper",
            args: ["--model", "base", "{{MediaPath}}"],
            timeoutSeconds: 45,
          },
        ],
      },
    },
  },
}
```

## ç¬¬äº”æ­¥ï¼šé…ç½®æ–‡å­—è½¬è¯­éŸ³ï¼ˆTTSï¼‰

TTS åœ¨é€šè¯ä¸­å°† AI çš„å›å¤è½¬æ¢ä¸ºè¯­éŸ³ã€‚Voice Call ä½¿ç”¨æ ¸å¿ƒçš„ `messages.tts` é…ç½®ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–ã€‚

### é€‰é¡¹ Aï¼šOpenAI TTS

æ¸…æ™°ã€è‡ªç„¶çš„å£°éŸ³ï¼š

```json5
{
  messages: {
    tts: {
      auto: "always",
      provider: "openai",
      openai: {
        model: "gpt-4o-mini-tts",
        voice: "alloy", // é€‰é¡¹ï¼šalloy, echo, fable, onyx, nova, shimmer
      },
    },
  },
}
```

### é€‰é¡¹ Bï¼šElevenLabsï¼ˆé«˜çº§è¯­éŸ³ï¼‰

è¶…é€¼çœŸçš„å£°éŸ³ï¼š

```json5
{
  messages: {
    tts: {
      auto: "always",
      provider: "elevenlabs",
      elevenlabs: {
        apiKey: "your_elevenlabs_key",
        voiceId: "pMsXgVXv3BLzUgSXRplE",
        modelId: "eleven_multilingual_v2",
        voiceSettings: {
          stability: 0.5,
          similarityBoost: 0.75,
          speed: 1.0,
        },
      },
    },
  },
}
```

### ä»…ä¸ºè¯­éŸ³é€šè¯è¦†ç›– TTS

ä¿æŒé€šè¯å’ŒèŠå¤©ä½¿ç”¨ä¸åŒçš„å£°éŸ³ï¼š

```json5
{
  messages: {
    tts: {
      auto: "always",
      provider: "openai",
      openai: { voice: "nova" },
    },
  },
  
  plugins: {
    entries: {
      "voice-call": {
        config: {
          tts: {
            provider: "elevenlabs",
            elevenlabs: {
              voiceId: "pMsXgVXv3BLzUgSXRplE",
              modelId: "eleven_v3",
            },
          },
        },
      },
    },
  },
}
```

**é‡è¦æç¤º**ï¼šè¯­éŸ³é€šè¯**ä¸æ”¯æŒ** Edge TTSï¼ˆç”µè¯éŸ³é¢‘éœ€è¦ PCM æ ¼å¼ï¼‰ã€‚

## ç¬¬å…­æ­¥ï¼šå¯ç”¨æ¥ç”µ

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¥ç”µåŠŸèƒ½æ˜¯ç¦ç”¨çš„ã€‚è¦å…è®¸æ¥å¬æ¥ç”µï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        config: {
          inboundPolicy: "allowlist",
          allowFrom: ["+15550001234", "+15550005678"],
          inboundGreeting: "ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„ AI åŠ©æ‰‹ã€‚æœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ",
        },
      },
    },
  },
}
```

## ç¬¬ä¸ƒæ­¥ï¼šå¯ç”¨åª’ä½“æµ

è¦å®ç°å®æ—¶è¯­éŸ³äº¤äº’ï¼Œå¯ç”¨ Twilio Media Streamsï¼š

```json5
{
  plugins: {
    entries: {
      "voice-call": {
        config: {
          streaming: {
            enabled: true,
            streamPath: "/voice/stream",
          },
        },
      },
    },
  },
}
```

## å®Œæ•´é…ç½®ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªæ•´åˆæ‰€æœ‰å†…å®¹çš„å®Œæ•´é…ç½®ï¼š

```json5
{
  // STT é…ç½®
  tools: {
    media: {
      audio: {
        enabled: true,
        maxBytes: 20971520,
        models: [
          { provider: "deepgram", model: "nova-3" },
          { provider: "openai", model: "gpt-4o-mini-transcribe" },
        ],
        providerOptions: {
          deepgram: {
            detect_language: true,
            punctuate: true,
          },
        },
      },
    },
  },
  
  // TTS é…ç½®
  messages: {
    tts: {
      auto: "always",
      provider: "openai",
      openai: {
        model: "gpt-4o-mini-tts",
        voice: "alloy",
      },
    },
  },
  
  // Voice Call æ’ä»¶
  plugins: {
    entries: {
      "voice-call": {
        enabled: true,
        config: {
          provider: "twilio",
          fromNumber: "+15550001234",
          
          twilio: {
            accountSid: "ACxxxxxxxx",
            authToken: "your_auth_token",
          },
          
          serve: {
            port: 3334,
            path: "/voice/webhook",
          },
          
          publicUrl: "https://voice.example.com/voice/webhook",
          
          webhookSecurity: {
            allowedHosts: ["voice.example.com"],
          },
          
          outbound: {
            defaultMode: "conversation",
          },
          
          inboundPolicy: "allowlist",
          allowFrom: ["+15550001234"],
          inboundGreeting: "ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ",
          
          streaming: {
            enabled: true,
            streamPath: "/voice/stream",
          },
          
          // å¯é€‰ï¼šä¸ºé€šè¯è¦†ç›– TTS
          tts: {
            provider: "elevenlabs",
            elevenlabs: {
              voiceId: "pMsXgVXv3BLzUgSXRplE",
              modelId: "eleven_multilingual_v2",
            },
          },
        },
      },
    },
  },
}
```

## æ‹¨æ‰“ä½ çš„ç¬¬ä¸€ä¸ªç”µè¯

ä½¿ç”¨ CLI æµ‹è¯•ä½ çš„é…ç½®ï¼š

```bash
# æ‹¨æ‰“å¤–å‘¼ç”µè¯
openclaw voicecall call --to "+15555550123" --message "ä½ å¥½ï¼è¿™æ˜¯æ¥è‡ª OpenClaw çš„æµ‹è¯•ã€‚"

# æ£€æŸ¥é€šè¯çŠ¶æ€
openclaw voicecall status --call-id <call-id>

# ç›‘æ§å®æ—¶é€šè¯
openclaw voicecall tail
```

æˆ–åœ¨å¯¹è¯ä¸­ä½¿ç”¨ agent å·¥å…·ï¼š

```
ä½ ï¼šç»™å¼ ä¸‰æ‰“ç”µè¯ï¼Œæé†’ä»–æ˜å¤©çš„ä¼šè®®ã€‚
Agentï¼š[ä½¿ç”¨ voice_call å·¥å…·å‘èµ·é€šè¯]
```

## æ•…éšœæ’é™¤

### Webhook æ²¡æœ‰æ”¶åˆ°äº‹ä»¶

1. éªŒè¯ä½ çš„ `publicUrl` å¯ä»¥ä»äº’è”ç½‘è®¿é—®
2. æ£€æŸ¥ Twilio ç­¾åéªŒè¯æ˜¯å¦é€šè¿‡
3. å¦‚æœä½¿ç”¨ ngrokï¼Œç¡®ä¿ URL å®Œå…¨åŒ¹é…ï¼ˆæ³¨æ„æœ«å°¾æ–œæ ï¼‰

### éŸ³é¢‘è´¨é‡å·®

1. ç¡®ä¿ä½ ä½¿ç”¨çš„æ˜¯ OpenAI æˆ– ElevenLabsï¼ˆä¸æ˜¯ Edge TTSï¼‰
2. æ£€æŸ¥åˆ° TTS æœåŠ¡å•†çš„ç½‘ç»œå»¶è¿Ÿ
3. å¯ç”¨åª’ä½“æµä»¥å®ç°å®æ—¶äº¤äº’

### STT ä¸å·¥ä½œ

1. éªŒè¯ä½ çš„æœåŠ¡å•† API å¯†é’¥è®¾ç½®æ­£ç¡®
2. æ£€æŸ¥ `tools.media.audio.enabled: true`
3. å°è¯•é™çº§é“¾ï¼šDeepgram â†’ OpenAI â†’ Groq â†’ æœ¬åœ° Whisper

### é€šè¯ç«‹å³æ–­å¼€

1. æ£€æŸ¥ Twilio æ§åˆ¶å°çš„é”™è¯¯æ—¥å¿—
2. éªŒè¯ä½ çš„ webhook è¿”å›æœ‰æ•ˆçš„ TwiML
3. ç¡®ä¿ä½ çš„ Twilio å·ç å…·æœ‰è¯­éŸ³åŠŸèƒ½

## ä¸‹ä¸€æ­¥

- é…ç½®[å¤šè½®å¯¹è¯](/blog/multi-agent-setup)ä»¥ä¿æŒä¸Šä¸‹æ–‡
- ä½¿ç”¨ cron ä»»åŠ¡è®¾ç½®[å®šæ—¶é€šè¯](/blog/cron-job-best-practices)
- æ¢ç´¢å…¶ä»–æœåŠ¡å•†ï¼šTelnyxã€Plivo

## æ€»ç»“

ä½ ç°åœ¨å·²ç»ä¸º OpenClaw é…ç½®äº†è¯­éŸ³é€šè¯åŠŸèƒ½ï¼š

- âœ… **Twilio** ä½œä¸ºç”µè¯åŸºç¡€è®¾æ–½
- âœ… **STT** é€šè¿‡ Deepgramã€OpenAI Whisper æˆ– Groq
- âœ… **TTS** é€šè¿‡ OpenAI æˆ– ElevenLabs
- âœ… **Webhooks** ç”¨äºå®æ—¶é€šè¯å¤„ç†
- âœ… **æ¥ç”µç­–ç•¥** ç”¨äºæ¥å¬ç”µè¯

ä½ çš„ AI åŠ©æ‰‹ç°åœ¨å¯ä»¥æ‰“ç”µè¯äº†ï¼ğŸ‰
