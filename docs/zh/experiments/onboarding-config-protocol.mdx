---
title: "引导和配置协议"
summary: "CLI、macOS 应用和 Web UI 共享的引导和配置界面"
---

# 引导和配置协议

目的：在 CLI、macOS 应用和 Web UI 之间共享引导和配置界面。

## 组件

- Wizard 引擎（共享 session + 提示 + 引导状态）
- CLI 引导使用与 UI 客户端相同的 wizard 流程
- Gateway RPC 公开 wizard + 配置 schema 端点
- macOS 引导使用 wizard 步骤模型
- Web UI 从 JSON Schema + UI 提示渲染配置表单

## Gateway RPC

- `wizard.start` 参数：`\{ mode?: "local"|"remote", workspace?: string \}`
- `wizard.next` 参数：`\{ sessionId, answer?: \{ stepId, value? \} \}`
- `wizard.cancel` 参数：`\{ sessionId \}`
- `wizard.status` 参数：`\{ sessionId \}`
- `config.schema` 参数：`\{\}`

响应（结构）：

- Wizard：`\{ sessionId, done, step?, status?, error? \}`
- Config schema：`\{ schema, uiHints, version, generatedAt \}`

## UI 提示

- `uiHints` 按路径键入；可选元数据（label/help/group/order/advanced/sensitive/placeholder）
- 敏感字段渲染为密码输入；无隐藏层
- 不支持的 schema 节点回退到原始 JSON 编辑器

## 注意事项

- 此文档是跟踪引导/配置协议重构的唯一地方
