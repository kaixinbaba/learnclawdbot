---
summary: "~/.openclaw/openclaw.json çš„æ‰€æœ‰é…ç½®é€‰é¡¹åŠç¤ºä¾‹"
read_when:
  - æ·»åŠ æˆ–ä¿®æ”¹é…ç½®å­—æ®µæ—¶
---
# é…ç½® ğŸ”§

OpenClaw ä» `~/.openclaw/openclaw.json` è¯»å–å¯é€‰çš„ **JSON5** é…ç½®æ–‡ä»¶(å…è®¸æ³¨é‡Šå’Œå°¾éšé€—å·)ã€‚

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨,OpenClaw ä½¿ç”¨ç›¸å¯¹å®‰å…¨çš„é»˜è®¤å€¼(åµŒå…¥å¼ Pi agent + æ¯ä¸ªå‘é€è€…çš„ session + workspace `~/.openclaw/workspace`)ã€‚é€šå¸¸ä½ åªéœ€è¦é…ç½®æ–‡ä»¶æ¥:
- é™åˆ¶è°å¯ä»¥è§¦å‘æœºå™¨äºº(`channels.whatsapp.allowFrom`ã€`channels.telegram.allowFrom` ç­‰)
- æ§åˆ¶ç¾¤ç»„ç™½åå•å’ŒæåŠè¡Œä¸º(`channels.whatsapp.groups`ã€`channels.telegram.groups`ã€`channels.discord.guilds`ã€`agents.list[].groupChat`)
- è‡ªå®šä¹‰æ¶ˆæ¯å‰ç¼€(`messages`)
- è®¾ç½® agent çš„ workspace(`agents.defaults.workspace` æˆ– `agents.list[].workspace`)
- è°ƒæ•´åµŒå…¥å¼ agent é»˜è®¤å€¼(`agents.defaults`)å’Œ session è¡Œä¸º(`session`)
- è®¾ç½®æ¯ä¸ª agent çš„èº«ä»½(`agents.list[].identity`)

> **é…ç½®æ–°æ‰‹?** æŸ¥çœ‹[é…ç½®ç¤ºä¾‹](/gateway/configuration-examples)æŒ‡å—è·å–å¸¦è¯¦ç»†è§£é‡Šçš„å®Œæ•´ç¤ºä¾‹!

## ä¸¥æ ¼é…ç½®éªŒè¯

OpenClaw ä»…æ¥å—å®Œå…¨åŒ¹é… schema çš„é…ç½®ã€‚
æœªçŸ¥é”®ã€æ ¼å¼é”™è¯¯çš„ç±»å‹æˆ–æ— æ•ˆå€¼ä¼šå¯¼è‡´ Gateway **æ‹’ç»å¯åŠ¨**ä»¥ç¡®ä¿å®‰å…¨ã€‚

å½“éªŒè¯å¤±è´¥æ—¶:
- Gateway ä¸ä¼šå¯åŠ¨ã€‚
- ä»…å…è®¸è¯Šæ–­å‘½ä»¤(ä¾‹å¦‚:`openclaw doctor`ã€`openclaw logs`ã€`openclaw health`ã€`openclaw status`ã€`openclaw service`ã€`openclaw help`)ã€‚
- è¿è¡Œ `openclaw doctor` æŸ¥çœ‹å…·ä½“é—®é¢˜ã€‚
- è¿è¡Œ `openclaw doctor --fix`(æˆ– `--yes`)åº”ç”¨è¿ç§»/ä¿®å¤ã€‚

Doctor æ°¸è¿œä¸ä¼šå†™å…¥æ›´æ”¹,é™¤éä½ æ˜ç¡®é€‰æ‹© `--fix`/`--yes`ã€‚

## Schema + UI æç¤º

Gateway é€šè¿‡ `config.schema` ä¸º UI ç¼–è¾‘å™¨å…¬å¼€é…ç½®çš„ JSON Schema è¡¨ç¤ºã€‚
Control UI ä»æ­¤ schema æ¸²æŸ“è¡¨å•,å¹¶æä¾›**åŸå§‹ JSON** ç¼–è¾‘å™¨ä½œä¸ºåº”æ€¥å‡ºå£ã€‚

Channel æ’ä»¶å’Œæ‰©å±•å¯ä»¥ä¸ºå…¶é…ç½®æ³¨å†Œ schema + UI æç¤º,å› æ­¤ channel è®¾ç½®åœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¿æŒ schema é©±åŠ¨,æ— éœ€ç¡¬ç¼–ç è¡¨å•ã€‚

æç¤º(æ ‡ç­¾ã€åˆ†ç»„ã€æ•æ„Ÿå­—æ®µ)ä¸ schema ä¸€èµ·æä¾›,å› æ­¤å®¢æˆ·ç«¯å¯ä»¥æ¸²æŸ“æ›´å¥½çš„è¡¨å•,è€Œæ— éœ€ç¡¬ç¼–ç é…ç½®çŸ¥è¯†ã€‚

## åº”ç”¨ + é‡å¯ (RPC)

ä½¿ç”¨ `config.apply` éªŒè¯ + å†™å…¥å®Œæ•´é…ç½®å¹¶ä¸€æ­¥é‡å¯ Gatewayã€‚
å®ƒå†™å…¥é‡å¯å“¨å…µå¹¶åœ¨ Gateway æ¢å¤å ping æœ€åæ´»åŠ¨çš„ sessionã€‚

è­¦å‘Š:`config.apply` æ›¿æ¢**æ•´ä¸ªé…ç½®**ã€‚å¦‚æœåªæƒ³æ›´æ”¹å‡ ä¸ªé”®,ä½¿ç”¨ `config.patch` æˆ– `openclaw config set`ã€‚ä¿ç•™ `~/.openclaw/openclaw.json` çš„å¤‡ä»½ã€‚

å‚æ•°:
- `raw`(å­—ç¬¦ä¸²)â€” æ•´ä¸ªé…ç½®çš„ JSON5 è´Ÿè½½
- `baseHash`(å¯é€‰)â€” æ¥è‡ª `config.get` çš„é…ç½®å“ˆå¸Œ(å½“é…ç½®å·²å­˜åœ¨æ—¶å¿…éœ€)
- `sessionKey`(å¯é€‰)â€” ç”¨äºå”¤é†’ ping çš„æœ€åæ´»åŠ¨ session é”®
- `note`(å¯é€‰)â€” åŒ…å«åœ¨é‡å¯å“¨å…µä¸­çš„æ³¨é‡Š
- `restartDelayMs`(å¯é€‰)â€” é‡å¯å‰çš„å»¶è¿Ÿ(é»˜è®¤ 2000)

ç¤ºä¾‹(é€šè¿‡ `gateway call`):

```bash
openclaw gateway call config.get --params '{}' # æ•è· payload.hash
openclaw gateway call config.apply --params '{
  "raw": "{\\n  agents: { defaults: { workspace: \\"~/.openclaw/workspace\\" } }\\n}\\n",
  "baseHash": "<hash-from-config.get>",
  "sessionKey": "agent:main:whatsapp:dm:+15555550123",
  "restartDelayMs": 1000
}'
```

## éƒ¨åˆ†æ›´æ–° (RPC)

ä½¿ç”¨ `config.patch` å°†éƒ¨åˆ†æ›´æ–°åˆå¹¶åˆ°ç°æœ‰é…ç½®ä¸­,è€Œä¸ä¼šç ´åæ— å…³çš„é”®ã€‚å®ƒåº”ç”¨ JSON merge patch è¯­ä¹‰:
- å¯¹è±¡é€’å½’åˆå¹¶
- `null` åˆ é™¤é”®
- æ•°ç»„æ›¿æ¢

ä¸ `config.apply` ä¸€æ ·,å®ƒéªŒè¯ã€å†™å…¥é…ç½®ã€å­˜å‚¨é‡å¯å“¨å…µå¹¶å®‰æ’ Gateway é‡å¯(å½“æä¾› `sessionKey` æ—¶å¯é€‰å”¤é†’)ã€‚

å‚æ•°:
- `raw`(å­—ç¬¦ä¸²)â€” ä»…åŒ…å«è¦æ›´æ”¹çš„é”®çš„ JSON5 è´Ÿè½½
- `baseHash`(å¿…éœ€)â€” æ¥è‡ª `config.get` çš„é…ç½®å“ˆå¸Œ
- `sessionKey`(å¯é€‰)â€” ç”¨äºå”¤é†’ ping çš„æœ€åæ´»åŠ¨ session é”®
- `note`(å¯é€‰)â€” åŒ…å«åœ¨é‡å¯å“¨å…µä¸­çš„æ³¨é‡Š
- `restartDelayMs`(å¯é€‰)â€” é‡å¯å‰çš„å»¶è¿Ÿ(é»˜è®¤ 2000)

ç¤ºä¾‹:

```bash
openclaw gateway call config.get --params '{}' # æ•è· payload.hash
openclaw gateway call config.patch --params '{
  "raw": "{\\n  channels: { telegram: { groups: { \\"*\\": { requireMention: false } } } }\\n}\\n",
  "baseHash": "<hash-from-config.get>",
  "sessionKey": "agent:main:whatsapp:dm:+15555550123",
  "restartDelayMs": 1000
}'
```

## æœ€å°é…ç½®(æ¨èèµ·ç‚¹)

```json5
{
  agents: { defaults: { workspace: "~/.openclaw/workspace" } },
  channels: { whatsapp: { allowFrom: ["+15555550123"] } }
}
```

é¦–æ¬¡æ„å»ºé»˜è®¤é•œåƒ:
```bash
scripts/sandbox-setup.sh
```

## è‡ªèŠæ¨¡å¼(æ¨èç”¨äºç¾¤ç»„æ§åˆ¶)

é˜²æ­¢æœºå™¨äººå“åº” WhatsApp ç¾¤ç»„ä¸­çš„ @-æåŠ(ä»…å“åº”ç‰¹å®šæ–‡æœ¬è§¦å‘å™¨):

```json5
{
  agents: {
    defaults: { workspace: "~/.openclaw/workspace" },
    list: [
      {
        id: "main",
        groupChat: { mentionPatterns: ["@openclaw", "reisponde"] }
      }
    ]
  },
  channels: {
    whatsapp: {
      // ç™½åå•ä»…ç”¨äº DM;åŒ…å«ä½ è‡ªå·±çš„å·ç å¯ç”¨è‡ªèŠæ¨¡å¼ã€‚
      allowFrom: ["+15555550123"],
      groups: { "*": { requireMention: true } }
    }
  }
}
```

## é…ç½®åŒ…å« (`$include`)

ä½¿ç”¨ `$include` æŒ‡ä»¤å°†é…ç½®æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚è¿™å¯¹ä»¥ä¸‹åœºæ™¯å¾ˆæœ‰ç”¨:
- ç»„ç»‡å¤§å‹é…ç½®(ä¾‹å¦‚,æ¯ä¸ªå®¢æˆ·ç«¯çš„ agent å®šä¹‰)
- è·¨ç¯å¢ƒå…±äº«é€šç”¨è®¾ç½®
- å°†æ•æ„Ÿé…ç½®åˆ†å¼€

### åŸºæœ¬ç”¨æ³•

```json5
// ~/.openclaw/openclaw.json
{
  gateway: { port: 18789 },
  
  // åŒ…å«å•ä¸ªæ–‡ä»¶(æ›¿æ¢é”®çš„å€¼)
  agents: { "$include": "./agents.json5" },
  
  // åŒ…å«å¤šä¸ªæ–‡ä»¶(æŒ‰é¡ºåºæ·±åº¦åˆå¹¶)
  broadcast: { 
    "$include": [
      "./clients/mueller.json5",
      "./clients/schmidt.json5"
    ]
  }
}
```

```json5
// ~/.openclaw/agents.json5
{
  defaults: { sandbox: { mode: "all", scope: "session" } },
  list: [
    { id: "main", workspace: "~/.openclaw/workspace" }
  ]
}
```

### åˆå¹¶è¡Œä¸º

- **å•ä¸ªæ–‡ä»¶**:æ›¿æ¢åŒ…å« `$include` çš„å¯¹è±¡
- **æ–‡ä»¶æ•°ç»„**:æŒ‰é¡ºåºæ·±åº¦åˆå¹¶æ–‡ä»¶(åé¢çš„æ–‡ä»¶è¦†ç›–å‰é¢çš„)
- **å¸¦åŒçº§é”®**:åŒçº§é”®åœ¨ includes ä¹‹ååˆå¹¶(è¦†ç›–åŒ…å«çš„å€¼)
- **åŒçº§é”® + æ•°ç»„/åŸå§‹å€¼**:ä¸æ”¯æŒ(åŒ…å«çš„å†…å®¹å¿…é¡»æ˜¯å¯¹è±¡)

```json5
// åŒçº§é”®è¦†ç›–åŒ…å«çš„å€¼
{
  "$include": "./base.json5",   // { a: 1, b: 2 }
  b: 99                          // ç»“æœ: { a: 1, b: 99 }
}
```

### åµŒå¥—åŒ…å«

åŒ…å«çš„æ–‡ä»¶æœ¬èº«å¯ä»¥åŒ…å« `$include` æŒ‡ä»¤(æœ€å¤š 10 å±‚æ·±åº¦):

```json5
// clients/mueller.json5
{
  agents: { "$include": "./mueller/agents.json5" },
  broadcast: { "$include": "./mueller/broadcast.json5" }
}
```

### è·¯å¾„è§£æ

- **ç›¸å¯¹è·¯å¾„**:ç›¸å¯¹äºåŒ…å«æ–‡ä»¶è§£æ
- **ç»å¯¹è·¯å¾„**:æŒ‰åŸæ ·ä½¿ç”¨
- **çˆ¶ç›®å½•**:`../` å¼•ç”¨æŒ‰é¢„æœŸå·¥ä½œ

```json5
{ "$include": "./sub/config.json5" }      // ç›¸å¯¹è·¯å¾„
{ "$include": "/etc/openclaw/base.json5" } // ç»å¯¹è·¯å¾„
{ "$include": "../shared/common.json5" }   // çˆ¶ç›®å½•
```

### é”™è¯¯å¤„ç†

- **æ–‡ä»¶ç¼ºå¤±**:æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯åŒ…å«è§£æçš„è·¯å¾„
- **è§£æé”™è¯¯**:æ˜¾ç¤ºå“ªä¸ªåŒ…å«çš„æ–‡ä»¶å¤±è´¥
- **å¾ªç¯åŒ…å«**:æ£€æµ‹å¹¶æŠ¥å‘ŠåŒ…å«é“¾

### ç¤ºä¾‹:å¤šå®¢æˆ·ç«¯æ³•å¾‹è®¾ç½®

```json5
// ~/.openclaw/openclaw.json
{
  gateway: { port: 18789, auth: { token: "secret" } },
  
  // é€šç”¨ agent é»˜è®¤å€¼
  agents: {
    defaults: {
      sandbox: { mode: "all", scope: "session" }
    },
    // åˆå¹¶æ‰€æœ‰å®¢æˆ·ç«¯çš„ agent åˆ—è¡¨
    list: { "$include": [
      "./clients/mueller/agents.json5",
      "./clients/schmidt/agents.json5"
    ]}
  },
  
  // åˆå¹¶å¹¿æ’­é…ç½®
  broadcast: { "$include": [
    "./clients/mueller/broadcast.json5",
    "./clients/schmidt/broadcast.json5"
  ]},
  
  channels: { whatsapp: { groupPolicy: "allowlist" } }
}
```

```json5
// ~/.openclaw/clients/mueller/agents.json5
[
  { id: "mueller-transcribe", workspace: "~/clients/mueller/transcribe" },
  { id: "mueller-docs", workspace: "~/clients/mueller/docs" }
]
```

```json5
// ~/.openclaw/clients/mueller/broadcast.json5
{
  "120363403215116621@g.us": ["mueller-transcribe", "mueller-docs"]
}
```

## é€šç”¨é€‰é¡¹

### ç¯å¢ƒå˜é‡ + `.env`

OpenClaw ä»çˆ¶è¿›ç¨‹(shellã€launchd/systemdã€CI ç­‰)è¯»å–ç¯å¢ƒå˜é‡ã€‚

æ­¤å¤–,å®ƒåŠ è½½:
- å½“å‰å·¥ä½œç›®å½•ä¸­çš„ `.env`(å¦‚æœå­˜åœ¨)
- `~/.openclaw/.env`(å³ `$OPENCLAW_STATE_DIR/.env`)çš„å…¨å±€å›é€€ `.env`

è¿™ä¸¤ä¸ª `.env` æ–‡ä»¶éƒ½ä¸ä¼šè¦†ç›–ç°æœ‰çš„ç¯å¢ƒå˜é‡ã€‚

ä½ è¿˜å¯ä»¥åœ¨é…ç½®ä¸­æä¾›å†…è”ç¯å¢ƒå˜é‡ã€‚è¿™äº›ä»…åœ¨è¿›ç¨‹ç¯å¢ƒç¼ºå°‘é”®æ—¶åº”ç”¨(ç›¸åŒçš„éè¦†ç›–è§„åˆ™):

```json5
{
  env: {
    OPENROUTER_API_KEY: "sk-or-...",
    vars: {
      GROQ_API_KEY: "gsk-..."
    }
  }
}
```

æŸ¥çœ‹ [/environment](/environment) äº†è§£å®Œæ•´ä¼˜å…ˆçº§å’Œæ¥æºã€‚

### `env.shellEnv`(å¯é€‰)

é€‰æ‹©æ€§ä¾¿åˆ©:å¦‚æœå¯ç”¨å¹¶ä¸”å°šæœªè®¾ç½®ä»»ä½•é¢„æœŸé”®,OpenClaw è¿è¡Œä½ çš„ç™»å½• shell å¹¶ä»…å¯¼å…¥ç¼ºå¤±çš„é¢„æœŸé”®(æ°¸ä¸è¦†ç›–)ã€‚
è¿™æœ‰æ•ˆåœ° sources ä½ çš„ shell é…ç½®æ–‡ä»¶ã€‚

```json5
{
  env: {
    shellEnv: {
      enabled: true,
      timeoutMs: 15000
    }
  }
}
```

ç¯å¢ƒå˜é‡ç­‰æ•ˆ:
- `OPENCLAW_LOAD_SHELL_ENV=1`
- `OPENCLAW_SHELL_ENV_TIMEOUT_MS=15000`

### é…ç½®ä¸­çš„ç¯å¢ƒå˜é‡æ›¿æ¢

ä½ å¯ä»¥åœ¨ä»»ä½•é…ç½®å­—ç¬¦ä¸²å€¼ä¸­ä½¿ç”¨ `${VAR_NAME}` è¯­æ³•ç›´æ¥å¼•ç”¨ç¯å¢ƒå˜é‡ã€‚å˜é‡åœ¨é…ç½®åŠ è½½æ—¶æ›¿æ¢,åœ¨éªŒè¯ä¹‹å‰ã€‚

```json5
{
  models: {
    providers: {
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    }
  },
  gateway: {
    auth: {
      token: "${OPENCLAW_GATEWAY_TOKEN}"
    }
  }
}
```

**è§„åˆ™:**
- ä»…åŒ¹é…å¤§å†™ç¯å¢ƒå˜é‡å:`[A-Z_][A-Z0-9_]*`
- ç¼ºå¤±æˆ–ç©ºç¯å¢ƒå˜é‡åœ¨é…ç½®åŠ è½½æ—¶æŠ›å‡ºé”™è¯¯
- ä½¿ç”¨ `$${VAR}` è½¬ä¹‰ä»¥è¾“å‡ºå­—é¢é‡ `${VAR}`
- ä¸ `$include` é…åˆä½¿ç”¨(åŒ…å«çš„æ–‡ä»¶ä¹Ÿè·å¾—æ›¿æ¢)

**å†…è”æ›¿æ¢:**

```json5
{
  models: {
    providers: {
      custom: {
        baseUrl: "${CUSTOM_API_BASE}/v1"  // â†’ "https://api.example.com/v1"
      }
    }
  }
}
```

### Auth å­˜å‚¨ (OAuth + API keys)

OpenClaw å°†**æ¯ä¸ª agent** çš„ auth é…ç½®æ–‡ä»¶(OAuth + API keys)å­˜å‚¨åœ¨:
- `<agentDir>/auth-profiles.json`(é»˜è®¤:`~/.openclaw/agents/<agentId>/agent/auth-profiles.json`)

å¦è§:[/concepts/oauth](/concepts/oauth)

ä¼ ç»Ÿ OAuth å¯¼å…¥:
- `~/.openclaw/credentials/oauth.json`(æˆ– `$OPENCLAW_STATE_DIR/credentials/oauth.json`)

åµŒå…¥å¼ Pi agent åœ¨ä»¥ä¸‹ä½ç½®ç»´æŠ¤è¿è¡Œæ—¶ç¼“å­˜:
- `<agentDir>/auth.json`(è‡ªåŠ¨ç®¡ç†;è¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘)

ä¼ ç»Ÿ agent ç›®å½•(å¤š agent ä¹‹å‰):
- `~/.openclaw/agent/*`(ç”± `openclaw doctor` è¿ç§»åˆ° `~/.openclaw/agents/<defaultAgentId>/agent/*`)

è¦†ç›–:
- OAuth ç›®å½•(ä»…ä¼ ç»Ÿå¯¼å…¥):`OPENCLAW_OAUTH_DIR`
- Agent ç›®å½•(é»˜è®¤ agent æ ¹è¦†ç›–):`OPENCLAW_AGENT_DIR`(é¦–é€‰)ã€`PI_CODING_AGENT_DIR`(ä¼ ç»Ÿ)

é¦–æ¬¡ä½¿ç”¨æ—¶,OpenClaw å°† `oauth.json` æ¡ç›®å¯¼å…¥ `auth-profiles.json`ã€‚

### `auth`

auth é…ç½®æ–‡ä»¶çš„å¯é€‰å…ƒæ•°æ®ã€‚è¿™**ä¸**å­˜å‚¨ secrets;å®ƒå°†é…ç½®æ–‡ä»¶ ID æ˜ å°„åˆ° provider + mode(å’Œå¯é€‰ email),å¹¶å®šä¹‰ç”¨äºæ•…éšœè½¬ç§»çš„ provider è½®æ¢é¡ºåºã€‚

```json5
{
  auth: {
    profiles: {
      "anthropic:me@example.com": { provider: "anthropic", mode: "oauth", email: "me@example.com" },
      "anthropic:work": { provider: "anthropic", mode: "api_key" }
    },
    order: {
      anthropic: ["anthropic:me@example.com", "anthropic:work"]
    }
  }
}
```

### `agents.list[].identity`

ç”¨äºé»˜è®¤å€¼å’Œ UX çš„å¯é€‰æ¯ agent èº«ä»½ã€‚è¿™ç”± macOS å…¥èŒåŠ©æ‰‹ç¼–å†™ã€‚

å¦‚æœè®¾ç½®,OpenClaw æ´¾ç”Ÿé»˜è®¤å€¼(ä»…å½“ä½ æœªæ˜ç¡®è®¾ç½®æ—¶):
- ä»**æ´»åŠ¨ agent** çš„ `identity.emoji` æ´¾ç”Ÿ `messages.ackReaction`(å›é€€åˆ° ğŸ‘€)
- ä» agent çš„ `identity.name`/`identity.emoji` æ´¾ç”Ÿ `agents.list[].groupChat.mentionPatterns`(å› æ­¤"@Samantha"åœ¨ Telegram/Slack/Discord/Google Chat/iMessage/WhatsApp çš„ç¾¤ç»„ä¸­å·¥ä½œ)
- `identity.avatar` æ¥å— workspace ç›¸å¯¹å›¾åƒè·¯å¾„æˆ–è¿œç¨‹ URL/data URLã€‚æœ¬åœ°æ–‡ä»¶å¿…é¡»ä½äº agent workspace å†…ã€‚

`identity.avatar` æ¥å—:
- Workspace ç›¸å¯¹è·¯å¾„(å¿…é¡»ä¿æŒåœ¨ agent workspace å†…)
- `http(s)` URL
- `data:` URI

```json5
{
  agents: {
    list: [
      {
        id: "main",
        identity: {
          name: "Samantha",
          theme: "helpful sloth",
          emoji: "ğŸ¦¥",
          avatar: "avatars/samantha.png"
        }
      }
    ]
  }
}
```

### `wizard`

ç”± CLI å‘å¯¼(`onboard`ã€`configure`ã€`doctor`)ç¼–å†™çš„å…ƒæ•°æ®ã€‚

```json5
{
  wizard: {
    lastRunAt: "2026-01-01T00:00:00.000Z",
    lastRunVersion: "2026.1.4",
    lastRunCommit: "abc1234",
    lastRunCommand: "configure",
    lastRunMode: "local"
  }
}
```

### `logging`

- é»˜è®¤æ—¥å¿—æ–‡ä»¶:`/tmp/openclaw/openclaw-YYYY-MM-DD.log`
- å¦‚æœä½ æƒ³è¦ç¨³å®šè·¯å¾„,è®¾ç½® `logging.file` ä¸º `/tmp/openclaw/openclaw.log`ã€‚
- æ§åˆ¶å°è¾“å‡ºå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å•ç‹¬è°ƒæ•´:
  - `logging.consoleLevel`(é»˜è®¤ä¸º `info`,å½“ `--verbose` æ—¶æå‡åˆ° `debug`)
  - `logging.consoleStyle`(`pretty` | `compact` | `json`)
- å·¥å…·æ‘˜è¦å¯ä»¥è¢«ç¼–è¾‘ä»¥é¿å…æ³„éœ² secrets:
  - `logging.redactSensitive`(`off` | `tools`,é»˜è®¤:`tools`)
  - `logging.redactPatterns`(æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²æ•°ç»„;è¦†ç›–é»˜è®¤å€¼)

```json5
{
  logging: {
    level: "info",
    file: "/tmp/openclaw/openclaw.log",
    consoleLevel: "info",
    consoleStyle: "pretty",
    redactSensitive: "tools",
    redactPatterns: [
      // ç¤ºä¾‹:ç”¨ä½ è‡ªå·±çš„è§„åˆ™è¦†ç›–é»˜è®¤å€¼ã€‚
      "\\bTOKEN\\b\\s*[=:]\\s*([\"']?)([^\\s\"']+)\\1",
      "/\\bsk-[A-Za-z0-9_-]{8,}\\b/gi"
    ]
  }
}
```

### `channels.whatsapp.dmPolicy`

æ§åˆ¶å¦‚ä½•å¤„ç† WhatsApp ç›´æ¥èŠå¤©(DMs):
- `"pairing"`(é»˜è®¤):æœªçŸ¥å‘é€è€…è·å¾—é…å¯¹ä»£ç ;æ‰€æœ‰è€…å¿…é¡»æ‰¹å‡†
- `"allowlist"`:ä»…å…è®¸ `channels.whatsapp.allowFrom`(æˆ–é…å¯¹çš„å…è®¸å­˜å‚¨)ä¸­çš„å‘é€è€…
- `"open"`:å…è®¸æ‰€æœ‰å…¥ç«™ DM(**éœ€è¦** `channels.whatsapp.allowFrom` åŒ…å« `"*"`)
- `"disabled"`:å¿½ç•¥æ‰€æœ‰å…¥ç«™ DM

é…å¯¹ä»£ç åœ¨ 1 å°æ—¶åè¿‡æœŸ;æœºå™¨äººä»…åœ¨åˆ›å»ºæ–°è¯·æ±‚æ—¶å‘é€é…å¯¹ä»£ç ã€‚é»˜è®¤æƒ…å†µä¸‹,å¾…å¤„ç†çš„ DM é…å¯¹è¯·æ±‚ä¸Šé™ä¸º**æ¯ä¸ª channel 3 ä¸ª**ã€‚

é…å¯¹æ‰¹å‡†:
- `openclaw pairing list whatsapp`
- `openclaw pairing approve whatsapp <code>`

### `channels.whatsapp.allowFrom`

å¯ä»¥è§¦å‘ WhatsApp è‡ªåŠ¨å›å¤çš„ E.164 ç”µè¯å·ç ç™½åå•(**ä»… DM**)ã€‚
å¦‚æœä¸ºç©ºä¸” `channels.whatsapp.dmPolicy="pairing"`,æœªçŸ¥å‘é€è€…å°†æ”¶åˆ°é…å¯¹ä»£ç ã€‚
å¯¹äºç¾¤ç»„,ä½¿ç”¨ `channels.whatsapp.groupPolicy` + `channels.whatsapp.groupAllowFrom`ã€‚

```json5
{
  channels: {
    whatsapp: {
      dmPolicy: "pairing", // pairing | allowlist | open | disabled
      allowFrom: ["+15555550123", "+447700900123"],
      textChunkLimit: 4000, // å¯é€‰å‡ºç«™å—å¤§å°(å­—ç¬¦)
      chunkMode: "length", // å¯é€‰åˆ†å—æ¨¡å¼(length | newline)
      mediaMaxMb: 50 // å¯é€‰å…¥ç«™åª’ä½“ä¸Šé™(MB)
    }
  }
}
```

### `channels.whatsapp.sendReadReceipts`

æ§åˆ¶å…¥ç«™ WhatsApp æ¶ˆæ¯æ˜¯å¦æ ‡è®°ä¸ºå·²è¯»(è“å‹¾)ã€‚é»˜è®¤:`true`ã€‚

å³ä½¿å¯ç”¨,è‡ªèŠæ¨¡å¼å§‹ç»ˆè·³è¿‡å·²è¯»å›æ‰§ã€‚

æ¯ä¸ªå¸æˆ·è¦†ç›–:`channels.whatsapp.accounts.<id>.sendReadReceipts`ã€‚

```json5
{
  channels: {
    whatsapp: { sendReadReceipts: false }
  }
}
```

### `channels.whatsapp.accounts`(å¤šè´¦æˆ·)

åœ¨ä¸€ä¸ª gateway ä¸­è¿è¡Œå¤šä¸ª WhatsApp è´¦æˆ·:

```json5
{
  channels: {
    whatsapp: {
      accounts: {
        default: {}, // å¯é€‰;ä¿æŒé»˜è®¤ id ç¨³å®š
        personal: {},
        biz: {
          // å¯é€‰è¦†ç›–ã€‚é»˜è®¤:~/.openclaw/credentials/whatsapp/biz
          // authDir: "~/.openclaw/credentials/whatsapp/biz",
        }
      }
    }
  }
}
```

æ³¨æ„:
- å¦‚æœå­˜åœ¨ `default`,å‡ºç«™å‘½ä»¤é»˜è®¤ä½¿ç”¨è´¦æˆ· `default`;å¦åˆ™ä½¿ç”¨ç¬¬ä¸€ä¸ªé…ç½®çš„è´¦æˆ· id(å·²æ’åº)ã€‚
- ä¼ ç»Ÿå•è´¦æˆ· Baileys auth ç›®å½•ç”± `openclaw doctor` è¿ç§»åˆ° `whatsapp/default`ã€‚

### `channels.telegram.accounts` / `channels.discord.accounts` / `channels.googlechat.accounts` / `channels.slack.accounts` / `channels.mattermost.accounts` / `channels.signal.accounts` / `channels.imessage.accounts`

æ¯ä¸ª channel è¿è¡Œå¤šä¸ªè´¦æˆ·(æ¯ä¸ªè´¦æˆ·éƒ½æœ‰è‡ªå·±çš„ `accountId` å’Œå¯é€‰ `name`):

```json5
{
  channels: {
    telegram: {
      accounts: {
        default: {
          name: "Primary bot",
          botToken: "123456:ABC..."
        },
        alerts: {
          name: "Alerts bot",
          botToken: "987654:XYZ..."
        }
      }
    }
  }
}
```

æ³¨æ„:
- çœç•¥ `accountId` æ—¶ä½¿ç”¨ `default`(CLI + è·¯ç”±)ã€‚
- ç¯å¢ƒå˜é‡ token ä»…é€‚ç”¨äº**é»˜è®¤**è´¦æˆ·ã€‚
- åŸºæœ¬ channel è®¾ç½®(ç¾¤ç»„ç­–ç•¥ã€æåŠé—¨æ§ç­‰)é€‚ç”¨äºæ‰€æœ‰è´¦æˆ·,é™¤éæ¯ä¸ªè´¦æˆ·è¦†ç›–ã€‚
- ä½¿ç”¨ `bindings[].match.accountId` å°†æ¯ä¸ªè´¦æˆ·è·¯ç”±åˆ°ä¸åŒçš„ agents.defaultsã€‚

### ç¾¤ç»„èŠå¤©æåŠé—¨æ§ (`agents.list[].groupChat` + `messages.groupChat`)

ç¾¤ç»„æ¶ˆæ¯é»˜è®¤**éœ€è¦æåŠ**(å…ƒæ•°æ®æåŠæˆ–æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼)ã€‚é€‚ç”¨äº WhatsAppã€Telegramã€Discordã€Google Chat å’Œ iMessage ç¾¤ç»„èŠå¤©ã€‚

**æåŠç±»å‹:**
- **å…ƒæ•°æ®æåŠ**:åŸç”Ÿå¹³å° @-æåŠ(ä¾‹å¦‚,WhatsApp ç‚¹å‡»æåŠ)ã€‚åœ¨ WhatsApp è‡ªèŠæ¨¡å¼ä¸‹å¿½ç•¥(å‚è§ `channels.whatsapp.allowFrom`)ã€‚
- **æ–‡æœ¬æ¨¡å¼**:`agents.list[].groupChat.mentionPatterns` ä¸­å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚æ— è®ºè‡ªèŠæ¨¡å¼å¦‚ä½•,å§‹ç»ˆæ£€æŸ¥ã€‚
- ä»…å½“æåŠæ£€æµ‹å¯èƒ½æ—¶(åŸç”ŸæåŠæˆ–è‡³å°‘ä¸€ä¸ª `mentionPattern`),æ‰å¼ºåˆ¶æ‰§è¡ŒæåŠé—¨æ§ã€‚

```json5
{
  messages: {
    groupChat: { historyLimit: 50 }
  },
  agents: {
    list: [
      { id: "main", groupChat: { mentionPatterns: ["@openclaw", "openclaw"] } }
    ]
  }
}
```

`messages.groupChat.historyLimit` è®¾ç½®ç¾¤ç»„å†å²ä¸Šä¸‹æ–‡çš„å…¨å±€é»˜è®¤å€¼ã€‚Channel å¯ä»¥ä½¿ç”¨ `channels.<channel>.historyLimit`(æˆ–å¤šè´¦æˆ·çš„ `channels.<channel>.accounts.*.historyLimit`)è¦†ç›–ã€‚è®¾ç½® `0` ç¦ç”¨å†å²åŒ…è£…ã€‚

#### DM å†å²é™åˆ¶

DM å¯¹è¯ä½¿ç”¨ agent ç®¡ç†çš„åŸºäº session çš„å†å²ã€‚ä½ å¯ä»¥é™åˆ¶æ¯ä¸ª DM session ä¿ç•™çš„ç”¨æˆ·è½®æ¬¡æ•°:

```json5
{
  channels: {
    telegram: {
      dmHistoryLimit: 30,  // å°† DM session é™åˆ¶ä¸º 30 ä¸ªç”¨æˆ·è½®æ¬¡
      dms: {
        "123456789": { historyLimit: 50 }  // æ¯ç”¨æˆ·è¦†ç›–(ç”¨æˆ· ID)
      }
    }
  }
}
```

è§£æé¡ºåº:
1. æ¯ DM è¦†ç›–:`channels.<provider>.dms[userId].historyLimit`
2. Provider é»˜è®¤:`channels.<provider>.dmHistoryLimit`
3. æ— é™åˆ¶(ä¿ç•™æ‰€æœ‰å†å²)

æ”¯æŒçš„ providers:`telegram`ã€`whatsapp`ã€`discord`ã€`slack`ã€`signal`ã€`imessage`ã€`msteams`ã€‚

æ¯ agent è¦†ç›–(è®¾ç½®æ—¶ä¼˜å…ˆ,å³ä½¿æ˜¯ `[]`):
```json5
{
  agents: {
    list: [
      { id: "work", groupChat: { mentionPatterns: ["@workbot", "\\+15555550123"] } },
      { id: "personal", groupChat: { mentionPatterns: ["@homebot", "\\+15555550999"] } }
    ]
  }
}
```

æåŠé—¨æ§é»˜è®¤å€¼ä½äºæ¯ä¸ª channel(`channels.whatsapp.groups`ã€`channels.telegram.groups`ã€`channels.imessage.groups`ã€`channels.discord.guilds`)ã€‚å½“è®¾ç½® `*.groups` æ—¶,å®ƒä¹Ÿå……å½“ç¾¤ç»„ç™½åå•;åŒ…å« `"*"` ä»¥å…è®¸æ‰€æœ‰ç¾¤ç»„ã€‚

ä»…å“åº”ç‰¹å®šæ–‡æœ¬è§¦å‘å™¨(å¿½ç•¥åŸç”Ÿ @-æåŠ):
```json5
{
  channels: {
    whatsapp: {
      // åŒ…å«ä½ è‡ªå·±çš„å·ç ä»¥å¯ç”¨è‡ªèŠæ¨¡å¼(å¿½ç•¥åŸç”Ÿ @-æåŠ)ã€‚
      allowFrom: ["+15555550123"],
      groups: { "*": { requireMention: true } }
    }
  },
  agents: {
    list: [
      {
        id: "main",
        groupChat: {
          // ä»…è¿™äº›æ–‡æœ¬æ¨¡å¼å°†è§¦å‘å“åº”
          mentionPatterns: ["reisponde", "@openclaw"]
        }
      }
    ]
  }
}
```

### ç¾¤ç»„ç­–ç•¥(æ¯ä¸ª channel)

ä½¿ç”¨ `channels.*.groupPolicy` æ§åˆ¶æ˜¯å¦å®Œå…¨æ¥å—ç¾¤ç»„/æˆ¿é—´æ¶ˆæ¯:

```json5
{
  channels: {
    whatsapp: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["+15551234567"]
    },
    telegram: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["tg:123456789", "@alice"]
    },
    signal: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["+15551234567"]
    },
    imessage: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["chat_id:123"]
    },
    msteams: {
      groupPolicy: "allowlist",
      groupAllowFrom: ["user@org.com"]
    },
    discord: {
      groupPolicy: "allowlist",
      guilds: {
        "GUILD_ID": {
          channels: { help: { allow: true } }
        }
      }
    },
    slack: {
      groupPolicy: "allowlist",
      channels: { "#general": { allow: true } }
    }
  }
}
```

æ³¨æ„:
- `"open"`:ç¾¤ç»„ç»•è¿‡ç™½åå•;æåŠé—¨æ§ä»ç„¶é€‚ç”¨ã€‚
- `"disabled"`:é˜»æ­¢æ‰€æœ‰ç¾¤ç»„/æˆ¿é—´æ¶ˆæ¯ã€‚
- `"allowlist"`:ä»…å…è®¸åŒ¹é…é…ç½®çš„ç™½åå•çš„ç¾¤ç»„/æˆ¿é—´ã€‚
- `channels.defaults.groupPolicy` åœ¨ provider çš„ `groupPolicy` æœªè®¾ç½®æ—¶è®¾ç½®é»˜è®¤å€¼ã€‚
- WhatsApp/Telegram/Signal/iMessage/Microsoft Teams ä½¿ç”¨ `groupAllowFrom`(å›é€€:æ˜¾å¼ `allowFrom`)ã€‚
- Discord/Slack ä½¿ç”¨ channel ç™½åå•(`channels.discord.guilds.*.channels`ã€`channels.slack.channels`)ã€‚
- ç¾¤ç»„ DM(Discord/Slack)ä»ç”± `dm.groupEnabled` + `dm.groupChannels` æ§åˆ¶ã€‚
- é»˜è®¤ä¸º `groupPolicy: "allowlist"`(é™¤éè¢« `channels.defaults.groupPolicy` è¦†ç›–);å¦‚æœæœªé…ç½®ç™½åå•,åˆ™é˜»æ­¢ç¾¤ç»„æ¶ˆæ¯ã€‚

### å¤š agent è·¯ç”± (`agents.list` + `bindings`)

åœ¨ä¸€ä¸ª Gateway å†…è¿è¡Œå¤šä¸ªéš”ç¦»çš„ agents(å•ç‹¬çš„ workspaceã€`agentDir`ã€sessions)ã€‚
å…¥ç«™æ¶ˆæ¯é€šè¿‡ bindings è·¯ç”±åˆ° agentã€‚

- `agents.list[]`:æ¯ agent è¦†ç›–ã€‚
  - `id`:ç¨³å®šçš„ agent id(å¿…éœ€)ã€‚
  - `default`:å¯é€‰;å½“è®¾ç½®å¤šä¸ªæ—¶,ç¬¬ä¸€ä¸ªè·èƒœå¹¶è®°å½•è­¦å‘Šã€‚
    å¦‚æœæœªè®¾ç½®,åˆ—è¡¨ä¸­çš„**ç¬¬ä¸€ä¸ªæ¡ç›®**æ˜¯é»˜è®¤ agentã€‚
  - `name`:agent çš„æ˜¾ç¤ºåç§°ã€‚
  - `workspace`:é»˜è®¤ `~/.openclaw/workspace-<agentId>`(å¯¹äº `main`,å›é€€åˆ° `agents.defaults.workspace`)ã€‚
  - `agentDir`:é»˜è®¤ `~/.openclaw/agents/<agentId>/agent`ã€‚
  - `model`:æ¯ agent é»˜è®¤æ¨¡å‹,è¦†ç›–è¯¥ agent çš„ `agents.defaults.model`ã€‚
    - å­—ç¬¦ä¸²å½¢å¼:`"provider/model"`,ä»…è¦†ç›– `agents.defaults.model.primary`
    - å¯¹è±¡å½¢å¼:`{ primary, fallbacks }`(fallbacks è¦†ç›– `agents.defaults.model.fallbacks`;`[]` ç¦ç”¨è¯¥ agent çš„å…¨å±€ fallbacks)
  - `identity`:æ¯ agent åç§°/ä¸»é¢˜/emoji(ç”¨äºæåŠæ¨¡å¼ + ack ååº”)ã€‚
  - `groupChat`:æ¯ agent æåŠé—¨æ§(`mentionPatterns`)ã€‚
  - `sandbox`:æ¯ agent sandbox é…ç½®(è¦†ç›– `agents.defaults.sandbox`)ã€‚
    - `mode`:`"off"` | `"non-main"` | `"all"`
    - `workspaceAccess`:`"none"` | `"ro"` | `"rw"`
    - `scope`:`"session"` | `"agent"` | `"shared"`
    - `workspaceRoot`:è‡ªå®šä¹‰ sandbox workspace æ ¹
    - `docker`:æ¯ agent docker è¦†ç›–(ä¾‹å¦‚ `image`ã€`network`ã€`env`ã€`setupCommand`ã€limits;å½“ `scope: "shared"` æ—¶å¿½ç•¥)
    - `browser`:æ¯ agent æ²™ç›’æµè§ˆå™¨è¦†ç›–(å½“ `scope: "shared"` æ—¶å¿½ç•¥)
    - `prune`:æ¯ agent sandbox ä¿®å‰ªè¦†ç›–(å½“ `scope: "shared"` æ—¶å¿½ç•¥)
  - `subagents`:æ¯ agent sub-agent é»˜è®¤å€¼ã€‚
    - `allowAgents`:ä»æ­¤ agent çš„ `sessions_spawn` çš„ agent ids ç™½åå•(`["*"]` = å…è®¸ä»»ä½•;é»˜è®¤:ä»…ç›¸åŒ agent)
  - `tools`:æ¯ agent å·¥å…·é™åˆ¶(åœ¨ sandbox å·¥å…·ç­–ç•¥ä¹‹å‰åº”ç”¨)ã€‚
    - `profile`:åŸºæœ¬å·¥å…·é…ç½®æ–‡ä»¶(åœ¨ allow/deny ä¹‹å‰åº”ç”¨)
    - `allow`:å…è®¸çš„å·¥å…·åç§°æ•°ç»„
    - `deny`:æ‹’ç»çš„å·¥å…·åç§°æ•°ç»„(deny è·èƒœ)
- `agents.defaults`:å…±äº« agent é»˜è®¤å€¼(modelã€workspaceã€sandbox ç­‰)ã€‚
- `bindings[]`:å°†å…¥ç«™æ¶ˆæ¯è·¯ç”±åˆ° `agentId`ã€‚
  - `match.channel`(å¿…éœ€)
  - `match.accountId`(å¯é€‰;`*` = ä»»ä½•è´¦æˆ·;çœç•¥ = é»˜è®¤è´¦æˆ·)
  - `match.peer`(å¯é€‰;`{ kind: dm|group|channel, id }`)
  - `match.guildId` / `match.teamId`(å¯é€‰;channel ç‰¹å®š)

ç¡®å®šæ€§åŒ¹é…é¡ºåº:
1) `match.peer`
2) `match.guildId`
3) `match.teamId`
4) `match.accountId`(ç²¾ç¡®,æ—  peer/guild/team)
5) `match.accountId: "*"`(channel èŒƒå›´,æ—  peer/guild/team)
6) é»˜è®¤ agent(`agents.list[].default`,å¦åˆ™ç¬¬ä¸€ä¸ªåˆ—è¡¨æ¡ç›®,å¦åˆ™ `"main"`)

åœ¨æ¯ä¸ªåŒ¹é…å±‚å†…,`bindings` ä¸­çš„ç¬¬ä¸€ä¸ªåŒ¹é…æ¡ç›®è·èƒœã€‚

#### æ¯ agent è®¿é—®é…ç½®æ–‡ä»¶(å¤š agent)

æ¯ä¸ª agent å¯ä»¥æºå¸¦è‡ªå·±çš„ sandbox + å·¥å…·ç­–ç•¥ã€‚ä½¿ç”¨å®ƒåœ¨ä¸€ä¸ª gateway ä¸­æ··åˆè®¿é—®çº§åˆ«:
- **å®Œå…¨è®¿é—®**(ä¸ªäºº agent)
- **åªè¯»**å·¥å…· + workspace
- **æ— æ–‡ä»¶ç³»ç»Ÿè®¿é—®**(ä»…æ¶ˆæ¯/session å·¥å…·)

æŸ¥çœ‹ [Multi-Agent Sandbox & Tools](/multi-agent-sandbox-tools) äº†è§£ä¼˜å…ˆçº§å’Œå…¶ä»–ç¤ºä¾‹ã€‚

å®Œå…¨è®¿é—®(æ—  sandbox):
```json5
{
  agents: {
    list: [
      {
        id: "personal",
        workspace: "~/.openclaw/workspace-personal",
        sandbox: { mode: "off" }
      }
    ]
  }
}
```

åªè¯»å·¥å…· + åªè¯» workspace:
```json5
{
  agents: {
    list: [
      {
        id: "family",
        workspace: "~/.openclaw/workspace-family",
        sandbox: {
          mode: "all",
          scope: "agent",
          workspaceAccess: "ro"
        },
        tools: {
          allow: ["read", "sessions_list", "sessions_history", "sessions_send", "sessions_spawn", "session_status"],
          deny: ["write", "edit", "apply_patch", "exec", "process", "browser"]
        }
      }
    ]
  }
}
```

æ— æ–‡ä»¶ç³»ç»Ÿè®¿é—®(å¯ç”¨æ¶ˆæ¯/session å·¥å…·):
```json5
{
  agents: {
    list: [
      {
        id: "public",
        workspace: "~/.openclaw/workspace-public",
        sandbox: {
          mode: "all",
          scope: "agent",
          workspaceAccess: "none"
        },
        tools: {
          allow: ["sessions_list", "sessions_history", "sessions_send", "sessions_spawn", "session_status", "whatsapp", "telegram", "slack", "discord", "gateway"],
          deny: ["read", "write", "edit", "apply_patch", "exec", "process", "browser", "canvas", "nodes", "cron", "gateway", "image"]
        }
      }
    ]
  }
}
```

ç¤ºä¾‹:ä¸¤ä¸ª WhatsApp è´¦æˆ· â†’ ä¸¤ä¸ª agents:

```json5
{
  agents: {
    list: [
      { id: "home", default: true, workspace: "~/.openclaw/workspace-home" },
      { id: "work", workspace: "~/.openclaw/workspace-work" }
    ]
  },
  bindings: [
    { agentId: "home", match: { channel: "whatsapp", accountId: "personal" } },
    { agentId: "work", match: { channel: "whatsapp", accountId: "biz" } }
  ],
  channels: {
    whatsapp: {
      accounts: {
        personal: {},
        biz: {},
      }
    }
  }
}
```

### `tools.agentToAgent`(å¯é€‰)

Agent åˆ° agent æ¶ˆæ¯ä¼ é€’æ˜¯é€‰æ‹©æ€§çš„:

```json5
{
  tools: {
    agentToAgent: {
      enabled: false,
      allow: ["home", "work"]
    }
  }
}
```

### `messages.queue`

æ§åˆ¶å½“ agent è¿è¡Œå·²ç»æ´»åŠ¨æ—¶å…¥ç«™æ¶ˆæ¯çš„è¡Œä¸ºæ–¹å¼ã€‚

```json5
{
  messages: {
    queue: {
      mode: "collect", // steer | followup | collect | steer-backlog (steer+backlog ok) | interrupt (queue=steer legacy)
      debounceMs: 1000,
      cap: 20,
      drop: "summarize", // old | new | summarize
      byChannel: {
        whatsapp: "collect",
        telegram: "collect",
        discord: "collect",
        imessage: "collect",
        webchat: "collect"
      }
    }
  }
}
```

### `messages.inbound`

å¯¹æ¥è‡ª**åŒä¸€å‘é€è€…**çš„å¿«é€Ÿå…¥ç«™æ¶ˆæ¯è¿›è¡Œå»æŠ–,ä»¥ä¾¿å¤šæ¡è¿ç»­æ¶ˆæ¯æˆä¸ºå•ä¸ª agent è½®æ¬¡ã€‚å»æŠ–çš„ä½œç”¨åŸŸæ˜¯æ¯ä¸ª channel + å¯¹è¯,å¹¶ä½¿ç”¨æœ€æ–°çš„æ¶ˆæ¯è¿›è¡Œå›å¤çº¿ç¨‹/IDã€‚

```json5
{
  messages: {
    inbound: {
      debounceMs: 2000, // 0 ç¦ç”¨
      byChannel: {
        whatsapp: 5000,
        slack: 1500,
        discord: 1500
      }
    }
  }
}
```

æ³¨æ„:
- å»æŠ–æ‰¹å¤„ç†**çº¯æ–‡æœ¬**æ¶ˆæ¯;åª’ä½“/é™„ä»¶ç«‹å³åˆ·æ–°ã€‚
- æ§åˆ¶å‘½ä»¤(ä¾‹å¦‚ `/queue`ã€`/new`)ç»•è¿‡å»æŠ–,å› æ­¤å®ƒä»¬ä¿æŒç‹¬ç«‹ã€‚

### `commands`(èŠå¤©å‘½ä»¤å¤„ç†)

æ§åˆ¶å¦‚ä½•åœ¨è¿æ¥å™¨ä¹‹é—´å¯ç”¨èŠå¤©å‘½ä»¤ã€‚

```json5
{
  commands: {
    native: "auto",         // åœ¨æ”¯æŒæ—¶æ³¨å†ŒåŸç”Ÿå‘½ä»¤(auto)
    text: true,             // è§£æèŠå¤©æ¶ˆæ¯ä¸­çš„æ–œæ å‘½ä»¤
    bash: false,            // å…è®¸ !(åˆ«å:/bash)(ä»…ä¸»æœº;éœ€è¦ tools.elevated ç™½åå•)
    bashForegroundMs: 2000, // bash å‰å°çª—å£(0 ç«‹å³åå°)
    config: false,          // å…è®¸ /config(å†™å…¥ç£ç›˜)
    debug: false,           // å…è®¸ /debug(ä»…è¿è¡Œæ—¶è¦†ç›–)
    restart: false,         // å…è®¸ /restart + gateway restart å·¥å…·
    useAccessGroups: true   // å¼ºåˆ¶æ‰§è¡Œå‘½ä»¤çš„è®¿é—®ç»„ç™½åå•/ç­–ç•¥
  }
}
```

æ³¨æ„:
- æ–‡æœ¬å‘½ä»¤å¿…é¡»ä½œä¸º**ç‹¬ç«‹**æ¶ˆæ¯å‘é€å¹¶ä½¿ç”¨å‰å¯¼ `/`(æ— çº¯æ–‡æœ¬åˆ«å)ã€‚
- `commands.text: false` ç¦ç”¨è§£æèŠå¤©æ¶ˆæ¯ä¸­çš„å‘½ä»¤ã€‚
- `commands.native: "auto"`(é»˜è®¤)ä¸º Discord/Telegram å¯ç”¨åŸç”Ÿå‘½ä»¤å¹¶ä¿æŒ Slack å…³é—­;ä¸æ”¯æŒçš„ channels ä¿æŒçº¯æ–‡æœ¬ã€‚
- è®¾ç½® `commands.native: true|false` å¼ºåˆ¶å…¨éƒ¨,æˆ–ä½¿ç”¨ `channels.discord.commands.native`ã€`channels.telegram.commands.native`ã€`channels.slack.commands.native`(bool æˆ– `"auto"`)æŒ‰ channel è¦†ç›–ã€‚`false` åœ¨å¯åŠ¨æ—¶æ¸…é™¤ Discord/Telegram ä¸Šå…ˆå‰æ³¨å†Œçš„å‘½ä»¤;Slack å‘½ä»¤åœ¨ Slack åº”ç”¨ä¸­ç®¡ç†ã€‚
- `channels.telegram.customCommands` æ·»åŠ é¢å¤–çš„ Telegram æœºå™¨äººèœå•æ¡ç›®ã€‚åç§°å·²è§„èŒƒåŒ–;ä¸åŸç”Ÿå‘½ä»¤çš„å†²çªè¢«å¿½ç•¥ã€‚
- `commands.bash: true` å¯ç”¨ `! <cmd>` è¿è¡Œä¸»æœº shell å‘½ä»¤(`/bash <cmd>` ä¹Ÿä½œä¸ºåˆ«åå·¥ä½œ)ã€‚éœ€è¦ `tools.elevated.enabled` å¹¶åœ¨ `tools.elevated.allowFrom.<channel>` ä¸­å°†å‘é€è€…åˆ—å…¥ç™½åå•ã€‚
- `commands.bashForegroundMs` æ§åˆ¶ bash åœ¨åå°ä¹‹å‰ç­‰å¾…å¤šé•¿æ—¶é—´ã€‚å½“ bash ä½œä¸šæ­£åœ¨è¿è¡Œæ—¶,æ–°çš„ `! <cmd>` è¯·æ±‚è¢«æ‹’ç»(ä¸€æ¬¡ä¸€ä¸ª)ã€‚
- `commands.config: true` å¯ç”¨ `/config`(è¯»å–/å†™å…¥ `openclaw.json`)ã€‚
- `channels.<provider>.configWrites` æ§åˆ¶ç”±è¯¥ channel å‘èµ·çš„é…ç½®å˜æ›´(é»˜è®¤:true)ã€‚è¿™é€‚ç”¨äº `/config set|unset` åŠ  provider ç‰¹å®šçš„è‡ªåŠ¨è¿ç§»(Telegram è¶…çº§ç¾¤ç»„ ID æ›´æ”¹ã€Slack channel ID æ›´æ”¹)ã€‚
- `commands.debug: true` å¯ç”¨ `/debug`(ä»…è¿è¡Œæ—¶è¦†ç›–)ã€‚
- `commands.restart: true` å¯ç”¨ `/restart` å’Œ gateway å·¥å…· restart æ“ä½œã€‚
- `commands.useAccessGroups: false` å…è®¸å‘½ä»¤ç»•è¿‡è®¿é—®ç»„ç™½åå•/ç­–ç•¥ã€‚
- æ–œæ å‘½ä»¤å’ŒæŒ‡ä»¤ä»…å¯¹**æˆæƒå‘é€è€…**æ‰§è¡Œã€‚æˆæƒæ¥è‡ª channel ç™½åå•/é…å¯¹åŠ  `commands.useAccessGroups`ã€‚

### `web`(WhatsApp web channel è¿è¡Œæ—¶)

WhatsApp é€šè¿‡ gateway çš„ web channel(Baileys Web)è¿è¡Œã€‚å½“é“¾æ¥çš„ session å­˜åœ¨æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚
è®¾ç½® `web.enabled: false` é»˜è®¤ä¿æŒå…³é—­ã€‚

```json5
{
  web: {
    enabled: true,
    heartbeatSeconds: 60,
    reconnect: {
      initialMs: 2000,
      maxMs: 120000,
      factor: 1.4,
      jitter: 0.2,
      maxAttempts: 0
    }
  }
}
```

### `channels.telegram`(bot transport)

ä»…å½“å­˜åœ¨ `channels.telegram` é…ç½®éƒ¨åˆ†æ—¶ OpenClaw æ‰å¯åŠ¨ Telegramã€‚bot token ä» `channels.telegram.botToken`(æˆ– `channels.telegram.tokenFile`)è§£æ,é»˜è®¤è´¦æˆ·çš„ `TELEGRAM_BOT_TOKEN` ä½œä¸ºå›é€€ã€‚
è®¾ç½® `channels.telegram.enabled: false` ç¦ç”¨è‡ªåŠ¨å¯åŠ¨ã€‚
å¤šè´¦æˆ·æ”¯æŒä½äº `channels.telegram.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚ç¯å¢ƒå˜é‡ token ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚
è®¾ç½® `channels.telegram.configWrites: false` é˜»æ­¢ Telegram å‘èµ·çš„é…ç½®å†™å…¥(åŒ…æ‹¬è¶…çº§ç¾¤ç»„ ID è¿ç§»å’Œ `/config set|unset`)ã€‚

```json5
{
  channels: {
    telegram: {
      enabled: true,
      botToken: "your-bot-token",
      dmPolicy: "pairing",                 // pairing | allowlist | open | disabled
      allowFrom: ["tg:123456789"],         // å¯é€‰;"open"éœ€è¦["*"]
      groups: {
        "*": { requireMention: true },
        "-1001234567890": {
          allowFrom: ["@admin"],
          systemPrompt: "Keep answers brief.",
          topics: {
            "99": {
              requireMention: false,
              skills: ["search"],
              systemPrompt: "Stay on topic."
            }
          }
        }
      },
      customCommands: [
        { command: "backup", description: "Git backup" },
        { command: "generate", description: "Create an image" }
      ],
      historyLimit: 50,                     // åŒ…æ‹¬æœ€å N æ¡ç¾¤ç»„æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡(0 ç¦ç”¨)
      replyToMode: "first",                 // off | first | all
      linkPreview: true,                   // åˆ‡æ¢å‡ºç«™é“¾æ¥é¢„è§ˆ
      streamMode: "partial",               // off | partial | block (draft streaming;ä¸ block streaming åˆ†å¼€)
      draftChunk: {                        // å¯é€‰;ä»…ç”¨äº streamMode=block
        minChars: 200,
        maxChars: 800,
        breakPreference: "paragraph"       // paragraph | newline | sentence
      },
      actions: { reactions: true, sendMessage: true }, // å·¥å…·æ“ä½œé—¨æ§(false ç¦ç”¨)
      reactionNotifications: "own",   // off | own | all
      mediaMaxMb: 5,
      retry: {                             // å‡ºç«™é‡è¯•ç­–ç•¥
        attempts: 3,
        minDelayMs: 400,
        maxDelayMs: 30000,
        jitter: 0.1
      },
      network: {                           // transport è¦†ç›–
        autoSelectFamily: false
      },
      proxy: "socks5://localhost:9050",
      webhookUrl: "https://example.com/telegram-webhook",
      webhookSecret: "secret",
      webhookPath: "/telegram-webhook"
    }
  }
}
```

Draft streaming æ³¨æ„äº‹é¡¹:
- ä½¿ç”¨ Telegram `sendMessageDraft`(draft æ°”æ³¡,ä¸æ˜¯çœŸæ­£çš„æ¶ˆæ¯)ã€‚
- éœ€è¦**ç§äººèŠå¤©ä¸»é¢˜**(DM ä¸­çš„ message_thread_id;bot å·²å¯ç”¨ä¸»é¢˜)ã€‚
- `/reasoning stream` å°†æ¨ç†æµå¼ä¼ è¾“åˆ° draft ä¸­,ç„¶åå‘é€æœ€ç»ˆç­”æ¡ˆã€‚
é‡è¯•ç­–ç•¥é»˜è®¤å€¼å’Œè¡Œä¸ºè®°å½•åœ¨[é‡è¯•ç­–ç•¥](/concepts/retry)ä¸­ã€‚

### `channels.discord`(bot transport)

é€šè¿‡è®¾ç½® bot token å’Œå¯é€‰é—¨æ§é…ç½® Discord bot:
å¤šè´¦æˆ·æ”¯æŒä½äº `channels.discord.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚ç¯å¢ƒå˜é‡ token ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚

```json5
{
  channels: {
    discord: {
      enabled: true,
      token: "your-bot-token",
      mediaMaxMb: 8,                          // é™åˆ¶å…¥ç«™åª’ä½“å¤§å°
      allowBots: false,                       // å…è®¸ bot ä½œè€…æ¶ˆæ¯
      actions: {                              // å·¥å…·æ“ä½œé—¨æ§(false ç¦ç”¨)
        reactions: true,
        stickers: true,
        polls: true,
        permissions: true,
        messages: true,
        threads: true,
        pins: true,
        search: true,
        memberInfo: true,
        roleInfo: true,
        roles: false,
        channelInfo: true,
        voiceStatus: true,
        events: true,
        moderation: false
      },
      replyToMode: "off",                     // off | first | all
      dm: {
        enabled: true,                        // false æ—¶ç¦ç”¨æ‰€æœ‰ DM
        policy: "pairing",                    // pairing | allowlist | open | disabled
        allowFrom: ["1234567890", "steipete"], // å¯é€‰ DM ç™½åå•("open"éœ€è¦["*"])
        groupEnabled: false,                 // å¯ç”¨ç¾¤ç»„ DM
        groupChannels: ["openclaw-dm"]          // å¯é€‰ç¾¤ç»„ DM ç™½åå•
      },
      guilds: {
        "123456789012345678": {               // guild id(é¦–é€‰)æˆ– slug
          slug: "friends-of-openclaw",
          requireMention: false,              // æ¯ guild é»˜è®¤
          reactionNotifications: "own",       // off | own | all | allowlist
          users: ["987654321098765432"],      // å¯é€‰æ¯ guild ç”¨æˆ·ç™½åå•
          channels: {
            general: { allow: true },
            help: {
              allow: true,
              requireMention: true,
              users: ["987654321098765432"],
              skills: ["docs"],
              systemPrompt: "Short answers only."
            }
          }
        }
      },
      historyLimit: 20,                       // åŒ…æ‹¬æœ€å N æ¡ guild æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡
      textChunkLimit: 2000,                   // å¯é€‰å‡ºç«™æ–‡æœ¬å—å¤§å°(å­—ç¬¦)
      chunkMode: "length",                    // å¯é€‰åˆ†å—æ¨¡å¼(length | newline)
      maxLinesPerMessage: 17,                 // æ¯æ¡æ¶ˆæ¯çš„è½¯æœ€å¤§è¡Œæ•°(Discord UI å‰ªåˆ‡)
      retry: {                                // å‡ºç«™é‡è¯•ç­–ç•¥
        attempts: 3,
        minDelayMs: 500,
        maxDelayMs: 30000,
        jitter: 0.1
      }
    }
  }
}
```

ä»…å½“å­˜åœ¨ `channels.discord` é…ç½®éƒ¨åˆ†æ—¶ OpenClaw æ‰å¯åŠ¨ Discordã€‚token ä» `channels.discord.token` è§£æ,é»˜è®¤è´¦æˆ·çš„ `DISCORD_BOT_TOKEN` ä½œä¸ºå›é€€(é™¤é `channels.discord.enabled` ä¸º `false`)ã€‚åœ¨æŒ‡å®š cron/CLI å‘½ä»¤çš„äº¤ä»˜ç›®æ ‡æ—¶ä½¿ç”¨ `user:<id>`(DM)æˆ– `channel:<id>`(guild channel);è£¸æ•°å­— ID æ˜¯æ¨¡ç³Šçš„å¹¶è¢«æ‹’ç»ã€‚
Guild slugs æ˜¯å°å†™çš„,ç©ºæ ¼æ›¿æ¢ä¸º `-`;channel é”®ä½¿ç”¨ slugged channel åç§°(æ— å‰å¯¼ `#`)ã€‚é¦–é€‰ guild ids ä½œä¸ºé”®ä»¥é¿å…é‡å‘½åæ­§ä¹‰ã€‚
é»˜è®¤æƒ…å†µä¸‹å¿½ç•¥ bot ä½œè€…æ¶ˆæ¯ã€‚ä½¿ç”¨ `channels.discord.allowBots` å¯ç”¨(è‡ªå·±çš„æ¶ˆæ¯ä»è¢«è¿‡æ»¤ä»¥é˜²æ­¢è‡ªå›å¤å¾ªç¯)ã€‚
ååº”é€šçŸ¥æ¨¡å¼:
- `off`:æ— ååº”äº‹ä»¶ã€‚
- `own`:å¯¹ bot è‡ªå·±æ¶ˆæ¯çš„ååº”(é»˜è®¤)ã€‚
- `all`:å¯¹æ‰€æœ‰æ¶ˆæ¯çš„æ‰€æœ‰ååº”ã€‚
- `allowlist`:æ¥è‡ª `guilds.<id>.users` å¯¹æ‰€æœ‰æ¶ˆæ¯çš„ååº”(ç©ºåˆ—è¡¨ç¦ç”¨)ã€‚
å‡ºç«™æ–‡æœ¬ç”± `channels.discord.textChunkLimit`(é»˜è®¤ 2000)åˆ†å—ã€‚è®¾ç½® `channels.discord.chunkMode="newline"` åœ¨é•¿åº¦åˆ†å—ä¹‹å‰åœ¨ç©ºè¡Œ(æ®µè½è¾¹ç•Œ)ä¸Šæ‹†åˆ†ã€‚Discord å®¢æˆ·ç«¯å¯ä»¥å‰ªåˆ‡éå¸¸é«˜çš„æ¶ˆæ¯,å› æ­¤ `channels.discord.maxLinesPerMessage`(é»˜è®¤ 17)å³ä½¿åœ¨ 2000 å­—ç¬¦ä»¥ä¸‹ä¹Ÿä¼šæ‹†åˆ†é•¿å¤šè¡Œå›å¤ã€‚
é‡è¯•ç­–ç•¥é»˜è®¤å€¼å’Œè¡Œä¸ºè®°å½•åœ¨[é‡è¯•ç­–ç•¥](/concepts/retry)ä¸­ã€‚

### `channels.googlechat`(Chat API webhook)

Google Chat é€šè¿‡ HTTP webhooks è¿è¡Œ,å…·æœ‰åº”ç”¨çº§åˆ«èº«ä»½éªŒè¯(æœåŠ¡è´¦æˆ·)ã€‚
å¤šè´¦æˆ·æ”¯æŒä½äº `channels.googlechat.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚ç¯å¢ƒå˜é‡ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚

```json5
{
  channels: {
    "googlechat": {
      enabled: true,
      serviceAccountFile: "/path/to/service-account.json",
      audienceType: "app-url",             // app-url | project-number
      audience: "https://gateway.example.com/googlechat",
      webhookPath: "/googlechat",
      botUser: "users/1234567890",        // å¯é€‰;æ”¹è¿›æåŠæ£€æµ‹
      dm: {
        enabled: true,
        policy: "pairing",                // pairing | allowlist | open | disabled
        allowFrom: ["users/1234567890"]   // å¯é€‰;"open"éœ€è¦["*"]
      },
      groupPolicy: "allowlist",
      groups: {
        "spaces/AAAA": { allow: true, requireMention: true }
      },
      actions: { reactions: true },
      typingIndicator: "message",
      mediaMaxMb: 20
    }
  }
}
```

æ³¨æ„:
- æœåŠ¡è´¦æˆ· JSON å¯ä»¥æ˜¯å†…è”çš„(`serviceAccount`)æˆ–åŸºäºæ–‡ä»¶çš„(`serviceAccountFile`)ã€‚
- é»˜è®¤è´¦æˆ·çš„ç¯å¢ƒå›é€€:`GOOGLE_CHAT_SERVICE_ACCOUNT` æˆ– `GOOGLE_CHAT_SERVICE_ACCOUNT_FILE`ã€‚
- `audienceType` + `audience` å¿…é¡»åŒ¹é… Chat åº”ç”¨çš„ webhook èº«ä»½éªŒè¯é…ç½®ã€‚
- è®¾ç½®äº¤ä»˜ç›®æ ‡æ—¶ä½¿ç”¨ `spaces/<spaceId>` æˆ– `users/<userId|email>`ã€‚

### `channels.slack`(socket mode)

Slack åœ¨ Socket Mode ä¸‹è¿è¡Œ,éœ€è¦ bot token å’Œ app token:

```json5
{
  channels: {
    slack: {
      enabled: true,
      botToken: "xoxb-...",
      appToken: "xapp-...",
      dm: {
        enabled: true,
        policy: "pairing", // pairing | allowlist | open | disabled
        allowFrom: ["U123", "U456", "*"], // å¯é€‰;"open"éœ€è¦["*"]
        groupEnabled: false,
        groupChannels: ["G123"]
      },
      channels: {
        C123: { allow: true, requireMention: true, allowBots: false },
        "#general": {
          allow: true,
          requireMention: true,
          allowBots: false,
          users: ["U123"],
          skills: ["docs"],
          systemPrompt: "Short answers only."
        }
      },
      historyLimit: 50,          // åŒ…æ‹¬æœ€å N æ¡ channel/ç¾¤ç»„æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡(0 ç¦ç”¨)
      allowBots: false,
      reactionNotifications: "own", // off | own | all | allowlist
      reactionAllowlist: ["U123"],
      replyToMode: "off",           // off | first | all
      thread: {
        historyScope: "thread",     // thread | channel
        inheritParent: false
      },
      actions: {
        reactions: true,
        messages: true,
        pins: true,
        memberInfo: true,
        emojiList: true
      },
      slashCommand: {
        enabled: true,
        name: "openclaw",
        sessionPrefix: "slack:slash",
        ephemeral: true
      },
      textChunkLimit: 4000,
      chunkMode: "length",
      mediaMaxMb: 20
    }
  }
}
```

å¤šè´¦æˆ·æ”¯æŒä½äº `channels.slack.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚ç¯å¢ƒå˜é‡ token ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚

å½“ provider å¯ç”¨å¹¶ä¸”ä¸¤ä¸ª token éƒ½è®¾ç½®(é€šè¿‡é…ç½®æˆ– `SLACK_BOT_TOKEN` + `SLACK_APP_TOKEN`)æ—¶,OpenClaw å¯åŠ¨ Slackã€‚åœ¨ä¸º cron/CLI å‘½ä»¤æŒ‡å®šäº¤ä»˜ç›®æ ‡æ—¶ä½¿ç”¨ `user:<id>`(DM)æˆ– `channel:<id>`ã€‚
è®¾ç½® `channels.slack.configWrites: false` é˜»æ­¢ Slack å‘èµ·çš„é…ç½®å†™å…¥(åŒ…æ‹¬ channel ID è¿ç§»å’Œ `/config set|unset`)ã€‚

é»˜è®¤æƒ…å†µä¸‹å¿½ç•¥ bot ä½œè€…æ¶ˆæ¯ã€‚ä½¿ç”¨ `channels.slack.allowBots` æˆ– `channels.slack.channels.<id>.allowBots` å¯ç”¨ã€‚

ååº”é€šçŸ¥æ¨¡å¼:
- `off`:æ— ååº”äº‹ä»¶ã€‚
- `own`:å¯¹ bot è‡ªå·±æ¶ˆæ¯çš„ååº”(é»˜è®¤)ã€‚
- `all`:å¯¹æ‰€æœ‰æ¶ˆæ¯çš„æ‰€æœ‰ååº”ã€‚
- `allowlist`:æ¥è‡ª `channels.slack.reactionAllowlist` å¯¹æ‰€æœ‰æ¶ˆæ¯çš„ååº”(ç©ºåˆ—è¡¨ç¦ç”¨)ã€‚

Thread session éš”ç¦»:
- `channels.slack.thread.historyScope` æ§åˆ¶ thread å†å²æ˜¯æ¯ thread(`thread`,é»˜è®¤)è¿˜æ˜¯è·¨ channel å…±äº«(`channel`)ã€‚
- `channels.slack.thread.inheritParent` æ§åˆ¶æ–° thread sessions æ˜¯å¦ç»§æ‰¿çˆ¶ channel è®°å½•(é»˜è®¤:false)ã€‚

Slack æ“ä½œç»„(æ§åˆ¶ `slack` å·¥å…·æ“ä½œ):
| æ“ä½œç»„ | é»˜è®¤ | æ³¨æ„ |
| --- | --- | --- |
| reactions | å¯ç”¨ | ååº” + åˆ—å‡ºååº” |
| messages | å¯ç”¨ | è¯»å–/å‘é€/ç¼–è¾‘/åˆ é™¤ |
| pins | å¯ç”¨ | å›ºå®š/å–æ¶ˆå›ºå®š/åˆ—å‡º |
| memberInfo | å¯ç”¨ | æˆå‘˜ä¿¡æ¯ |
| emojiList | å¯ç”¨ | è‡ªå®šä¹‰ emoji åˆ—è¡¨ |

### `channels.mattermost`(bot token)

Mattermost ä½œä¸ºæ’ä»¶æä¾›,ä¸ä¸æ ¸å¿ƒå®‰è£…æ†ç»‘ã€‚
é¦–å…ˆå®‰è£…å®ƒ:`openclaw plugins install @openclaw/mattermost`(æˆ–ä» git checkout çš„ `./extensions/mattermost`)ã€‚

Mattermost éœ€è¦ bot token åŠ æœåŠ¡å™¨çš„åŸºç¡€ URL:

```json5
{
  channels: {
    mattermost: {
      enabled: true,
      botToken: "mm-token",
      baseUrl: "https://chat.example.com",
      dmPolicy: "pairing",
      chatmode: "oncall", // oncall | onmessage | onchar
      oncharPrefixes: [">", "!"],
      textChunkLimit: 4000,
      chunkMode: "length"
    }
  }
}
```

å½“è´¦æˆ·é…ç½®(bot token + åŸºç¡€ URL)å¹¶å¯ç”¨æ—¶,OpenClaw å¯åŠ¨ Mattermostã€‚token + åŸºç¡€ URL ä» `channels.mattermost.botToken` + `channels.mattermost.baseUrl` æˆ–é»˜è®¤è´¦æˆ·çš„ `MATTERMOST_BOT_TOKEN` + `MATTERMOST_URL` è§£æ(é™¤é `channels.mattermost.enabled` ä¸º `false`)ã€‚

èŠå¤©æ¨¡å¼:
- `oncall`(é»˜è®¤):ä»…åœ¨ @æåŠæ—¶å“åº” channel æ¶ˆæ¯ã€‚
- `onmessage`:å“åº”æ¯æ¡ channel æ¶ˆæ¯ã€‚
- `onchar`:å½“æ¶ˆæ¯ä»¥è§¦å‘å‰ç¼€å¼€å¤´æ—¶å“åº”(`channels.mattermost.oncharPrefixes`,é»˜è®¤ `[">", "!"]`)ã€‚

è®¿é—®æ§åˆ¶:
- é»˜è®¤ DM:`channels.mattermost.dmPolicy="pairing"`(æœªçŸ¥å‘é€è€…è·å¾—é…å¯¹ä»£ç )ã€‚
- å…¬å¼€ DM:`channels.mattermost.dmPolicy="open"` åŠ  `channels.mattermost.allowFrom=["*"]`ã€‚
- ç¾¤ç»„:`channels.mattermost.groupPolicy="allowlist"` é»˜è®¤(æåŠé—¨æ§)ã€‚ä½¿ç”¨ `channels.mattermost.groupAllowFrom` é™åˆ¶å‘é€è€…ã€‚

å¤šè´¦æˆ·æ”¯æŒä½äº `channels.mattermost.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚ç¯å¢ƒå˜é‡ä»…é€‚ç”¨äºé»˜è®¤è´¦æˆ·ã€‚
æŒ‡å®šäº¤ä»˜ç›®æ ‡æ—¶ä½¿ç”¨ `channel:<id>` æˆ– `user:<id>`(æˆ– `@username`);è£¸ ids è¢«è§†ä¸º channel idsã€‚

### `channels.signal`(signal-cli)

Signal ååº”å¯ä»¥å‘å‡ºç³»ç»Ÿäº‹ä»¶(å…±äº«ååº”å·¥å…·):

```json5
{
  channels: {
    signal: {
      reactionNotifications: "own", // off | own | all | allowlist
      reactionAllowlist: ["+15551234567", "uuid:123e4567-e89b-12d3-a456-426614174000"],
      historyLimit: 50 // åŒ…æ‹¬æœ€å N æ¡ç¾¤ç»„æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡(0 ç¦ç”¨)
    }
  }
}
```

ååº”é€šçŸ¥æ¨¡å¼:
- `off`:æ— ååº”äº‹ä»¶ã€‚
- `own`:å¯¹ bot è‡ªå·±æ¶ˆæ¯çš„ååº”(é»˜è®¤)ã€‚
- `all`:å¯¹æ‰€æœ‰æ¶ˆæ¯çš„æ‰€æœ‰ååº”ã€‚
- `allowlist`:æ¥è‡ª `channels.signal.reactionAllowlist` å¯¹æ‰€æœ‰æ¶ˆæ¯çš„ååº”(ç©ºåˆ—è¡¨ç¦ç”¨)ã€‚

### `channels.imessage`(imsg CLI)

OpenClaw ç”Ÿæˆ `imsg rpc`(é€šè¿‡ stdio çš„ JSON-RPC)ã€‚ä¸éœ€è¦å®ˆæŠ¤ç¨‹åºæˆ–ç«¯å£ã€‚

```json5
{
  channels: {
    imessage: {
      enabled: true,
      cliPath: "imsg",
      dbPath: "~/Library/Messages/chat.db",
      remoteHost: "user@gateway-host", // ä½¿ç”¨ SSH åŒ…è£…å™¨æ—¶è¿œç¨‹é™„ä»¶çš„ SCP
      dmPolicy: "pairing", // pairing | allowlist | open | disabled
      allowFrom: ["+15555550123", "user@example.com", "chat_id:123"],
      historyLimit: 50,    // åŒ…æ‹¬æœ€å N æ¡ç¾¤ç»„æ¶ˆæ¯ä½œä¸ºä¸Šä¸‹æ–‡(0 ç¦ç”¨)
      includeAttachments: false,
      mediaMaxMb: 16,
      service: "auto",
      region: "US"
    }
  }
}
```

å¤šè´¦æˆ·æ”¯æŒä½äº `channels.imessage.accounts` ä¸‹(å‚è§ä¸Šé¢çš„å¤šè´¦æˆ·éƒ¨åˆ†)ã€‚

æ³¨æ„:
- éœ€è¦å¯¹ Messages DB çš„å®Œå…¨ç£ç›˜è®¿é—®æƒé™ã€‚
- ç¬¬ä¸€æ¬¡å‘é€å°†æç¤º Messages è‡ªåŠ¨åŒ–æƒé™ã€‚
- é¦–é€‰ `chat_id:<id>` ç›®æ ‡ã€‚ä½¿ç”¨ `imsg chats --limit 20` åˆ—å‡ºèŠå¤©ã€‚
- `channels.imessage.cliPath` å¯ä»¥æŒ‡å‘åŒ…è£…è„šæœ¬(ä¾‹å¦‚ `ssh` åˆ°å¦ä¸€å°è¿è¡Œ `imsg rpc` çš„ Mac);ä½¿ç”¨ SSH å¯†é’¥é¿å…å¯†ç æç¤ºã€‚
- å¯¹äºè¿œç¨‹ SSH åŒ…è£…å™¨,è®¾ç½® `channels.imessage.remoteHost` ä»¥åœ¨å¯ç”¨ `includeAttachments` æ—¶é€šè¿‡ SCP è·å–é™„ä»¶ã€‚

ç¤ºä¾‹åŒ…è£…å™¨:
```bash
#!/usr/bin/env bash
exec ssh -T gateway-host imsg "$@"
```

### `agents.defaults.workspace`

è®¾ç½® agent ç”¨äºæ–‡ä»¶æ“ä½œçš„**å•ä¸ªå…¨å±€ workspace ç›®å½•**ã€‚

é»˜è®¤:`~/.openclaw/workspace`ã€‚

```json5
{
  agents: { defaults: { workspace: "~/.openclaw/workspace" } }
}
```

å¦‚æœå¯ç”¨äº† `agents.defaults.sandbox`,éä¸» sessions å¯ä»¥ä½¿ç”¨ `agents.defaults.sandbox.workspaceRoot` ä¸‹çš„æ¯ä¸ªä½œç”¨åŸŸ workspaces è¦†ç›–æ­¤è®¾ç½®ã€‚

### `agents.defaults.repoRoot`

å¯é€‰çš„å­˜å‚¨åº“æ ¹ç›®å½•,æ˜¾ç¤ºåœ¨ç³»ç»Ÿæç¤ºçš„ Runtime è¡Œä¸­ã€‚å¦‚æœæœªè®¾ç½®,OpenClaw å°è¯•é€šè¿‡ä» workspace(å’Œå½“å‰å·¥ä½œç›®å½•)å‘ä¸ŠæŸ¥æ‰¾ `.git` ç›®å½•æ¥æ£€æµ‹ã€‚è·¯å¾„å¿…é¡»å­˜åœ¨æ‰èƒ½ä½¿ç”¨ã€‚

```json5
{
  agents: { defaults: { repoRoot: "~/Projects/openclaw" } }
}
```

### `agents.defaults.skipBootstrap`

ç¦ç”¨ workspace bootstrap æ–‡ä»¶(`AGENTS.md`ã€`SOUL.md`ã€`TOOLS.md`ã€`IDENTITY.md`ã€`USER.md` å’Œ `BOOTSTRAP.md`)çš„è‡ªåŠ¨åˆ›å»ºã€‚

å¯¹äº workspace æ–‡ä»¶æ¥è‡ªå­˜å‚¨åº“çš„é¢„æ’­ç§éƒ¨ç½²,è¯·ä½¿ç”¨æ­¤é€‰é¡¹ã€‚

```json5
{
  agents: { defaults: { skipBootstrap: true } }
}
```

### `agents.defaults.bootstrapMaxChars`

åœ¨æˆªæ–­ä¹‹å‰æ³¨å…¥ç³»ç»Ÿæç¤ºçš„æ¯ä¸ª workspace bootstrap æ–‡ä»¶çš„æœ€å¤§å­—ç¬¦æ•°ã€‚é»˜è®¤:`20000`ã€‚

å½“æ–‡ä»¶è¶…è¿‡æ­¤é™åˆ¶æ—¶,OpenClaw è®°å½•è­¦å‘Šå¹¶æ³¨å…¥å¸¦æœ‰æ ‡è®°çš„æˆªæ–­å¤´éƒ¨/å°¾éƒ¨ã€‚

```json5
{
  agents: { defaults: { bootstrapMaxChars: 20000 } }
}
```

### `agents.defaults.userTimezone`

è®¾ç½®ç”¨æˆ·æ—¶åŒºç”¨äº**ç³»ç»Ÿæç¤ºä¸Šä¸‹æ–‡**(ä¸ç”¨äºæ¶ˆæ¯ä¿¡å°ä¸­çš„æ—¶é—´æˆ³)ã€‚å¦‚æœæœªè®¾ç½®,OpenClaw åœ¨è¿è¡Œæ—¶ä½¿ç”¨ä¸»æœºæ—¶åŒºã€‚

```json5
{
  agents: { defaults: { userTimezone: "America/Chicago" } }
}
```

### `agents.defaults.timeFormat`

æ§åˆ¶ç³»ç»Ÿæç¤ºçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´éƒ¨åˆ†ä¸­æ˜¾ç¤ºçš„**æ—¶é—´æ ¼å¼**ã€‚
é»˜è®¤:`auto`(OS åå¥½)ã€‚

```json5
{
  agents: { defaults: { timeFormat: "auto" } } // auto | 12 | 24
}
```

### `messages`

æ§åˆ¶å…¥ç«™/å‡ºç«™å‰ç¼€å’Œå¯é€‰ ack ååº”ã€‚
æŸ¥çœ‹[æ¶ˆæ¯](/concepts/messages)äº†è§£é˜Ÿåˆ—ã€sessions å’Œæµå¼ä¸Šä¸‹æ–‡ã€‚

```json5
{
  messages: {
    responsePrefix: "ğŸ¦", // æˆ– "auto"
    ackReaction: "ğŸ‘€",
    ackReactionScope: "group-mentions",
    removeAckAfterReply: false
  }
}
```

`responsePrefix` åº”ç”¨äº**æ‰€æœ‰å‡ºç«™å›å¤**(å·¥å…·æ‘˜è¦ã€å—æµå¼ä¼ è¾“ã€æœ€ç»ˆå›å¤),é™¤éå·²å­˜åœ¨ã€‚

å¦‚æœæœªè®¾ç½® `messages.responsePrefix`,é»˜è®¤æƒ…å†µä¸‹ä¸åº”ç”¨å‰ç¼€ã€‚WhatsApp è‡ªèŠå›å¤æ˜¯ä¾‹å¤–:å½“è®¾ç½®æ—¶å®ƒä»¬é»˜è®¤ä¸º `[{identity.name}]`,å¦åˆ™ä¸º `[openclaw]`,å› æ­¤åŒå·ç å¯¹è¯ä¿æŒæ¸…æ™°ã€‚
å°†å…¶è®¾ç½®ä¸º `"auto"` ä»¥ä¸ºè·¯ç”±çš„ agent æ´¾ç”Ÿ `[{identity.name}]`(å½“è®¾ç½®æ—¶)ã€‚

#### æ¨¡æ¿å˜é‡

`responsePrefix` å­—ç¬¦ä¸²å¯ä»¥åŒ…å«åŠ¨æ€è§£æçš„æ¨¡æ¿å˜é‡:

| å˜é‡ | æè¿° | ç¤ºä¾‹ |
|----------|-------------|---------|
| `{model}` | çŸ­æ¨¡å‹åç§° | `claude-opus-4-5`ã€`gpt-4o` |
| `{modelFull}` | å®Œæ•´æ¨¡å‹æ ‡è¯†ç¬¦ | `anthropic/claude-opus-4-5` |
| `{provider}` | Provider åç§° | `anthropic`ã€`openai` |
| `{thinkingLevel}` | å½“å‰æ€è€ƒçº§åˆ« | `high`ã€`low`ã€`off` |
| `{identity.name}` | Agent èº«ä»½åç§° | (ä¸ `"auto"` æ¨¡å¼ç›¸åŒ) |

å˜é‡ä¸åŒºåˆ†å¤§å°å†™(`{MODEL}` = `{model}`)ã€‚`{think}` æ˜¯ `{thinkingLevel}` çš„åˆ«åã€‚
æœªè§£æçš„å˜é‡ä¿æŒä¸ºå­—é¢æ–‡æœ¬ã€‚

```json5
{
  messages: {
    responsePrefix: "[{model} | think:{thinkingLevel}]"
  }
}
```

ç¤ºä¾‹è¾“å‡º:`[claude-opus-4-5 | think:high] Here's my response...`

WhatsApp å…¥ç«™å‰ç¼€é€šè¿‡ `channels.whatsapp.messagePrefix`(å·²å¼ƒç”¨:`messages.messagePrefix`)é…ç½®ã€‚é»˜è®¤ä¿æŒ**ä¸å˜**:å½“ `channels.whatsapp.allowFrom` ä¸ºç©ºæ—¶ä¸º `"[openclaw]"`,å¦åˆ™ä¸º `""`(æ— å‰ç¼€)ã€‚ä½¿ç”¨ `"[openclaw]"` æ—¶,å½“è·¯ç”±çš„ agent è®¾ç½®äº† `identity.name` æ—¶,OpenClaw å°†æ”¹ç”¨ `[{identity.name}]`ã€‚

`ackReaction` å‘é€å°½åŠ›è€Œä¸ºçš„ emoji ååº”ä»¥ç¡®è®¤æ”¯æŒååº”çš„ channels(Slack/Discord/Telegram/Google Chat)ä¸Šçš„å…¥ç«™æ¶ˆæ¯ã€‚é»˜è®¤ä¸ºæ´»åŠ¨ agent çš„ `identity.emoji`(å½“è®¾ç½®æ—¶),å¦åˆ™ä¸º `"ğŸ‘€"`ã€‚å°†å…¶è®¾ç½®ä¸º `""` ä»¥ç¦ç”¨ã€‚

`ackReactionScope` æ§åˆ¶ååº”ä½•æ—¶è§¦å‘:
- `group-mentions`(é»˜è®¤):ä»…å½“ç¾¤ç»„/æˆ¿é—´éœ€è¦æåŠ**å¹¶ä¸”**æœºå™¨äººè¢«æåŠæ—¶
- `group-all`:æ‰€æœ‰ç¾¤ç»„/æˆ¿é—´æ¶ˆæ¯
- `direct`:ä»…ç›´æ¥æ¶ˆæ¯
- `all`:æ‰€æœ‰æ¶ˆæ¯

`removeAckAfterReply` åœ¨å‘é€å›å¤ååˆ é™¤ bot çš„ ack ååº”(ä»… Slack/Discord/Telegram/Google Chat)ã€‚é»˜è®¤:`false`ã€‚

#### `messages.tts`

ä¸ºå‡ºç«™å›å¤å¯ç”¨æ–‡æœ¬è½¬è¯­éŸ³ã€‚å¯ç”¨æ—¶,OpenClaw ä½¿ç”¨ ElevenLabs æˆ– OpenAI ç”ŸæˆéŸ³é¢‘å¹¶å°†å…¶é™„åŠ åˆ°å“åº”ã€‚Telegram ä½¿ç”¨ Opus è¯­éŸ³ç¬”è®°;å…¶ä»– channels å‘é€ MP3 éŸ³é¢‘ã€‚

```json5
{
  messages: {
    tts: {
      auto: "always", // off | always | inbound | tagged
      mode: "final", // final | all (åŒ…æ‹¬å·¥å…·/å—å›å¤)
      provider: "elevenlabs",
      summaryModel: "openai/gpt-4.1-mini",
      modelOverrides: {
        enabled: true
      },
      maxTextLength: 4000,
      timeoutMs: 30000,
      prefsPath: "~/.openclaw/settings/tts.json",
      elevenlabs: {
        apiKey: "elevenlabs_api_key",
        baseUrl: "https://api.elevenlabs.io",
        voiceId: "voice_id",
        modelId: "eleven_multilingual_v2",
        seed: 42,
        applyTextNormalization: "auto",
        languageCode: "en",
        voiceSettings: {
          stability: 0.5,
          similarityBoost: 0.75,
          style: 0.0,
          useSpeakerBoost: true,
          speed: 1.0
        }
      },
      openai: {
        apiKey: "openai_api_key",
        model: "gpt-4o-mini-tts",
        voice: "alloy"
      }
    }
  }
}
```

æ³¨æ„:
- `messages.tts.auto` æ§åˆ¶è‡ªåŠ¨ TTS(`off`ã€`always`ã€`inbound`ã€`tagged`)ã€‚
- `/tts off|always|inbound|tagged` è®¾ç½®æ¯ session è‡ªåŠ¨æ¨¡å¼(è¦†ç›–é…ç½®)ã€‚
- `messages.tts.enabled` æ˜¯ä¼ ç»Ÿçš„;doctor å°†å…¶è¿ç§»åˆ° `messages.tts.auto`ã€‚
- `prefsPath` å­˜å‚¨æœ¬åœ°è¦†ç›–(provider/limit/summarize)ã€‚
- `maxTextLength` æ˜¯ TTS è¾“å…¥çš„ç¡¬ä¸Šé™;æ‘˜è¦è¢«æˆªæ–­ä»¥é€‚åº”ã€‚
- `summaryModel` è¦†ç›– `agents.defaults.model.primary` ç”¨äºè‡ªåŠ¨æ‘˜è¦ã€‚
  - æ¥å— `provider/model` æˆ–æ¥è‡ª `agents.defaults.models` çš„åˆ«åã€‚
- `modelOverrides` å¯ç”¨æ¨¡å‹é©±åŠ¨çš„è¦†ç›–,å¦‚ `[[tts:...]]` æ ‡ç­¾(é»˜è®¤å¯ç”¨)ã€‚
- `/tts limit` å’Œ `/tts summary` æ§åˆ¶æ¯ç”¨æˆ·æ‘˜è¦è®¾ç½®ã€‚
- `apiKey` å€¼å›é€€åˆ° `ELEVENLABS_API_KEY`/`XI_API_KEY` å’Œ `OPENAI_API_KEY`ã€‚
- `elevenlabs.baseUrl` è¦†ç›– ElevenLabs API åŸºç¡€ URLã€‚
- `elevenlabs.voiceSettings` æ”¯æŒ `stability`/`similarityBoost`/`style`(0..1)ã€`useSpeakerBoost` å’Œ `speed`(0.5..2.0)ã€‚

### `talk`

Talk æ¨¡å¼(macOS/iOS/Android)çš„é»˜è®¤å€¼ã€‚Voice ID å›é€€åˆ°æœªè®¾ç½®æ—¶çš„ `ELEVENLABS_VOICE_ID` æˆ– `SAG_VOICE_ID`ã€‚
`apiKey` åœ¨æœªè®¾ç½®æ—¶å›é€€åˆ° `ELEVENLABS_API_KEY`(æˆ– gateway çš„ shell é…ç½®æ–‡ä»¶)ã€‚
`voiceAliases` è®© Talk æŒ‡ä»¤ä½¿ç”¨å‹å¥½åç§°(ä¾‹å¦‚ `"voice":"Clawd"`)ã€‚

```json5
{
  talk: {
    voiceId: "elevenlabs_voice_id",
    voiceAliases: {
      Clawd: "EXAVITQu4vr4xnSDxMaL",
      Roger: "CwhRBWXzGAHq8TQ4Fs17"
    },
    modelId: "eleven_v3",
    outputFormat: "mp3_44100_128",
    apiKey: "elevenlabs_api_key",
    interruptOnSpeech: true
  }
}
```

### `agents.defaults`

æ§åˆ¶åµŒå…¥å¼ agent è¿è¡Œæ—¶(model/thinking/verbose/timeouts)ã€‚
`agents.defaults.models` å®šä¹‰é…ç½®çš„æ¨¡å‹ç›®å½•(å¹¶å……å½“ `/model` çš„ç™½åå•)ã€‚
`agents.defaults.model.primary` è®¾ç½®é»˜è®¤æ¨¡å‹;`agents.defaults.model.fallbacks` æ˜¯å…¨å±€æ•…éšœè½¬ç§»ã€‚
`agents.defaults.imageModel` æ˜¯å¯é€‰çš„,**ä»…åœ¨ä¸»æ¨¡å‹ç¼ºå°‘å›¾åƒè¾“å…¥æ—¶ä½¿ç”¨**ã€‚
æ¯ä¸ª `agents.defaults.models` æ¡ç›®å¯ä»¥åŒ…æ‹¬:
- `alias`(å¯é€‰æ¨¡å‹å¿«æ·æ–¹å¼,ä¾‹å¦‚ `/opus`)ã€‚
- `params`(ä¼ é€’ç»™æ¨¡å‹è¯·æ±‚çš„å¯é€‰ provider ç‰¹å®š API å‚æ•°)ã€‚

`params` ä¹Ÿåº”ç”¨äºæµå¼è¿è¡Œ(åµŒå…¥å¼ agent + å‹ç¼©)ã€‚ä»Šå¤©æ”¯æŒçš„é”®:`temperature`ã€`maxTokens`ã€‚è¿™äº›ä¸è°ƒç”¨æ—¶é€‰é¡¹åˆå¹¶;è°ƒç”¨è€…æä¾›çš„å€¼è·èƒœã€‚`temperature` æ˜¯ä¸€ä¸ªé«˜çº§æ—‹é’®â€”é™¤éä½ çŸ¥é“æ¨¡å‹çš„é»˜è®¤å€¼å¹¶éœ€è¦æ›´æ”¹,å¦åˆ™ä¸è¦è®¾ç½®ã€‚

ç¤ºä¾‹:

```json5
{
  agents: {
    defaults: {
      models: {
        "anthropic/claude-sonnet-4-5-20250929": {
          params: { temperature: 0.6 }
        },
        "openai/gpt-5.2": {
          params: { maxTokens: 8192 }
        }
      }
    }
  }
}
```

Z.AI GLM-4.x æ¨¡å‹è‡ªåŠ¨å¯ç”¨æ€è€ƒæ¨¡å¼,é™¤éä½ :
- è®¾ç½® `--thinking off`,æˆ–
- è‡ªå·±å®šä¹‰ `agents.defaults.models["zai/<model>"].params.thinking`ã€‚

OpenClaw è¿˜æä¾›ä¸€äº›å†…ç½®åˆ«åå¿«æ·æ–¹å¼ã€‚é»˜è®¤å€¼ä»…åœ¨æ¨¡å‹å·²åœ¨ `agents.defaults.models` ä¸­å­˜åœ¨æ—¶åº”ç”¨:

- `opus` -> `anthropic/claude-opus-4-5`
- `sonnet` -> `anthropic/claude-sonnet-4-5`
- `gpt` -> `openai/gpt-5.2`
- `gpt-mini` -> `openai/gpt-5-mini`
- `gemini` -> `google/gemini-3-pro-preview`
- `gemini-flash` -> `google/gemini-3-flash-preview`

å¦‚æœä½ è‡ªå·±é…ç½®ç›¸åŒçš„åˆ«ååç§°(ä¸åŒºåˆ†å¤§å°å†™),ä½ çš„å€¼è·èƒœ(é»˜è®¤å€¼æ°¸ä¸è¦†ç›–)ã€‚

ç¤ºä¾‹:Opus 4.5 ä¸»æ¨¡å‹åŠ  MiniMax M2.1 æ•…éšœè½¬ç§»(æ‰˜ç®¡ MiniMax):

```json5
{
  agents: {
    defaults: {
      models: {
        "anthropic/claude-opus-4-5": { alias: "opus" },
        "minimax/MiniMax-M2.1": { alias: "minimax" }
      },
      model: {
        primary: "anthropic/claude-opus-4-5",
        fallbacks: ["minimax/MiniMax-M2.1"]
      }
    }
  }
}
```

MiniMax auth:è®¾ç½® `MINIMAX_API_KEY`(env)æˆ–é…ç½® `models.providers.minimax`ã€‚

#### `agents.defaults.cliBackends`(CLI æ•…éšœè½¬ç§»)

ç”¨äºçº¯æ–‡æœ¬æ•…éšœè½¬ç§»è¿è¡Œçš„å¯é€‰ CLI åç«¯(æ— å·¥å…·è°ƒç”¨)ã€‚å½“ API providers å¤±è´¥æ—¶,è¿™äº›ä½œä¸ºå¤‡ç”¨è·¯å¾„å¾ˆæœ‰ç”¨ã€‚å½“ä½ é…ç½®æ¥å—æ–‡ä»¶è·¯å¾„çš„ `imageArg` æ—¶,æ”¯æŒå›¾åƒé€ä¼ ã€‚

æ³¨æ„:
- CLI åç«¯æ˜¯**æ–‡æœ¬ä¼˜å…ˆ**çš„;å·¥å…·å§‹ç»ˆè¢«ç¦ç”¨ã€‚
- å½“è®¾ç½® `sessionArg` æ—¶æ”¯æŒ Sessions;session ids æŒ‰åç«¯æŒä¹…åŒ–ã€‚
- å¯¹äº `claude-cli`,é»˜è®¤å€¼å·²è¿æ¥ã€‚å¦‚æœ PATH æœ€å°(launchd/systemd),è¦†ç›–å‘½ä»¤è·¯å¾„ã€‚

ç¤ºä¾‹:

```json5
{
  agents: {
    defaults: {
      cliBackends: {
        "claude-cli": {
          command: "/opt/homebrew/bin/claude"
        },
        "my-cli": {
          command: "my-cli",
          args: ["--json"],
          output: "json",
          modelArg: "--model",
          sessionArg: "--session",
          sessionMode: "existing",
          systemPromptArg: "--system",
          systemPromptWhen: "first",
          imageArg: "--image",
          imageMode: "repeat"
        }
      }
    }
  }
}
```

```json5
{
  agents: {
    defaults: {
      models: {
        "anthropic/claude-opus-4-5": { alias: "Opus" },
        "anthropic/claude-sonnet-4-1": { alias: "Sonnet" },
        "openrouter/deepseek/deepseek-r1:free": {},
        "zai/glm-4.7": {
          alias: "GLM",
          params: {
            thinking: {
              type: "enabled",
              clear_thinking: false
            }
          }
        }
      },
      model: {
        primary: "anthropic/claude-opus-4-5",
        fallbacks: [
          "openrouter/deepseek/deepseek-r1:free",
          "openrouter/meta-llama/llama-3.3-70b-instruct:free"
        ]
      },
      imageModel: {
        primary: "openrouter/qwen/qwen-2.5-vl-72b-instruct:free",
        fallbacks: [
          "openrouter/google/gemini-2.0-flash-vision:free"
        ]
      },
      thinkingDefault: "low",
      verboseDefault: "off",
      elevatedDefault: "on",
      timeoutSeconds: 600,
      mediaMaxMb: 5,
      heartbeat: {
        every: "30m",
        target: "last"
      },
      maxConcurrent: 3,
      subagents: {
        model: "minimax/MiniMax-M2.1",
        maxConcurrent: 1,
        archiveAfterMinutes: 60
      },
      exec: {
        backgroundMs: 10000,
        timeoutSec: 1800,
        cleanupMs: 1800000
      },
      contextTokens: 200000
    }
  }
}
```

#### `agents.defaults.contextPruning`(å·¥å…·ç»“æœä¿®å‰ª)

`agents.defaults.contextPruning` åœ¨è¯·æ±‚å‘é€åˆ° LLM ä¹‹å‰,ä»å†…å­˜ä¸­çš„ä¸Šä¸‹æ–‡ä¿®å‰ª**æ—§å·¥å…·ç»“æœ**ã€‚
å®ƒ**ä¸**ä¿®æ”¹ç£ç›˜ä¸Šçš„ session å†å²(`*.jsonl` ä¿æŒå®Œæ•´)ã€‚

è¿™æ—¨åœ¨å‡å°‘éšæ—¶é—´ç§¯ç´¯å¤§é‡å·¥å…·è¾“å‡ºçš„å¥è°ˆ agents çš„ token ä½¿ç”¨ã€‚

é«˜çº§åˆ«:
- ä»ä¸è§¦åŠç”¨æˆ·/åŠ©æ‰‹æ¶ˆæ¯ã€‚
- ä¿æŠ¤æœ€å `keepLastAssistants` ä¸ªåŠ©æ‰‹æ¶ˆæ¯(è¯¥ç‚¹ä¹‹åçš„å·¥å…·ç»“æœä¸è¢«ä¿®å‰ª)ã€‚
- ä¿æŠ¤ bootstrap å‰ç¼€(ç¬¬ä¸€æ¡ç”¨æˆ·æ¶ˆæ¯ä¹‹å‰çš„ä»»ä½•å†…å®¹éƒ½ä¸è¢«ä¿®å‰ª)ã€‚
- æ¨¡å¼:
  - `adaptive`:å½“ä¼°è®¡çš„ä¸Šä¸‹æ–‡æ¯”ç‡è¶…è¿‡ `softTrimRatio` æ—¶,è½¯ä¿®å‰ªè¶…å¤§å·¥å…·ç»“æœ(ä¿ç•™å¤´éƒ¨/å°¾éƒ¨)ã€‚
    ç„¶å,å½“ä¼°è®¡çš„ä¸Šä¸‹æ–‡æ¯”ç‡è¶…è¿‡ `hardClearRatio` **å¹¶ä¸”**æœ‰è¶³å¤Ÿçš„å¯ä¿®å‰ªå·¥å…·ç»“æœæ‰¹é‡(`minPrunableToolChars`)æ—¶,ç¡¬æ¸…é™¤æœ€æ—§çš„åˆæ ¼å·¥å…·ç»“æœã€‚
  - `aggressive`:å§‹ç»ˆç”¨ `hardClear.placeholder` æ›¿æ¢æˆªæ­¢å‰çš„åˆæ ¼å·¥å…·ç»“æœ(æ— æ¯”ç‡æ£€æŸ¥)ã€‚

è½¯ä¿®å‰ªä¸ç¡¬ä¿®å‰ª(å‘é€åˆ° LLM çš„ä¸Šä¸‹æ–‡ä¸­çš„æ›´æ”¹å†…å®¹):
- **è½¯ä¿®å‰ª**:ä»…ç”¨äº*è¶…å¤§*å·¥å…·ç»“æœã€‚ä¿ç•™å¼€å¤´ + ç»“å°¾å¹¶åœ¨ä¸­é—´æ’å…¥ `...`ã€‚
  - ä¹‹å‰:`toolResult("â€¦very long outputâ€¦")`
  - ä¹‹å:`toolResult("HEADâ€¦\n...\nâ€¦TAIL\n\n[Tool result trimmed: â€¦]")`
- **ç¡¬æ¸…é™¤**:ç”¨å ä½ç¬¦æ›¿æ¢æ•´ä¸ªå·¥å…·ç»“æœã€‚
  - ä¹‹å‰:`toolResult("â€¦very long outputâ€¦")`
  - ä¹‹å:`toolResult("[Old tool result content cleared]")`

æ³¨æ„/å½“å‰é™åˆ¶:
- åŒ…å«**å›¾åƒå—çš„å·¥å…·ç»“æœç°åœ¨è¢«è·³è¿‡**(ä»ä¸ä¿®å‰ª/æ¸…é™¤)ã€‚
- ä¼°è®¡çš„"ä¸Šä¸‹æ–‡æ¯”ç‡"åŸºäº**å­—ç¬¦**(è¿‘ä¼¼),è€Œä¸æ˜¯ç²¾ç¡®çš„ tokensã€‚
- å¦‚æœ session å°šæœªåŒ…å«è‡³å°‘ `keepLastAssistants` ä¸ªåŠ©æ‰‹æ¶ˆæ¯,åˆ™è·³è¿‡ä¿®å‰ªã€‚
- åœ¨ `aggressive` æ¨¡å¼ä¸‹,å¿½ç•¥ `hardClear.enabled`(åˆæ ¼çš„å·¥å…·ç»“æœå§‹ç»ˆæ›¿æ¢ä¸º `hardClear.placeholder`)ã€‚

é»˜è®¤(adaptive):
```json5
{
  agents: { defaults: { contextPruning: { mode: "adaptive" } } }
}
```

ç¦ç”¨:
```json5
{
  agents: { defaults: { contextPruning: { mode: "off" } } }
}
```

é»˜è®¤å€¼(å½“ `mode` ä¸º `"adaptive"` æˆ– `"aggressive"` æ—¶):
- `keepLastAssistants`:`3`
- `softTrimRatio`:`0.3`(ä»… adaptive)
- `hardClearRatio`:`0.5`(ä»… adaptive)
- `minPrunableToolChars`:`50000`(ä»… adaptive)
- `softTrim`:`{ maxChars: 4000, headChars: 1500, tailChars: 1500 }`(ä»… adaptive)
- `hardClear`:`{ enabled: true, placeholder: "[Old tool result content cleared]" }`

ç¤ºä¾‹(aggressive,æœ€å°):
```json5
{
  agents: { defaults: { contextPruning: { mode: "aggressive" } } }
}
```

ç¤ºä¾‹(adaptive è°ƒæ•´):
```json5
{
  agents: {
    defaults: {
      contextPruning: {
        mode: "adaptive",
        keepLastAssistants: 3,
        softTrimRatio: 0.3,
        hardClearRatio: 0.5,
        minPrunableToolChars: 50000,
        softTrim: { maxChars: 4000, headChars: 1500, tailChars: 1500 },
        hardClear: { enabled: true, placeholder: "[Old tool result content cleared]" },
        // å¯é€‰:é™åˆ¶ä¿®å‰ªåˆ°ç‰¹å®šå·¥å…·(deny è·èƒœ;æ”¯æŒ"*"é€šé…ç¬¦)
        tools: { deny: ["browser", "canvas"] },
      }
    }
  }
}
```

æŸ¥çœ‹ [/concepts/session-pruning](/concepts/session-pruning) äº†è§£è¡Œä¸ºè¯¦æƒ…ã€‚

#### `agents.defaults.compaction`(é¢„ç•™ç©ºé—´ + å†…å­˜åˆ·æ–°)

`agents.defaults.compaction.mode` é€‰æ‹©å‹ç¼©æ‘˜è¦ç­–ç•¥ã€‚é»˜è®¤ä¸º `default`;è®¾ç½® `safeguard` ä»¥å¯ç”¨éå¸¸é•¿å†å²çš„åˆ†å—æ‘˜è¦ã€‚æŸ¥çœ‹ [/concepts/compaction](/concepts/compaction)ã€‚

`agents.defaults.compaction.reserveTokensFloor` ä¸º Pi å‹ç¼©å¼ºåˆ¶æ‰§è¡Œæœ€å° `reserveTokens` å€¼(é»˜è®¤:`20000`)ã€‚å°†å…¶è®¾ç½®ä¸º `0` ä»¥ç¦ç”¨ä¸‹é™ã€‚

`agents.defaults.compaction.memoryFlush` åœ¨è‡ªåŠ¨å‹ç¼©ä¹‹å‰è¿è¡Œ**é™é»˜** agentic è½®æ¬¡,æŒ‡ç¤ºæ¨¡å‹å°†æŒä¹…è®°å¿†å­˜å‚¨åˆ°ç£ç›˜(ä¾‹å¦‚ `memory/YYYY-MM-DD.md`)ã€‚å½“ session token ä¼°è®¡è¶…è¿‡å‹ç¼©é™åˆ¶ä»¥ä¸‹çš„è½¯é˜ˆå€¼æ—¶è§¦å‘ã€‚

ä¼ ç»Ÿé»˜è®¤å€¼:
- `memoryFlush.enabled`:`true`
- `memoryFlush.softThresholdTokens`:`4000`
- `memoryFlush.prompt` / `memoryFlush.systemPrompt`:å¸¦ `NO_REPLY` çš„å†…ç½®é»˜è®¤å€¼
- æ³¨æ„:å½“ session workspace ä¸ºåªè¯»æ—¶è·³è¿‡å†…å­˜åˆ·æ–°
  (`agents.defaults.sandbox.workspaceAccess: "ro"` æˆ– `"none"`)ã€‚

ç¤ºä¾‹(è°ƒæ•´):
```json5
{
  agents: {
    defaults: {
      compaction: {
        mode: "safeguard",
        reserveTokensFloor: 24000,
        memoryFlush: {
          enabled: true,
          softThresholdTokens: 6000,
          systemPrompt: "Session nearing compaction. Store durable memories now.",
          prompt: "Write any lasting notes to memory/YYYY-MM-DD.md; reply with NO_REPLY if nothing to store."
        }
      }
    }
  }
}
```

Block streaming (å—æµå¼ä¼ è¾“):
- `agents.defaults.blockStreamingDefault`:`"on"`/`"off"`(é»˜è®¤ off)ã€‚
- Channel è¦†ç›–:`*.blockStreaming`(å’Œæ¯è´¦æˆ·å˜ä½“)å¼ºåˆ¶å¯ç”¨/ç¦ç”¨å—æµå¼ä¼ è¾“ã€‚
  é Telegram channels éœ€è¦æ˜¾å¼ `*.blockStreaming: true` æ¥å¯ç”¨å—å›å¤ã€‚
- `agents.defaults.blockStreamingBreak`:`"text_end"` æˆ– `"message_end"`(é»˜è®¤:text_end)ã€‚
- `agents.defaults.blockStreamingChunk`:æµå¼å—çš„è½¯åˆ†å—ã€‚é»˜è®¤ä¸º 800â€“1200 å­—ç¬¦,é¦–é€‰æ®µè½åˆ†éš”(`\n\n`),ç„¶åæ˜¯æ¢è¡Œç¬¦,ç„¶åæ˜¯å¥å­ã€‚
  ç¤ºä¾‹:
  ```json5
  {
    agents: { defaults: { blockStreamingChunk: { minChars: 800, maxChars: 1200 } } }
  }
  ```
- `agents.defaults.blockStreamingCoalesce`:åœ¨å‘é€ä¹‹å‰åˆå¹¶æµå¼å—ã€‚
  é»˜è®¤ä¸º `{ idleMs: 1000 }` å¹¶ä» `blockStreamingChunk` ç»§æ‰¿ `minChars`,`maxChars` é™åˆ¶ä¸º channel æ–‡æœ¬é™åˆ¶ã€‚Signal/Slack/Discord/Google Chat é»˜è®¤ä¸º `minChars: 1500`,é™¤éè¦†ç›–ã€‚
  Channel è¦†ç›–:`channels.whatsapp.blockStreamingCoalesce`ã€`channels.telegram.blockStreamingCoalesce`ã€`channels.discord.blockStreamingCoalesce`ã€`channels.slack.blockStreamingCoalesce`ã€`channels.mattermost.blockStreamingCoalesce`ã€`channels.signal.blockStreamingCoalesce`ã€`channels.imessage.blockStreamingCoalesce`ã€`channels.msteams.blockStreamingCoalesce`ã€`channels.googlechat.blockStreamingCoalesce`
  (å’Œæ¯è´¦æˆ·å˜ä½“)ã€‚
- `agents.defaults.humanDelay`:ç¬¬ä¸€ä¸ªä¹‹åçš„**å—å›å¤**ä¹‹é—´çš„éšæœºæš‚åœã€‚
  æ¨¡å¼:`off`(é»˜è®¤)ã€`natural`(800â€“2500ms)ã€`custom`(ä½¿ç”¨ `minMs`/`maxMs`)ã€‚
  æ¯ agent è¦†ç›–:`agents.list[].humanDelay`ã€‚
  ç¤ºä¾‹:
  ```json5
  {
    agents: { defaults: { humanDelay: { mode: "natural" } } }
  }
  ```
æŸ¥çœ‹ [/concepts/streaming](/concepts/streaming) äº†è§£è¡Œä¸º + åˆ†å—è¯¦æƒ…ã€‚

Typing indicators (è¾“å…¥æŒ‡ç¤ºå™¨):
- `agents.defaults.typingMode`:`"never" | "instant" | "thinking" | "message"`ã€‚å¯¹äºç›´æ¥èŠå¤©/æåŠé»˜è®¤ä¸º `instant`,å¯¹äºæœªæåŠçš„ç¾¤ç»„èŠå¤©é»˜è®¤ä¸º `message`ã€‚
- `session.typingMode`:æ¨¡å¼çš„æ¯ session è¦†ç›–ã€‚
- `agents.defaults.typingIntervalSeconds`:è¾“å…¥ä¿¡å·åˆ·æ–°é¢‘ç‡(é»˜è®¤:6s)ã€‚
- `session.typingIntervalSeconds`:åˆ·æ–°é—´éš”çš„æ¯ session è¦†ç›–ã€‚
æŸ¥çœ‹ [/concepts/typing-indicators](/concepts/typing-indicators) äº†è§£è¡Œä¸ºè¯¦æƒ…ã€‚

`agents.defaults.model.primary` åº”è®¾ç½®ä¸º `provider/model`(ä¾‹å¦‚ `anthropic/claude-opus-4-5`)ã€‚
åˆ«åæ¥è‡ª `agents.defaults.models.*.alias`(ä¾‹å¦‚ `Opus`)ã€‚
å¦‚æœä½ çœç•¥ provider,OpenClaw å½“å‰å‡å®š `anthropic` ä½œä¸ºä¸´æ—¶å¼ƒç”¨å›é€€ã€‚
Z.AI æ¨¡å‹å¯ç”¨ä¸º `zai/<model>`(ä¾‹å¦‚ `zai/glm-4.7`)å¹¶éœ€è¦ç¯å¢ƒä¸­çš„ `ZAI_API_KEY`(æˆ–ä¼ ç»Ÿ `Z_AI_API_KEY`)ã€‚

`agents.defaults.heartbeat` é…ç½®å®šæœŸå¿ƒè·³è¿è¡Œ:
- `every`:æŒç»­æ—¶é—´å­—ç¬¦ä¸²(`ms`ã€`s`ã€`m`ã€`h`);é»˜è®¤å•ä½åˆ†é’Ÿã€‚é»˜è®¤:`30m`ã€‚è®¾ç½® `0m` ç¦ç”¨ã€‚
- `model`:å¿ƒè·³è¿è¡Œçš„å¯é€‰è¦†ç›–æ¨¡å‹(`provider/model`)ã€‚
- `includeReasoning`:å½“ `true` æ—¶,å¿ƒè·³è¿˜å°†åœ¨å¯ç”¨æ—¶ä¼ é€’å•ç‹¬çš„ `Reasoning:` æ¶ˆæ¯(ä¸ `/reasoning on` ç›¸åŒçš„å½¢çŠ¶)ã€‚é»˜è®¤:`false`ã€‚
- `session`:ç”¨äºæ§åˆ¶å¿ƒè·³åœ¨å“ªä¸ª session ä¸­è¿è¡Œçš„å¯é€‰ session é”®ã€‚é»˜è®¤:`main`ã€‚
- `to`:å¯é€‰æ”¶ä»¶äººè¦†ç›–(channel ç‰¹å®š id,ä¾‹å¦‚ WhatsApp çš„ E.164ã€Telegram çš„èŠå¤© id)ã€‚
- `target`:å¯é€‰äº¤ä»˜ channel(`last`ã€`whatsapp`ã€`telegram`ã€`discord`ã€`slack`ã€`msteams`ã€`signal`ã€`imessage`ã€`none`)ã€‚é»˜è®¤:`last`ã€‚
- `prompt`:å¿ƒè·³æ­£æ–‡çš„å¯é€‰è¦†ç›–(é»˜è®¤:`Read HEARTBEAT.md if it exists (workspace context). Follow it strictly. Do not infer or repeat old tasks from prior chats. If nothing needs attention, reply HEARTBEAT_OK.`)ã€‚è¦†ç›–æŒ‰åŸæ ·å‘é€;å¦‚æœä½ ä»ç„¶æƒ³è¦è¯»å–æ–‡ä»¶,è¯·åŒ…å« `Read HEARTBEAT.md` è¡Œã€‚
- `ackMaxChars`:äº¤ä»˜å‰ `HEARTBEAT_OK` åå…è®¸çš„æœ€å¤§å­—ç¬¦æ•°(é»˜è®¤:300)ã€‚

æ¯ agent å¿ƒè·³:
- è®¾ç½® `agents.list[].heartbeat` ä»¥å¯ç”¨æˆ–è¦†ç›–ç‰¹å®š agent çš„å¿ƒè·³è®¾ç½®ã€‚
- å¦‚æœä»»ä½• agent æ¡ç›®å®šä¹‰äº† `heartbeat`,**ä»…è¿™äº› agents** è¿è¡Œå¿ƒè·³;defaults æˆä¸ºè¿™äº› agents çš„å…±äº«åŸºçº¿ã€‚

å¿ƒè·³è¿è¡Œå®Œæ•´çš„ agent è½®æ¬¡ã€‚è¾ƒçŸ­çš„é—´éš”æ¶ˆè€—æ›´å¤š tokens;æ³¨æ„ `every`,ä¿æŒ `HEARTBEAT.md` å°,å’Œ/æˆ–é€‰æ‹©æ›´ä¾¿å®œçš„ `model`ã€‚

`tools.exec` é…ç½®åå° exec é»˜è®¤å€¼:
- `backgroundMs`:è‡ªåŠ¨åå°ä¹‹å‰çš„æ—¶é—´(ms,é»˜è®¤ 10000)
- `timeoutSec`:æ­¤è¿è¡Œæ—¶é—´åè‡ªåŠ¨ç»ˆæ­¢(ç§’,é»˜è®¤ 1800)
- `cleanupMs`:åœ¨å†…å­˜ä¸­ä¿ç•™å·²å®Œæˆ sessions çš„æ—¶é—´(ms,é»˜è®¤ 1800000)
- `notifyOnExit`:å½“åå° exec é€€å‡ºæ—¶æ’é˜Ÿç³»ç»Ÿäº‹ä»¶ + è¯·æ±‚å¿ƒè·³(é»˜è®¤ true)
- `applyPatch.enabled`:å¯ç”¨å®éªŒæ€§ `apply_patch`(ä»… OpenAI/OpenAI Codex;é»˜è®¤ false)
- `applyPatch.allowModels`:æ¨¡å‹ ids çš„å¯é€‰ç™½åå•(ä¾‹å¦‚ `gpt-5.2` æˆ– `openai/gpt-5.2`)
æ³¨æ„:`applyPatch` ä»…åœ¨ `tools.exec` ä¸‹ã€‚

`tools.web` é…ç½® web æœç´¢ + è·å–å·¥å…·:
- `tools.web.search.enabled`(é»˜è®¤:å½“å¯†é’¥å­˜åœ¨æ—¶ä¸º true)
- `tools.web.search.apiKey`(æ¨è:é€šè¿‡ `openclaw configure --section web` è®¾ç½®,æˆ–ä½¿ç”¨ `BRAVE_API_KEY` ç¯å¢ƒå˜é‡)
- `tools.web.search.maxResults`(1â€“10,é»˜è®¤ 5)
- `tools.web.search.timeoutSeconds`(é»˜è®¤ 30)
- `tools.web.search.cacheTtlMinutes`(é»˜è®¤ 15)
- `tools.web.fetch.enabled`(é»˜è®¤ true)
- `tools.web.fetch.maxChars`(é»˜è®¤ 50000)
- `tools.web.fetch.timeoutSeconds`(é»˜è®¤ 30)
- `tools.web.fetch.cacheTtlMinutes`(é»˜è®¤ 15)
- `tools.web.fetch.userAgent`(å¯é€‰è¦†ç›–)
- `tools.web.fetch.readability`(é»˜è®¤ true;ç¦ç”¨ä»¥ä»…ä½¿ç”¨åŸºæœ¬ HTML æ¸…ç†)
- `tools.web.fetch.firecrawl.enabled`(é»˜è®¤ true,å½“è®¾ç½® API key æ—¶)
- `tools.web.fetch.firecrawl.apiKey`(å¯é€‰;é»˜è®¤ä¸º `FIRECRAWL_API_KEY`)
- `tools.web.fetch.firecrawl.baseUrl`(é»˜è®¤ https://api.firecrawl.dev)
- `tools.web.fetch.firecrawl.onlyMainContent`(é»˜è®¤ true)
- `tools.web.fetch.firecrawl.maxAgeMs`(å¯é€‰)
- `tools.web.fetch.firecrawl.timeoutSeconds`(å¯é€‰)

`tools.media` é…ç½®å…¥ç«™åª’ä½“ç†è§£(image/audio/video):
- `tools.media.models`:å…±äº«æ¨¡å‹åˆ—è¡¨(capability-tagged;åœ¨æ¯ cap åˆ—è¡¨ä¹‹åä½¿ç”¨)ã€‚
- `tools.media.concurrency`:æœ€å¤§å¹¶å‘ capability è¿è¡Œ(é»˜è®¤ 2)ã€‚
- `tools.media.image` / `tools.media.audio` / `tools.media.video`:
  - `enabled`:é€‰æ‹©é€€å‡ºå¼€å…³(é»˜è®¤ true,å½“é…ç½®æ¨¡å‹æ—¶)ã€‚
  - `prompt`:å¯é€‰æç¤ºè¦†ç›–(image/video è‡ªåŠ¨é™„åŠ  `maxChars` æç¤º)ã€‚
  - `maxChars`:æœ€å¤§è¾“å‡ºå­—ç¬¦(é»˜è®¤ image/video 500;audio æœªè®¾ç½®)ã€‚
  - `maxBytes`:å‘é€çš„æœ€å¤§åª’ä½“å¤§å°(é»˜è®¤:image 10MBã€audio 20MBã€video 50MB)ã€‚
  - `timeoutSeconds`:è¯·æ±‚è¶…æ—¶(é»˜è®¤:image 60sã€audio 60sã€video 120s)ã€‚
  - `language`:å¯é€‰éŸ³é¢‘æç¤ºã€‚
  - `attachments`:é™„ä»¶ç­–ç•¥(`mode`ã€`maxAttachments`ã€`prefer`)ã€‚
  - `scope`:å¸¦ `match.channel`ã€`match.chatType` æˆ– `match.keyPrefix` çš„å¯é€‰é—¨æ§(ç¬¬ä¸€ä¸ªåŒ¹é…è·èƒœ)ã€‚
  - `models`:æ¨¡å‹æ¡ç›®çš„æœ‰åºåˆ—è¡¨;å¤±è´¥æˆ–è¶…å¤§åª’ä½“å›é€€åˆ°ä¸‹ä¸€ä¸ªæ¡ç›®ã€‚
- æ¯ä¸ª `models[]` æ¡ç›®:
  - Provider æ¡ç›®(`type: "provider"` æˆ–çœç•¥):
    - `provider`:API provider id(`openai`ã€`anthropic`ã€`google`/`gemini`ã€`groq` ç­‰)ã€‚
    - `model`:æ¨¡å‹ id è¦†ç›–(image å¿…éœ€;audio providers é»˜è®¤ä¸º `gpt-4o-mini-transcribe`/`whisper-large-v3-turbo`,video é»˜è®¤ä¸º `gemini-3-flash-preview`)ã€‚
    - `profile` / `preferredProfile`:auth é…ç½®æ–‡ä»¶é€‰æ‹©ã€‚
  - CLI æ¡ç›®(`type: "cli"`):
    - `command`:è¦è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚
    - `args`:æ¨¡æ¿åŒ–å‚æ•°(æ”¯æŒ `{{MediaPath}}`ã€`{{Prompt}}`ã€`{{MaxChars}}` ç­‰)ã€‚
  - `capabilities`:ç”¨äºæ§åˆ¶å…±äº«æ¡ç›®çš„å¯é€‰åˆ—è¡¨(`image`ã€`audio`ã€`video`)ã€‚çœç•¥æ—¶çš„é»˜è®¤å€¼:`openai`/`anthropic`/`minimax` â†’ image,`google` â†’ image+audio+video,`groq` â†’ audioã€‚
  - `prompt`ã€`maxChars`ã€`maxBytes`ã€`timeoutSeconds`ã€`language` å¯ä»¥æŒ‰æ¡ç›®è¦†ç›–ã€‚

å¦‚æœæœªé…ç½®æ¨¡å‹(æˆ– `enabled: false`),åˆ™è·³è¿‡ç†è§£;æ¨¡å‹ä»æ¥æ”¶åŸå§‹é™„ä»¶ã€‚

Provider auth éµå¾ªæ ‡å‡†æ¨¡å‹ auth é¡ºåº(auth é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡å¦‚ `OPENAI_API_KEY`/`GROQ_API_KEY`/`GEMINI_API_KEY`,æˆ– `models.providers.*.apiKey`)ã€‚

ç¤ºä¾‹:
```json5
{
  tools: {
    media: {
      audio: {
        enabled: true,
        maxBytes: 20971520,
        scope: {

[truncated - å·²ç¿»è¯‘å‰ 2000 è¡Œå†…å®¹]
