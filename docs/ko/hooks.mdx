---
summary: "Hooks: ëª…ë ¹ì–´ ë° ë¼ì´í”„ì‚¬ì´í´ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ìë™í™”"
read_when:
  - /new, /reset, /stop ë° agent ë¼ì´í”„ì‚¬ì´í´ ì´ë²¤íŠ¸ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ìë™í™”ê°€ í•„ìš”í•  ë•Œ
  - Hookì„ ë¹Œë“œ, ì„¤ì¹˜ ë˜ëŠ” ë””ë²„ê·¸í•˜ê³ ì í•  ë•Œ
---
# Hooks

HooksëŠ” agent ëª…ë ¹ì–´ ë° ì´ë²¤íŠ¸ì— ë°˜ì‘í•˜ì—¬ ì‘ì—…ì„ ìë™í™”í•˜ëŠ” í™•ì¥ ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤. HooksëŠ” ë””ë ‰í† ë¦¬ì—ì„œ ìë™ìœ¼ë¡œ ê²€ìƒ‰ë˜ë©°, OpenClawì˜ skills ì‘ë™ ë°©ì‹ê³¼ ìœ ì‚¬í•˜ê²Œ CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê°œìš” íŒŒì•…í•˜ê¸°

HooksëŠ” íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ì‹¤í–‰ë˜ëŠ” ì‘ì€ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤. ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤:

- **Hooks** (ì´ í˜ì´ì§€): Gateway ë‚´ë¶€ì—ì„œ `/new`, `/reset`, `/stop` ë˜ëŠ” ë¼ì´í”„ì‚¬ì´í´ ì´ë²¤íŠ¸ì™€ ê°™ì€ agent ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
- **Webhooks**: ì™¸ë¶€ ì‹œìŠ¤í…œì´ OpenClawì—ì„œ ì‘ì—…ì„ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì™¸ë¶€ HTTP webhookì…ë‹ˆë‹¤. [Webhook Hooks](/automation/webhook)ë¥¼ ì°¸ì¡°í•˜ê±°ë‚˜ Gmail í—¬í¼ ëª…ë ¹ì–´ë¥¼ ìœ„í•´ `openclaw webhooks`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
  
HooksëŠ” plugin ë‚´ë¶€ì— ë²ˆë“¤ë¡œ í¬í•¨ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. [Plugins](/plugin#plugin-hooks)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€:
- ì„¸ì…˜ì„ ë¦¬ì…‹í•  ë•Œ ë©”ëª¨ë¦¬ ìŠ¤ëƒ…ìƒ· ì €ì¥
- ë¬¸ì œ í•´ê²° ë˜ëŠ” ê·œì • ì¤€ìˆ˜ë¥¼ ìœ„í•œ ëª…ë ¹ì–´ ê°ì‚¬ ì¶”ì  ìœ ì§€
- ì„¸ì…˜ì´ ì‹œì‘ë˜ê±°ë‚˜ ì¢…ë£Œë  ë•Œ í›„ì† ìë™í™” íŠ¸ë¦¬ê±°
- ì´ë²¤íŠ¸ ë°œìƒ ì‹œ agent workspaceì— íŒŒì¼ ì‘ì„± ë˜ëŠ” ì™¸ë¶€ API í˜¸ì¶œ

ì‘ì€ TypeScript í•¨ìˆ˜ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ë©´, hookì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HooksëŠ” ìë™ìœ¼ë¡œ ê²€ìƒ‰ë˜ë©°, CLIë¥¼ í†µí•´ í™œì„±í™”í•˜ê±°ë‚˜ ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê°œìš”

hooks ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- `/new` ëª…ë ¹ì–´ ë°œí–‰ ì‹œ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥
- ê°ì‚¬ë¥¼ ìœ„í•´ ëª¨ë“  ëª…ë ¹ì–´ ê¸°ë¡
- agent ë¼ì´í”„ì‚¬ì´í´ ì´ë²¤íŠ¸ì—ì„œ ì‚¬ìš©ì ì •ì˜ ìë™í™” íŠ¸ë¦¬ê±°
- í•µì‹¬ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  OpenClawì˜ ë™ì‘ í™•ì¥

## ì‹œì‘í•˜ê¸°

### ë²ˆë“¤ Hooks

OpenClawëŠ” ìë™ìœ¼ë¡œ ê²€ìƒ‰ë˜ëŠ” 4ê°œì˜ ë²ˆë“¤ hookê³¼ í•¨ê»˜ ì œê³µë©ë‹ˆë‹¤:

- **ğŸ’¾ session-memory**: `/new` ëª…ë ¹ì–´ ë°œí–‰ ì‹œ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ agent workspace(ê¸°ë³¸ê°’ `~/.openclaw/workspace/memory/`)ì— ì €ì¥í•©ë‹ˆë‹¤
- **ğŸ“ command-logger**: ëª¨ë“  ëª…ë ¹ì–´ ì´ë²¤íŠ¸ë¥¼ `~/.openclaw/logs/commands.log`ì— ê¸°ë¡í•©ë‹ˆë‹¤
- **ğŸš€ boot-md**: gateway ì‹œì‘ ì‹œ `BOOT.md`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤ (ë‚´ë¶€ hooks í™œì„±í™” í•„ìš”)
- **ğŸ˜ˆ soul-evil**: purge ìœˆë„ìš° ì¤‘ ë˜ëŠ” ë¬´ì‘ìœ„ë¡œ ì£¼ì…ëœ `SOUL.md` ì½˜í…ì¸ ë¥¼ `SOUL_EVIL.md`ë¡œ êµì²´í•©ë‹ˆë‹¤

ì‚¬ìš© ê°€ëŠ¥í•œ hooks ëª©ë¡ í™•ì¸:

```bash
openclaw hooks list
```

hook í™œì„±í™”:

```bash
openclaw hooks enable session-memory
```

hook ìƒíƒœ í™•ì¸:

```bash
openclaw hooks check
```

ìƒì„¸ ì •ë³´ í™•ì¸:

```bash
openclaw hooks info session-memory
```

### ì˜¨ë³´ë”©

ì˜¨ë³´ë”© ì¤‘(`openclaw onboard`)ì— ê¶Œì¥ hooksë¥¼ í™œì„±í™”í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤. ë§ˆë²•ì‚¬ê°€ ìë™ìœ¼ë¡œ ì í•©í•œ hooksë¥¼ ê²€ìƒ‰í•˜ì—¬ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ì œê³µí•©ë‹ˆë‹¤.

## Hook ê²€ìƒ‰

HooksëŠ” ë‹¤ìŒ ì„¸ ê°œì˜ ë””ë ‰í† ë¦¬ì—ì„œ ìë™ìœ¼ë¡œ ê²€ìƒ‰ë©ë‹ˆë‹¤ (ìš°ì„ ìˆœìœ„ ìˆœì„œ):

1. **Workspace hooks**: `<workspace>/hooks/` (agentë³„, ìµœìš°ì„ ìˆœìœ„)
2. **Managed hooks**: `~/.openclaw/hooks/` (ì‚¬ìš©ì ì„¤ì¹˜, workspace ê°„ ê³µìœ )
3. **Bundled hooks**: `<openclaw>/dist/hooks/bundled/` (OpenClawì™€ í•¨ê»˜ ì œê³µ)

Managed hook ë””ë ‰í† ë¦¬ëŠ” **ë‹¨ì¼ hook** ë˜ëŠ” **hook pack** (íŒ¨í‚¤ì§€ ë””ë ‰í† ë¦¬)ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê° hookì€ ë‹¤ìŒì„ í¬í•¨í•˜ëŠ” ë””ë ‰í† ë¦¬ì…ë‹ˆë‹¤:

```
my-hook/
â”œâ”€â”€ HOOK.md          # ë©”íƒ€ë°ì´í„° + ë¬¸ì„œ
â””â”€â”€ handler.ts       # í•¸ë“¤ëŸ¬ êµ¬í˜„
```

## Hook Packs (npm/archives)

Hook packsëŠ” `package.json`ì˜ `openclaw.hooks`ë¥¼ í†µí•´ í•˜ë‚˜ ì´ìƒì˜ hookì„ ë‚´ë³´ë‚´ëŠ” í‘œì¤€ npm íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜í•©ë‹ˆë‹¤:

```bash
openclaw hooks install <path-or-spec>
```

ì˜ˆì‹œ `package.json`:

```json
{
  "name": "@acme/my-hooks",
  "version": "0.1.0",
  "openclaw": {
    "hooks": ["./hooks/my-hook", "./hooks/other-hook"]
  }
}
```

ê° í•­ëª©ì€ `HOOK.md`ì™€ `handler.ts` (ë˜ëŠ” `index.ts`)ë¥¼ í¬í•¨í•˜ëŠ” hook ë””ë ‰í† ë¦¬ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.
Hook packsëŠ” ì˜ì¡´ì„±ì„ í¬í•¨í•  ìˆ˜ ìˆìœ¼ë©°, `~/.openclaw/hooks/<id>` ì•„ë˜ì— ì„¤ì¹˜ë©ë‹ˆë‹¤.

## Hook êµ¬ì¡°

### HOOK.md í˜•ì‹

`HOOK.md` íŒŒì¼ì€ YAML frontmatterì˜ ë©”íƒ€ë°ì´í„°ì™€ Markdown ë¬¸ì„œë¥¼ í¬í•¨í•©ë‹ˆë‹¤:

```markdown
---
name: my-hook
description: "ì´ hookì´ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…"
homepage: https://docs.openclaw.ai/hooks#my-hook
metadata: {"openclaw":{"emoji":"ğŸ”—","events":["command:new"],"requires":{"bins":["node"]}}}
---

# My Hook

ìƒì„¸ ë¬¸ì„œëŠ” ì—¬ê¸°ì—...

## ìˆ˜í–‰ ì‘ì—…

- `/new` ëª…ë ¹ì–´ ìˆ˜ì‹ 
- ì¼ë¶€ ì‘ì—… ìˆ˜í–‰
- ê²°ê³¼ ê¸°ë¡

## ìš”êµ¬ì‚¬í•­

- Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤

## ì„¤ì •

ì„¤ì •ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
```

### ë©”íƒ€ë°ì´í„° í•„ë“œ

`metadata.openclaw` ê°ì²´ëŠ” ë‹¤ìŒì„ ì§€ì›í•©ë‹ˆë‹¤:

- **`emoji`**: CLIìš© í‘œì‹œ ì´ëª¨ì§€ (ì˜ˆ: `"ğŸ’¾"`)
- **`events`**: ìˆ˜ì‹ í•  ì´ë²¤íŠ¸ ë°°ì—´ (ì˜ˆ: `["command:new", "command:reset"]`)
- **`export`**: ì‚¬ìš©í•  ëª…ëª…ëœ export (ê¸°ë³¸ê°’ `"default"`)
- **`homepage`**: ë¬¸ì„œ URL
- **`requires`**: ì„ íƒì  ìš”êµ¬ì‚¬í•­
  - **`bins`**: PATHì— í•„ìš”í•œ ë°”ì´ë„ˆë¦¬ (ì˜ˆ: `["git", "node"]`)
  - **`anyBins`**: ì´ ë°”ì´ë„ˆë¦¬ ì¤‘ ìµœì†Œ í•˜ë‚˜ê°€ ìˆì–´ì•¼ í•¨
  - **`env`**: í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜
  - **`config`**: í•„ìš”í•œ config ê²½ë¡œ (ì˜ˆ: `["workspace.dir"]`)
  - **`os`**: í•„ìš”í•œ í”Œë«í¼ (ì˜ˆ: `["darwin", "linux"]`)
- **`always`**: ì ê²©ì„± ê²€ì‚¬ ìš°íšŒ (boolean)
- **`install`**: ì„¤ì¹˜ ë°©ë²• (ë²ˆë“¤ hooksì˜ ê²½ìš°: `[{"id":"bundled","kind":"bundled"}]`)

### í•¸ë“¤ëŸ¬ êµ¬í˜„

`handler.ts` íŒŒì¼ì€ `HookHandler` í•¨ìˆ˜ë¥¼ ë‚´ë³´ëƒ…ë‹ˆë‹¤:

```typescript
import type { HookHandler } from '../../src/hooks/hooks.js';

const myHandler: HookHandler = async (event) => {
  // 'new' ëª…ë ¹ì–´ì—ë§Œ íŠ¸ë¦¬ê±°
  if (event.type !== 'command' || event.action !== 'new') {
    return;
  }

  console.log(`[my-hook] New ëª…ë ¹ì–´ íŠ¸ë¦¬ê±°ë¨`);
  console.log(`  Session: ${event.sessionKey}`);
  console.log(`  Timestamp: ${event.timestamp.toISOString()}`);

  // ì‚¬ìš©ì ì •ì˜ ë¡œì§

  // ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
  event.messages.push('âœ¨ My hookì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
};

export default myHandler;
```

#### ì´ë²¤íŠ¸ ì»¨í…ìŠ¤íŠ¸

ê° ì´ë²¤íŠ¸ëŠ” ë‹¤ìŒì„ í¬í•¨í•©ë‹ˆë‹¤:

```typescript
{
  type: 'command' | 'session' | 'agent' | 'gateway',
  action: string,              // ì˜ˆ: 'new', 'reset', 'stop'
  sessionKey: string,          // Session ì‹ë³„ì
  timestamp: Date,             // ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°
  messages: string[],          // ì‚¬ìš©ìì—ê²Œ ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì—¬ê¸°ì— ì¶”ê°€
  context: {
    sessionEntry?: SessionEntry,
    sessionId?: string,
    sessionFile?: string,
    commandSource?: string,    // ì˜ˆ: 'whatsapp', 'telegram'
    senderId?: string,
    workspaceDir?: string,
    bootstrapFiles?: WorkspaceBootstrapFile[],
    cfg?: OpenClawConfig
  }
}
```

## ì´ë²¤íŠ¸ íƒ€ì…

### Command ì´ë²¤íŠ¸

agent ëª…ë ¹ì–´ê°€ ë°œí–‰ë  ë•Œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤:

- **`command`**: ëª¨ë“  ëª…ë ¹ì–´ ì´ë²¤íŠ¸ (ì¼ë°˜ ë¦¬ìŠ¤ë„ˆ)
- **`command:new`**: `/new` ëª…ë ¹ì–´ê°€ ë°œí–‰ë  ë•Œ
- **`command:reset`**: `/reset` ëª…ë ¹ì–´ê°€ ë°œí–‰ë  ë•Œ
- **`command:stop`**: `/stop` ëª…ë ¹ì–´ê°€ ë°œí–‰ë  ë•Œ

### Agent ì´ë²¤íŠ¸

- **`agent:bootstrap`**: workspace bootstrap íŒŒì¼ì´ ì£¼ì…ë˜ê¸° ì „ (hooksëŠ” `context.bootstrapFiles`ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŒ)

### Gateway ì´ë²¤íŠ¸

gatewayê°€ ì‹œì‘ë  ë•Œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤:

- **`gateway:startup`**: channelì´ ì‹œì‘ë˜ê³  hooksê°€ ë¡œë“œëœ í›„

### Tool Result Hooks (Plugin API)

ì´ hooksëŠ” ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ ë¦¬ìŠ¤ë„ˆê°€ ì•„ë‹™ë‹ˆë‹¤. OpenClawê°€ ê²°ê³¼ë¥¼ ìœ ì§€í•˜ê¸° ì „ì— pluginì´ tool ê²°ê³¼ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì¡°ì •í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

- **`tool_result_persist`**: tool ê²°ê³¼ê°€ ì„¸ì…˜ íŠ¸ëœìŠ¤í¬ë¦½íŠ¸ì— ì‘ì„±ë˜ê¸° ì „ì— ë³€í™˜í•©ë‹ˆë‹¤. ë™ê¸°ì‹ì´ì–´ì•¼ í•˜ë©°, ì—…ë°ì´íŠ¸ëœ tool result payload ë˜ëŠ” `undefined`ë¥¼ ë°˜í™˜í•˜ì—¬ ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. [Agent Loop](/concepts/agent-loop)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

### í–¥í›„ ì´ë²¤íŠ¸

ê³„íšëœ ì´ë²¤íŠ¸ íƒ€ì…:

- **`session:start`**: ìƒˆ ì„¸ì…˜ì´ ì‹œì‘ë  ë•Œ
- **`session:end`**: ì„¸ì…˜ì´ ì¢…ë£Œë  ë•Œ
- **`agent:error`**: agentì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ë•Œ
- **`message:sent`**: ë©”ì‹œì§€ê°€ ì „ì†¡ë  ë•Œ
- **`message:received`**: ë©”ì‹œì§€ê°€ ìˆ˜ì‹ ë  ë•Œ

## ì‚¬ìš©ì ì •ì˜ Hooks ìƒì„±

### 1. ìœ„ì¹˜ ì„ íƒ

- **Workspace hooks** (`<workspace>/hooks/`): agentë³„, ìµœìš°ì„ ìˆœìœ„
- **Managed hooks** (`~/.openclaw/hooks/`): workspace ê°„ ê³µìœ 

### 2. ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±

```bash
mkdir -p ~/.openclaw/hooks/my-hook
cd ~/.openclaw/hooks/my-hook
```

### 3. HOOK.md ìƒì„±

```markdown
---
name: my-hook
description: "ìœ ìš©í•œ ì‘ì—… ìˆ˜í–‰"
metadata: {"openclaw":{"emoji":"ğŸ¯","events":["command:new"]}}
---

# My Custom Hook

ì´ hookì€ `/new` ëª…ë ¹ì–´ ë°œí–‰ ì‹œ ìœ ìš©í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
```

### 4. handler.ts ìƒì„±

```typescript
import type { HookHandler } from '../../src/hooks/hooks.js';

const handler: HookHandler = async (event) => {
  if (event.type !== 'command' || event.action !== 'new') {
    return;
  }

  console.log('[my-hook] ì‹¤í–‰ ì¤‘!');
  // ë¡œì§ ì‘ì„±
};

export default handler;
```

### 5. í™œì„±í™” ë° í…ŒìŠ¤íŠ¸

```bash
# hookì´ ê²€ìƒ‰ë˜ì—ˆëŠ”ì§€ í™•ì¸
openclaw hooks list

# í™œì„±í™”
openclaw hooks enable my-hook

# gateway í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘ (macOSì—ì„œëŠ” ë©”ë‰´ ë°” ì•± ì¬ì‹œì‘ ë˜ëŠ” ê°œë°œ í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘)

# ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°
# ë©”ì‹œì§• channelì„ í†µí•´ /new ì „ì†¡
```

## ì„¤ì •

### ìƒˆë¡œìš´ Config í˜•ì‹ (ê¶Œì¥)

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "entries": {
        "session-memory": { "enabled": true },
        "command-logger": { "enabled": false }
      }
    }
  }
}
```

### Hookë³„ ì„¤ì •

HooksëŠ” ì‚¬ìš©ì ì •ì˜ ì„¤ì •ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "entries": {
        "my-hook": {
          "enabled": true,
          "env": {
            "MY_CUSTOM_VAR": "value"
          }
        }
      }
    }
  }
}
```

### ì¶”ê°€ ë””ë ‰í† ë¦¬

ì¶”ê°€ ë””ë ‰í† ë¦¬ì—ì„œ hooks ë¡œë“œ:

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "load": {
        "extraDirs": ["/path/to/more/hooks"]
      }
    }
  }
}
```

### ë ˆê±°ì‹œ Config í˜•ì‹ (ì—¬ì „íˆ ì§€ì›ë¨)

ì´ì „ config í˜•ì‹ì€ í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ì—¬ì „íˆ ì‘ë™í•©ë‹ˆë‹¤:

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "handlers": [
        {
          "event": "command:new",
          "module": "./hooks/handlers/my-handler.ts",
          "export": "default"
        }
      ]
    }
  }
}
```

**ë§ˆì´ê·¸ë ˆì´ì…˜**: ìƒˆë¡œìš´ hooksì—ëŠ” ê²€ìƒ‰ ê¸°ë°˜ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ì„¸ìš”. ë ˆê±°ì‹œ í•¸ë“¤ëŸ¬ëŠ” ë””ë ‰í† ë¦¬ ê¸°ë°˜ hooks ì´í›„ì— ë¡œë“œë©ë‹ˆë‹¤.

## CLI ëª…ë ¹ì–´

### Hooks ëª©ë¡

```bash
# ëª¨ë“  hooks ëª©ë¡
openclaw hooks list

# ì ê²© hooksë§Œ í‘œì‹œ
openclaw hooks list --eligible

# ìƒì„¸ ì¶œë ¥ (ëˆ„ë½ëœ ìš”êµ¬ì‚¬í•­ í‘œì‹œ)
openclaw hooks list --verbose

# JSON ì¶œë ¥
openclaw hooks list --json
```

### Hook ì •ë³´

```bash
# hookì— ëŒ€í•œ ìƒì„¸ ì •ë³´ í‘œì‹œ
openclaw hooks info session-memory

# JSON ì¶œë ¥
openclaw hooks info session-memory --json
```

### ì ê²©ì„± í™•ì¸

```bash
# ì ê²©ì„± ìš”ì•½ í‘œì‹œ
openclaw hooks check

# JSON ì¶œë ¥
openclaw hooks check --json
```

### í™œì„±í™”/ë¹„í™œì„±í™”

```bash
# hook í™œì„±í™”
openclaw hooks enable session-memory

# hook ë¹„í™œì„±í™”
openclaw hooks disable command-logger
```

## ë²ˆë“¤ Hooks

### session-memory

`/new` ëª…ë ¹ì–´ ë°œí–‰ ì‹œ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•©ë‹ˆë‹¤.

**ì´ë²¤íŠ¸**: `command:new`

**ìš”êµ¬ì‚¬í•­**: `workspace.dir`ì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨

**ì¶œë ¥**: `<workspace>/memory/YYYY-MM-DD-slug.md` (ê¸°ë³¸ê°’ `~/.openclaw/workspace`)

**ìˆ˜í–‰ ì‘ì—…**:
1. ë¦¬ì…‹ ì „ ì„¸ì…˜ í•­ëª©ì„ ì‚¬ìš©í•˜ì—¬ ì˜¬ë°”ë¥¸ íŠ¸ëœìŠ¤í¬ë¦½íŠ¸ ì°¾ê¸°
2. ëŒ€í™”ì˜ ë§ˆì§€ë§‰ 15ì¤„ ì¶”ì¶œ
3. LLMì„ ì‚¬ìš©í•˜ì—¬ ì„¤ëª…ì ì¸ íŒŒì¼ëª… slug ìƒì„±
4. ë‚ ì§œê°€ í¬í•¨ëœ ë©”ëª¨ë¦¬ íŒŒì¼ì— ì„¸ì…˜ ë©”íƒ€ë°ì´í„° ì €ì¥

**ì¶œë ¥ ì˜ˆì‹œ**:

```markdown
# Session: 2026-01-16 14:30:00 UTC

- **Session Key**: agent:main:main
- **Session ID**: abc123def456
- **Source**: telegram
```

**íŒŒì¼ëª… ì˜ˆì‹œ**:
- `2026-01-16-vendor-pitch.md`
- `2026-01-16-api-design.md`
- `2026-01-16-1430.md` (slug ìƒì„± ì‹¤íŒ¨ ì‹œ íƒ€ì„ìŠ¤íƒ¬í”„ í´ë°±)

**í™œì„±í™”**:

```bash
openclaw hooks enable session-memory
```

### command-logger

ëª¨ë“  ëª…ë ¹ì–´ ì´ë²¤íŠ¸ë¥¼ ì¤‘ì•™ ì§‘ì¤‘ì‹ ê°ì‚¬ íŒŒì¼ì— ê¸°ë¡í•©ë‹ˆë‹¤.

**ì´ë²¤íŠ¸**: `command`

**ìš”êµ¬ì‚¬í•­**: ì—†ìŒ

**ì¶œë ¥**: `~/.openclaw/logs/commands.log`

**ìˆ˜í–‰ ì‘ì—…**:
1. ì´ë²¤íŠ¸ ì„¸ë¶€ ì •ë³´ ìº¡ì²˜ (ëª…ë ¹ì–´ ë™ì‘, íƒ€ì„ìŠ¤íƒ¬í”„, ì„¸ì…˜ í‚¤, ë°œì‹ ì ID, ì†ŒìŠ¤)
2. JSONL í˜•ì‹ìœ¼ë¡œ ë¡œê·¸ íŒŒì¼ì— ì¶”ê°€
3. ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì¡°ìš©íˆ ì‹¤í–‰

**ë¡œê·¸ í•­ëª© ì˜ˆì‹œ**:

```jsonl
{"timestamp":"2026-01-16T14:30:00.000Z","action":"new","sessionKey":"agent:main:main","senderId":"+1234567890","source":"telegram"}
{"timestamp":"2026-01-16T15:45:22.000Z","action":"stop","sessionKey":"agent:main:main","senderId":"user@example.com","source":"whatsapp"}
```

**ë¡œê·¸ í™•ì¸**:

```bash
# ìµœê·¼ ëª…ë ¹ì–´ í™•ì¸
tail -n 20 ~/.openclaw/logs/commands.log

# jqë¡œ ì˜ˆì˜ê²Œ ì¶œë ¥
cat ~/.openclaw/logs/commands.log | jq .

# ë™ì‘ë³„ í•„í„°ë§
grep '"action":"new"' ~/.openclaw/logs/commands.log | jq .
```

**í™œì„±í™”**:

```bash
openclaw hooks enable command-logger
```

### soul-evil

purge ìœˆë„ìš° ì¤‘ ë˜ëŠ” ë¬´ì‘ìœ„ë¡œ ì£¼ì…ëœ `SOUL.md` ì½˜í…ì¸ ë¥¼ `SOUL_EVIL.md`ë¡œ êµì²´í•©ë‹ˆë‹¤.

**ì´ë²¤íŠ¸**: `agent:bootstrap`

**ë¬¸ì„œ**: [SOUL Evil Hook](/hooks/soul-evil)

**ì¶œë ¥**: íŒŒì¼ì´ ì‘ì„±ë˜ì§€ ì•ŠìŒ; êµì²´ëŠ” ë©”ëª¨ë¦¬ ë‚´ì—ì„œë§Œ ë°œìƒí•©ë‹ˆë‹¤.

**í™œì„±í™”**:

```bash
openclaw hooks enable soul-evil
```

**ì„¤ì •**:

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "entries": {
        "soul-evil": {
          "enabled": true,
          "file": "SOUL_EVIL.md",
          "chance": 0.1,
          "purge": { "at": "21:00", "duration": "15m" }
        }
      }
    }
  }
}
```

### boot-md

gateway ì‹œì‘ ì‹œ (channel ì‹œì‘ í›„) `BOOT.md`ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
ì´ ê¸°ëŠ¥ì´ ì‹¤í–‰ë˜ë ¤ë©´ ë‚´ë¶€ hooksê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**ì´ë²¤íŠ¸**: `gateway:startup`

**ìš”êµ¬ì‚¬í•­**: `workspace.dir`ì´ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨

**ìˆ˜í–‰ ì‘ì—…**:
1. workspaceì—ì„œ `BOOT.md` ì½ê¸°
2. agent runnerë¥¼ í†µí•´ ì§€ì¹¨ ì‹¤í–‰
3. message toolì„ í†µí•´ ìš”ì²­ëœ ì•„ì›ƒë°”ìš´ë“œ ë©”ì‹œì§€ ì „ì†¡

**í™œì„±í™”**:

```bash
openclaw hooks enable boot-md
```

## ëª¨ë²” ì‚¬ë¡€

### í•¸ë“¤ëŸ¬ë¥¼ ë¹ ë¥´ê²Œ ìœ ì§€

HooksëŠ” ëª…ë ¹ì–´ ì²˜ë¦¬ ì¤‘ì— ì‹¤í–‰ë©ë‹ˆë‹¤. ê°€ë³ê²Œ ìœ ì§€í•˜ì„¸ìš”:

```typescript
// âœ“ ì¢‹ìŒ - ë¹„ë™ê¸° ì‘ì—…, ì¦‰ì‹œ ë°˜í™˜
const handler: HookHandler = async (event) => {
  void processInBackground(event); // Fire and forget
};

// âœ— ë‚˜ì¨ - ëª…ë ¹ì–´ ì²˜ë¦¬ ì°¨ë‹¨
const handler: HookHandler = async (event) => {
  await slowDatabaseQuery(event);
  await evenSlowerAPICall(event);
};
```

### ì˜¤ë¥˜ë¥¼ ìš°ì•„í•˜ê²Œ ì²˜ë¦¬

ìœ„í—˜í•œ ì‘ì—…ì€ í•­ìƒ ë˜í•‘í•˜ì„¸ìš”:

```typescript
const handler: HookHandler = async (event) => {
  try {
    await riskyOperation(event);
  } catch (err) {
    console.error('[my-handler] ì‹¤íŒ¨:', err instanceof Error ? err.message : String(err));
    // throwí•˜ì§€ ë§ˆì„¸ìš” - ë‹¤ë¥¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ë„ë¡ í—ˆìš©
  }
};
```

### ì´ë²¤íŠ¸ë¥¼ ì¼ì° í•„í„°ë§

ê´€ë ¨ ì—†ëŠ” ì´ë²¤íŠ¸ëŠ” ì¡°ê¸°ì— ë°˜í™˜í•˜ì„¸ìš”:

```typescript
const handler: HookHandler = async (event) => {
  // 'new' ëª…ë ¹ì–´ë§Œ ì²˜ë¦¬
  if (event.type !== 'command' || event.action !== 'new') {
    return;
  }

  // ë¡œì§ ì‘ì„±
};
```

### íŠ¹ì • ì´ë²¤íŠ¸ í‚¤ ì‚¬ìš©

ê°€ëŠ¥í•œ ê²½ìš° ë©”íƒ€ë°ì´í„°ì—ì„œ ì •í™•í•œ ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•˜ì„¸ìš”:

```yaml
metadata: {"openclaw":{"events":["command:new"]}}  # íŠ¹ì •
```

ë‹¤ìŒë³´ë‹¤ëŠ”:

```yaml
metadata: {"openclaw":{"events":["command"]}}      # ì¼ë°˜ - ë” ë§ì€ ì˜¤ë²„í—¤ë“œ
```

## ë””ë²„ê¹…

### Hook ë¡œê¹… í™œì„±í™”

gatewayëŠ” ì‹œì‘ ì‹œ hook ë¡œë”©ì„ ê¸°ë¡í•©ë‹ˆë‹¤:

```
Registered hook: session-memory -> command:new
Registered hook: command-logger -> command
Registered hook: boot-md -> gateway:startup
```

### ê²€ìƒ‰ í™•ì¸

ê²€ìƒ‰ëœ ëª¨ë“  hooks ëª©ë¡:

```bash
openclaw hooks list --verbose
```

### ë“±ë¡ í™•ì¸

í•¸ë“¤ëŸ¬ì—ì„œ í˜¸ì¶œë  ë•Œ ê¸°ë¡í•˜ì„¸ìš”:

```typescript
const handler: HookHandler = async (event) => {
  console.log('[my-handler] íŠ¸ë¦¬ê±°ë¨:', event.type, event.action);
  // ë¡œì§ ì‘ì„±
};
```

### ì ê²©ì„± í™•ì¸

hookì´ ì ê²©í•˜ì§€ ì•Šì€ ì´ìœ  í™•ì¸:

```bash
openclaw hooks info my-hook
```

ì¶œë ¥ì—ì„œ ëˆ„ë½ëœ ìš”êµ¬ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”.

## í…ŒìŠ¤íŠ¸

### Gateway ë¡œê·¸

gateway ë¡œê·¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì—¬ hook ì‹¤í–‰ í™•ì¸:

```bash
# macOS
./scripts/clawlog.sh -f

# ê¸°íƒ€ í”Œë«í¼
tail -f ~/.openclaw/gateway.log
```

### Hooks ì§ì ‘ í…ŒìŠ¤íŠ¸

í•¸ë“¤ëŸ¬ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:

```typescript
import { test } from 'vitest';
import { createHookEvent } from './src/hooks/hooks.js';
import myHandler from './hooks/my-hook/handler.js';

test('my handler works', async () => {
  const event = createHookEvent('command', 'new', 'test-session', {
    foo: 'bar'
  });

  await myHandler(event);

  // ë¶€ì‘ìš© í™•ì¸
});
```

## ì•„í‚¤í…ì²˜

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

- **`src/hooks/types.ts`**: íƒ€ì… ì •ì˜
- **`src/hooks/workspace.ts`**: ë””ë ‰í† ë¦¬ ìŠ¤ìº” ë° ë¡œë”©
- **`src/hooks/frontmatter.ts`**: HOOK.md ë©”íƒ€ë°ì´í„° íŒŒì‹±
- **`src/hooks/config.ts`**: ì ê²©ì„± ê²€ì‚¬
- **`src/hooks/hooks-status.ts`**: ìƒíƒœ ë³´ê³ 
- **`src/hooks/loader.ts`**: ë™ì  ëª¨ë“ˆ ë¡œë”
- **`src/cli/hooks-cli.ts`**: CLI ëª…ë ¹ì–´
- **`src/gateway/server-startup.ts`**: gateway ì‹œì‘ ì‹œ hooks ë¡œë“œ
- **`src/auto-reply/reply/commands-core.ts`**: ëª…ë ¹ì–´ ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±°

### ê²€ìƒ‰ íë¦„

```
Gateway ì‹œì‘
    â†“
ë””ë ‰í† ë¦¬ ìŠ¤ìº” (workspace â†’ managed â†’ bundled)
    â†“
HOOK.md íŒŒì¼ íŒŒì‹±
    â†“
ì ê²©ì„± í™•ì¸ (bins, env, config, os)
    â†“
ì ê²© hooksì—ì„œ í•¸ë“¤ëŸ¬ ë¡œë“œ
    â†“
ì´ë²¤íŠ¸ì— í•¸ë“¤ëŸ¬ ë“±ë¡
```

### ì´ë²¤íŠ¸ íë¦„

```
ì‚¬ìš©ìê°€ /new ì „ì†¡
    â†“
ëª…ë ¹ì–´ ìœ íš¨ì„± ê²€ì‚¬
    â†“
hook ì´ë²¤íŠ¸ ìƒì„±
    â†“
hook íŠ¸ë¦¬ê±° (ë“±ë¡ëœ ëª¨ë“  í•¸ë“¤ëŸ¬)
    â†“
ëª…ë ¹ì–´ ì²˜ë¦¬ ê³„ì†
    â†“
ì„¸ì…˜ ë¦¬ì…‹
```

## ë¬¸ì œ í•´ê²°

### Hookì´ ê²€ìƒ‰ë˜ì§€ ì•ŠìŒ

1. ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸:
   ```bash
   ls -la ~/.openclaw/hooks/my-hook/
   # ë‹¤ìŒì´ í‘œì‹œë˜ì–´ì•¼ í•¨: HOOK.md, handler.ts
   ```

2. HOOK.md í˜•ì‹ í™•ì¸:
   ```bash
   cat ~/.openclaw/hooks/my-hook/HOOK.md
   # nameê³¼ metadataê°€ ìˆëŠ” YAML frontmatterê°€ ìˆì–´ì•¼ í•¨
   ```

3. ê²€ìƒ‰ëœ ëª¨ë“  hooks ëª©ë¡:
   ```bash
   openclaw hooks list
   ```

### Hookì´ ì ê²©í•˜ì§€ ì•ŠìŒ

ìš”êµ¬ì‚¬í•­ í™•ì¸:

```bash
openclaw hooks info my-hook
```

ë‹¤ìŒì´ ëˆ„ë½ë˜ì—ˆëŠ”ì§€ í™•ì¸:
- ë°”ì´ë„ˆë¦¬ (PATH í™•ì¸)
- í™˜ê²½ ë³€ìˆ˜
- Config ê°’
- OS í˜¸í™˜ì„±

### Hookì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

1. hookì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸:
   ```bash
   openclaw hooks list
   # í™œì„±í™”ëœ hooks ì˜†ì— âœ“ê°€ í‘œì‹œë˜ì–´ì•¼ í•¨
   ```

2. hooksê°€ ë‹¤ì‹œ ë¡œë“œë˜ë„ë¡ gateway í”„ë¡œì„¸ìŠ¤ë¥¼ ì¬ì‹œì‘í•˜ì„¸ìš”.

3. ì˜¤ë¥˜ê°€ ìˆëŠ”ì§€ gateway ë¡œê·¸ í™•ì¸:
   ```bash
   ./scripts/clawlog.sh | grep hook
   ```

### í•¸ë“¤ëŸ¬ ì˜¤ë¥˜

TypeScript/import ì˜¤ë¥˜ í™•ì¸:

```bash
# importë¥¼ ì§ì ‘ í…ŒìŠ¤íŠ¸
node -e "import('./path/to/handler.ts').then(console.log)"
```

## ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

### ë ˆê±°ì‹œ Configì—ì„œ ê²€ìƒ‰ìœ¼ë¡œ

**ì´ì „**:

```json
{
  "hooks": {
    "internal": {
      "enabled": true,
      "handlers": [
        {
          "event": "command:new",
          "module": "./hooks/handlers/my-handler.ts"
        }
      ]
    }
  }
}
```

**ì´í›„**:

1. hook ë””ë ‰í† ë¦¬ ìƒì„±:
   ```bash
   mkdir -p ~/.openclaw/hooks/my-hook
   mv ./hooks/handlers/my-handler.ts ~/.openclaw/hooks/my-hook/handler.ts
   ```

2. HOOK.md ìƒì„±:
   ```markdown
   ---
   name: my-hook
   description: "My custom hook"
   metadata: {"openclaw":{"emoji":"ğŸ¯","events":["command:new"]}}
   ---

   # My Hook

   ìœ ìš©í•œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
   ```

3. config ì—…ë°ì´íŠ¸:
   ```json
   {
     "hooks": {
       "internal": {
         "enabled": true,
         "entries": {
           "my-hook": { "enabled": true }
         }
       }
     }
   }
   ```

4. í™•ì¸ ë° gateway í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘:
   ```bash
   openclaw hooks list
   # ë‹¤ìŒì´ í‘œì‹œë˜ì–´ì•¼ í•¨: ğŸ¯ my-hook âœ“
   ```

**ë§ˆì´ê·¸ë ˆì´ì…˜ì˜ ì´ì **:
- ìë™ ê²€ìƒ‰
- CLI ê´€ë¦¬
- ì ê²©ì„± ê²€ì‚¬
- ë” ë‚˜ì€ ë¬¸ì„œ
- ì¼ê´€ëœ êµ¬ì¡°

## ì°¸ê³ 

- [CLI ë ˆí¼ëŸ°ìŠ¤: hooks](/cli/hooks)
- [ë²ˆë“¤ Hooks README](https://github.com/openclaw/openclaw/tree/main/src/hooks/bundled)
- [Webhook Hooks](/automation/webhook)
- [ì„¤ì •](/gateway/configuration#hooks)
