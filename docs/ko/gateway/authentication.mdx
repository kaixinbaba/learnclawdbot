---
summary: "Model 인증: OAuth, API key 및 setup-token"
read_when:
  - Model 인증 또는 OAuth 만료를 디버깅할 때
  - 인증 또는 인증 정보 저장을 문서화할 때
---
# 인증

OpenClaw는 model provider에 대해 OAuth 및 API key를 지원합니다. Anthropic 계정의 경우 **API key** 사용을 권장합니다. Claude subscription 액세스의 경우 `claude setup-token`으로 생성된 장기 토큰을 사용하세요.

전체 OAuth 플로우 및 저장 레이아웃은 [/concepts/oauth](/concepts/oauth)를 참조하세요.

## 권장 Anthropic 설정 (API key)

Anthropic을 직접 사용하는 경우 API key를 사용하세요.

1) Anthropic Console에서 API key를 생성합니다.
2) **gateway 호스트**(`openclaw gateway`를 실행하는 머신)에 배치합니다.

```bash
export ANTHROPIC_API_KEY="..."
openclaw models status
```

3) Gateway가 systemd/launchd 하에서 실행되는 경우 daemon이 읽을 수 있도록 `~/.openclaw/.env`에 키를 넣는 것을 선호합니다:

```bash
cat >> ~/.openclaw/.env <<'EOF'
ANTHROPIC_API_KEY=...
EOF
```

그런 다음 daemon을 재시작하고(또는 Gateway 프로세스를 재시작하고) 다시 확인하세요:

```bash
openclaw models status
openclaw doctor
```

env var를 직접 관리하고 싶지 않은 경우 onboarding 마법사가 daemon 사용을 위해 API key를 저장할 수 있습니다: `openclaw onboard`.

Env 상속(`env.shellEnv`, `~/.openclaw/.env`, systemd/launchd)에 대한 자세한 내용은 [Help](/help)를 참조하세요.

## Anthropic: setup-token (subscription 인증)

Anthropic의 경우 권장 경로는 **API key**입니다. Claude subscription을 사용하는 경우 setup-token 플로우도 지원됩니다. **gateway 호스트**에서 실행하세요:

```bash
claude setup-token
```

그런 다음 OpenClaw에 붙여넣으세요:

```bash
openclaw models auth setup-token --provider anthropic
```

토큰이 다른 머신에서 생성된 경우 수동으로 붙여넣으세요:

```bash
openclaw models auth paste-token --provider anthropic
```

다음과 같은 Anthropic 오류가 표시되는 경우:

```
This credential is only authorized for use with Claude Code and cannot be used for other API requests.
```

…대신 Anthropic API key를 사용하세요.

수동 토큰 입력 (모든 provider; `auth-profiles.json` 작성 + config 업데이트):

```bash
openclaw models auth paste-token --provider anthropic
openclaw models auth paste-token --provider openrouter
```

자동화 친화적 체크 (만료/누락 시 `1`로 종료, 만료 예정 시 `2`로 종료):

```bash
openclaw models status --check
```

선택적 ops 스크립트(systemd/Termux)는 여기에 문서화되어 있습니다:
[/automation/auth-monitoring](/automation/auth-monitoring)

> `claude setup-token`은 대화형 TTY가 필요합니다.

## Model 인증 상태 확인

```bash
openclaw models status
openclaw doctor
```

## 사용할 인증 정보 제어

### Session별 (채팅 명령)

`/model <alias-or-id>@<profileId>`를 사용하여 현재 session에 대해 특정 provider 인증 정보를 고정하세요(예시 프로필 id: `anthropic:default`, `anthropic:work`).

간결한 picker를 위해 `/model`(또는 `/model list`)을 사용하세요. 전체 뷰(후보 + 다음 auth 프로필, 구성된 경우 provider endpoint 세부 정보 포함)를 위해 `/model status`를 사용하세요.

### Agent별 (CLI 재정의)

Agent에 대한 명시적 auth 프로필 순서 재정의를 설정하세요(해당 agent의 `auth-profiles.json`에 저장됨):

```bash
openclaw models auth order get --provider anthropic
openclaw models auth order set --provider anthropic anthropic:default
openclaw models auth order clear --provider anthropic
```

특정 agent를 대상으로 하려면 `--agent <id>`를 사용하세요. 생략하면 구성된 기본 agent를 사용합니다.

## 문제 해결

### "인증 정보를 찾을 수 없음"

Anthropic 토큰 프로필이 누락된 경우 **gateway 호스트**에서 `claude setup-token`을 실행한 다음 다시 확인하세요:

```bash
openclaw models status
```

### 토큰 만료 예정/만료됨

`openclaw models status`를 실행하여 어떤 프로필이 만료되고 있는지 확인하세요. 프로필이 누락된 경우 `claude setup-token`을 다시 실행하고 토큰을 다시 붙여넣으세요.

## 요구 사항

- Claude Max 또는 Pro subscription (`claude setup-token`의 경우)
- Claude Code CLI 설치 (`claude` 명령 사용 가능)
