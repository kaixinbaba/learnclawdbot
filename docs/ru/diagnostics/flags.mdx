---
title: "Флаги диагностики"
summary: "Включение целевых отладочных логов для определенных подсистем без подробного логирования везде"
---

# Флаги диагностики (Diagnostics Flags)

Флаги диагностики позволяют включить целевые отладочные логи без включения подробного логирования везде. Флаги включаются по желанию и не имеют эффекта, если подсистема их не проверяет.

## Как это работает

- Флаги — это строки (без учета регистра).
- Вы можете включить флаги в конфигурации или через переопределение окружением.
- Поддерживаются подстановочные знаки:
  - `telegram.*` соответствует `telegram.http`
  - `*` включает все флаги

## Включение через конфигурацию

```json
{
  "diagnostics": {
    "flags": ["telegram.http"]
  }
}
```

Несколько флагов:

```json
{
  "diagnostics": {
    "flags": ["telegram.http", "gateway.*"]
  }
}
```

Перезапустите шлюз после изменения флагов.

## Переопределение через окружение (одноразово)

```bash
OPENCLAW_DIAGNOSTICS=telegram.http,telegram.payload
```

Отключить все флаги:

```bash
OPENCLAW_DIAGNOSTICS=0
```

## Куда идут логи

Флаги выводят логи в стандартный файл диагностических логов. По умолчанию:

```
/tmp/openclaw/openclaw-YYYY-MM-DD.log
```

Если вы установили `logging.file`, используйте этот путь. Логи в формате JSONL (один объект JSON на строку). Редактирование применяется на основе `logging.redactSensitive`.

Выбрать последний файл логов:

```bash
ls -t /tmp/openclaw/openclaw-*.log | head -n 1
```

Фильтровать диагностику Telegram HTTP:

```bash
rg "telegram http error" /tmp/openclaw/openclaw-*.log
```

Или следить в реальном времени при воспроизведении:

```bash
tail -f /tmp/openclaw/openclaw-$(date +%F).log | rg "telegram http error"
```

Для удаленных шлюзов вы также можете использовать `openclaw logs --follow` (см. [CLI logs](/cli/logs)).

## Примечания

- Если `logging.level` установлен выше `warn`, эти логи могут быть подавлены. По умолчанию `info` — нормально.
- Флаги безопасно оставлять включенными; они влияют только на объем логов для конкретной подсистемы.
- Используйте [Logging](/logging) для изменения назначений логов, уровней и редактирования.
