---
summary: "OpenProse: рабочие процессы .prose, слэш-команды и состояние в OpenClaw"
read_when:
  - Вы хотите запустить или написать рабочие процессы .prose
  - Вы хотите включить плагин OpenProse
  - Вам нужно понять хранение состояния
---
# OpenProse

OpenProse — это переносимый формат рабочего процесса на основе markdown для оркестровки AI-сессий. В OpenClaw он поставляется как плагин, который устанавливает набор навыков OpenProse и слэш-команду `/prose`. Программы находятся в файлах `.prose` и могут порождать несколько подагентов с явным управлением потоком.

Официальный сайт: https://www.prose.md

## Что он умеет

- Мультиагентное исследование + синтез с явным параллелизмом.
- Повторяемые рабочие процессы с безопасным подтверждением (код-ревью, сортировка инцидентов, конвейеры контента).
- Переиспользуемые программы `.prose`, которые можно запускать в поддерживаемых агентных средах выполнения.

## Установка + включение

Встроенные плагины по умолчанию отключены. Включите OpenProse:

```bash
openclaw plugins enable open-prose
```

Перезапустите Gateway после включения плагина.

Разработка/локальная установка: `openclaw plugins install ./extensions/open-prose`

Связанная документация: [Plugins](/plugin), [Plugin manifest](/plugins/manifest), [Skills](/tools/skills).

## Слэш-команда

OpenProse регистрирует `/prose` как вызываемую пользователем команду навыка. Она маршрутизируется к инструкциям виртуальной машины OpenProse и использует инструменты OpenClaw под капотом.

Часто используемые команды:

```
/prose help
/prose run <file.prose>
/prose run <handle/slug>
/prose run <https://example.com/file.prose>
/prose compile <file.prose>
/prose examples
/prose update
```

## Пример: простой файл `.prose`

```prose
# Research + synthesis with two agents running in parallel.

input topic: "What should we research?"

agent researcher:
  model: sonnet
  prompt: "You research thoroughly and cite sources."

agent writer:
  model: opus
  prompt: "You write a concise summary."

parallel:
  findings = session: researcher
    prompt: "Research {topic}."
  draft = session: writer
    prompt: "Summarize {topic}."

session "Merge the findings + draft into a final answer."
context: { findings, draft }
```

## Расположение файлов

OpenProse хранит состояние в `.prose/` в вашей рабочей области:

```
.prose/
├── .env
├── runs/
│   └── \{YYYYMMDD\}-\{HHMMSS\}-\{random\}/
│       ├── program.prose
│       ├── state.md
│       ├── bindings/
│       └── agents/
└── agents/
```

Постоянные агенты пользовательского уровня находятся в:

```
~/.prose/agents/
```

## Режимы состояния

OpenProse поддерживает несколько бэкендов состояния:

- **filesystem** (по умолчанию): `.prose/runs/...`
- **in-context**: временное, для небольших программ
- **sqlite** (экспериментально): требуется бинарный файл `sqlite3`
- **postgres** (экспериментально): требуется `psql` и строка подключения

Примечания:
- sqlite/postgres являются экспериментальными и требуют явного включения.
- Учетные данные postgres попадают в логи подагентов; используйте выделенную БД с минимальными привилегиями.

## Удаленные программы

`/prose run <handle/slug>` разрешается в `https://p.prose.md/<handle>/<slug>`.
Прямые URL загружаются как есть. Используется инструмент `web_fetch` (или `exec` для POST).

## Сопоставление среды выполнения OpenClaw

Программы OpenProse сопоставляются с примитивами OpenClaw:

| Концепция OpenProse | Инструмент OpenClaw |
| --- | --- |
| Spawn session / Task tool | `sessions_spawn` |
| File read/write | `read` / `write` |
| Web fetch | `web_fetch` |

Если ваш список разрешенных инструментов блокирует эти инструменты, программы OpenProse не будут работать. См. [Skills config](/tools/skills-config).

## Безопасность + подтверждения

Относитесь к файлам `.prose` как к коду. Проверяйте перед запуском. Используйте списки разрешенных инструментов OpenClaw и шлюзы подтверждения для контроля побочных эффектов.

Для детерминированных рабочих процессов с шлюзами подтверждения сравните с [Lobster](/tools/lobster).
