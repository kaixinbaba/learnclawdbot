---
summary: "Обработка часовых поясов для агентов, конвертов и подсказок"
read_when:
  - You need to understand how timestamps are normalized for the model
  - Configuring the user timezone for system prompts
---

# Часовые пояса

OpenClaw стандартизирует временные метки, чтобы модель видела **единое эталонное время**.

## Конверты сообщений (локальное по умолчанию)

Входящие сообщения оборачиваются в конверт вроде:

```
[Provider ... 2026-01-05 16:26 PST] текст сообщения
```

Временная метка в конверте **по умолчанию локальная для хоста**, с точностью до минут.

Вы можете переопределить это с помощью:

```json5
{
  agents: {
    defaults: {
      envelopeTimezone: "local", // "utc" | "local" | "user" | часовой пояс IANA
      envelopeTimestamp: "on", // "on" | "off"
      envelopeElapsed: "on" // "on" | "off"
    }
  }
}
```

- `envelopeTimezone: "utc"` использует UTC.
- `envelopeTimezone: "user"` использует `agents.defaults.userTimezone` (возвращается к часовому поясу хоста).
- Используйте явный часовой пояс IANA (например, `"Europe/Vienna"`) для фиксированного смещения.
- `envelopeTimestamp: "off"` удаляет абсолютные временные метки из заголовков конверта.
- `envelopeElapsed: "off"` удаляет суффиксы прошедшего времени (стиль `+2m`).

### Примеры

**Локальное (по умолчанию):**

```
[Signal Alice +1555 2026-01-18 00:19 PST] привет
```

**Фиксированный часовой пояс:**

```
[Signal Alice +1555 2026-01-18 06:19 GMT+1] привет
```

**Прошедшее время:**

```
[Signal Alice +1555 +2m 2026-01-18T05:19Z] последующее
```

## Полезные нагрузки инструментов (необработанные данные провайдера + нормализованные поля)

Вызовы инструментов (`channels.discord.readMessages`, `channels.slack.readMessages` и т.д.) возвращают **необработанные временные метки провайдера**.
Мы также прикрепляем нормализованные поля для последовательности:

- `timestampMs` (UTC эпоха миллисекунды)
- `timestampUtc` (ISO 8601 UTC строка)

Необработанные поля провайдера сохраняются.

## Часовой пояс пользователя для системной подсказки

Установите `agents.defaults.userTimezone`, чтобы сообщить модели часовой пояс локального времени пользователя. Если он
не установлен, OpenClaw разрешает **часовой пояс хоста во время выполнения** (без записи конфигурации).

```json5
{
  agents: { defaults: { userTimezone: "America/Chicago" } }
}
```

Системная подсказка включает:
- Раздел `Текущие дата и время` с местным временем и часовым поясом
- `Формат времени: 12-часовой` или `24-часовой`

Вы можете контролировать формат подсказки с помощью `agents.defaults.timeFormat` (`auto` | `12` | `24`).

См. [Date & Time](/date-time) для полного поведения и примеров.
