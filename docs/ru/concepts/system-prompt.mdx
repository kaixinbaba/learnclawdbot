---
summary: "Что содержит системная подсказка OpenClaw и как она собирается"
read_when:
  - Editing system prompt text, tools list, or time/heartbeat sections
  - Changing workspace bootstrap or skills injection behavior
---
# Системная подсказка

OpenClaw создаёт пользовательскую системную подсказку для каждого запуска агента. Подсказка **принадлежит OpenClaw** и не использует стандартную подсказку p-coding-agent.

Подсказка собирается OpenClaw и инъецируется в каждый запуск агента.

## Структура

Подсказка намеренно компактна и использует фиксированные разделы:

- **Инструменты**: текущий список инструментов + краткие описания.
- **Навыки** (когда доступны): сообщает модели, как загружать инструкции навыков по требованию.
- **Самообновление OpenClaw**: как запускать `config.apply` и `update.run`.
- **Рабочее пространство**: рабочий каталог (`agents.defaults.workspace`).
- **Документация**: локальный путь к документам OpenClaw (репозиторий или npm пакет) и когда их читать.
- **Файлы рабочего пространства (инъецированные)**: указывает, что bootstrap файлы включены ниже.
- **Песочница** (когда включена): указывает среду выполнения в песочнице, пути песочницы и доступен ли привилегированный exec.
- **Текущие дата и время**: местное время пользователя, часовой пояс и формат времени.
- **Теги ответов**: опциональный синтаксис тегов ответов для поддерживаемых провайдеров.
- **Сердцебиения**: подсказка сердцебиения и поведение подтверждения.
- **Среда выполнения**: хост, ОС, node, модель, корень репозитория (когда обнаружен), уровень мышления (одна строка).
- **Рассуждение**: текущий уровень видимости + подсказка переключения /reasoning.

## Режимы подсказки

OpenClaw может рендерить меньшие системные подсказки для подагентов. Среда выполнения устанавливает
`promptMode` для каждого запуска (не пользовательская конфигурация):

- `full` (по умолчанию): включает все разделы выше.
- `minimal`: используется для подагентов; опускает **Навыки**, **Вызов памяти**, **Самообновление
  OpenClaw**, **Псевдонимы моделей**, **Идентичность пользователя**, **Теги ответов**,
  **Обмен сообщениями**, **Тихие ответы** и **Сердцебиения**. Инструменты, Рабочее пространство,
  Песочница, Текущие дата и время (когда известны), Среда выполнения и инъецированный контекст остаются
  доступными.
- `none`: возвращает только базовую строку идентичности.

Когда `promptMode=minimal`, дополнительные инъецированные подсказки маркируются **Контекст
подагента** вместо **Контекст группового чата**.

## Инъекция bootstrap рабочего пространства

Bootstrap файлы обрезаются и добавляются под **Контекст проекта**, чтобы модель видела контекст идентичности и профиля без необходимости явных чтений:

- `AGENTS.md`
- `SOUL.md`
- `TOOLS.md`
- `IDENTITY.md`
- `USER.md`
- `HEARTBEAT.md`
- `BOOTSTRAP.md` (только для совершенно новых рабочих пространств)

Большие файлы обрезаются с маркером. Максимальный размер на файл контролируется
`agents.defaults.bootstrapMaxChars` (по умолчанию: 20000). Отсутствующие файлы инъецируют
короткий маркер отсутствующего файла.

Внутренние хуки могут перехватить этот шаг через `agent:bootstrap` для мутации или замены
инъецированных bootstrap файлов (например, замена `SOUL.md` для альтернативной персоны).

Чтобы проверить, сколько каждый инъецированный файл вносит (исходный против инъецированного, обрезка, плюс накладные расходы схемы инструментов), используйте `/context list` или `/context detail`. См. [Context](/concepts/context).

## Обработка времени

Системная подсказка включает выделенный раздел **Текущие дата и время**, когда
известен часовой пояс пользователя. Чтобы сохранить стабильность кэша подсказки, теперь она включает только
**часовой пояс** (нет динамических часов или формата времени).

Используйте `session_status`, когда агенту нужно текущее время; карта статуса
включает строку временной метки.

Настройте с помощью:

- `agents.defaults.userTimezone`
- `agents.defaults.timeFormat` (`auto` | `12` | `24`)

См. [Date & Time](/date-time) для полной информации о поведении.

## Навыки

Когда существуют подходящие навыки, OpenClaw инъецирует компактный **список доступных навыков**
(`formatSkillsForPrompt`), который включает **путь к файлу** для каждого навыка. Подсказка
инструктирует модель использовать `read` для загрузки SKILL.md по указанному
расположению (рабочее пространство, управляемое или встроенное). Если нет подходящих навыков, раздел
Навыки опускается.

```
<available_skills>
  <skill>
    <name>...</name>
    <description>...</description>
    <location>...</location>
  </skill>
</available_skills>
```

Это сохраняет базовую подсказку небольшой, всё ещё обеспечивая целевое использование навыков.

## Документация

Когда доступна, системная подсказка включает раздел **Документация**, который указывает на
локальный каталог документов OpenClaw (либо `docs/` в рабочем пространстве репозитория, либо встроенные npm
документы пакета) и также отмечает публичное зеркало, исходный репозиторий, сообщество Discord и
ClawdHub (https://clawdhub.com) для обнаружения навыков. Подсказка инструктирует модель сначала консультироваться с локальными документами
для поведения OpenClaw, команд, конфигурации или архитектуры, и запускать
`openclaw status` самостоятельно когда возможно (спрашивая пользователя только когда ей не хватает доступа).
