---
summary: "Запуск OpenClaw в изолированной виртуальной машине macOS (локальной или размещенной), когда вам нужна изоляция или iMessage"
read_when:
  - Вы хотите изолировать OpenClaw от основной среды macOS
  - Вы хотите интеграцию iMessage (BlueBubbles) в песочнице
  - Вы хотите сбрасываемую среду macOS, которую можно клонировать
  - Вы хотите сравнить локальные и размещенные варианты виртуальных машин macOS
---

# OpenClaw на виртуальных машинах macOS (Песочница)

## Рекомендуемое по умолчанию (большинство пользователей)

- **Небольшой Linux VPS** для всегда работающего шлюза и низкой стоимости. См. [Хостинг VPS](/vps).
- **Выделенное оборудование** (Mac mini или Linux-бокс), если вы хотите полный контроль и **жилой IP** для автоматизации браузера. Многие сайты блокируют IP-адреса дата-центров, поэтому локальный просмотр часто работает лучше.
- **Гибрид:** держите шлюз на дешевом VPS и подключайте свой Mac как **узел**, когда вам нужна автоматизация браузера/пользовательского интерфейса. См. [Узлы](/nodes) и [Удаленный шлюз](/gateway/remote).

Используйте виртуальную машину macOS, когда вам специально нужны возможности только для macOS (iMessage/BlueBubbles) или вы хотите строгую изоляцию от вашего ежедневного Mac.

## Варианты виртуальных машин macOS

### Локальная виртуальная машина на вашем Mac с Apple Silicon (Lume)

Запустите OpenClaw в изолированной виртуальной машине macOS на существующем Mac с Apple Silicon, используя [Lume](https://cua.ai/docs/lume).

Это дает вам:
- Полную среду macOS в изоляции (ваш хост остается чистым)
- Поддержку iMessage через BlueBubbles (невозможно на Linux/Windows)
- Мгновенный сброс путем клонирования виртуальных машин
- Без дополнительного оборудования или облачных затрат

### Размещенные провайдеры Mac (облако)

Если вы хотите macOS в облаке, размещенные провайдеры Mac тоже работают:
- [MacStadium](https://www.macstadium.com/) (размещенные Mac)
- Другие поставщики размещенных Mac также работают; следуйте их документации по виртуальным машинам + SSH

Как только у вас появится SSH-доступ к виртуальной машине macOS, продолжайте с шага 6 ниже.

---

## Быстрый путь (Lume, опытные пользователи)

1. Установите Lume
2. `lume create openclaw --os macos --ipsw latest`
3. Завершите Setup Assistant, включите Remote Login (SSH)
4. `lume run openclaw --no-display`
5. Подключитесь по SSH, установите OpenClaw, настройте каналы
6. Готово

---

## Что вам нужно (Lume)

- Mac с Apple Silicon (M1/M2/M3/M4)
- macOS Sequoia или новее на хосте
- ~60 ГБ свободного дискового пространства на виртуальную машину
- ~20 минут

---

## 1) Установите Lume

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/trycua/cua/main/libs/lume/scripts/install.sh)"
```

Если `~/.local/bin` не в вашем PATH:

```bash
echo 'export PATH="$PATH:$HOME/.local/bin"' >> ~/.zshrc && source ~/.zshrc
```

Проверьте:

```bash
lume --version
```

Документы: [Установка Lume](https://cua.ai/docs/lume/guide/getting-started/installation)

---

## 2) Создайте виртуальную машину macOS

```bash
lume create openclaw --os macos --ipsw latest
```

Это загружает macOS и создает виртуальную машину. Окно VNC открывается автоматически.

Примечание: Загрузка может занять некоторое время в зависимости от вашего соединения.

---

## 3) Завершите Setup Assistant

В окне VNC:
1. Выберите язык и регион
2. Пропустите Apple ID (или войдите, если хотите iMessage позже)
3. Создайте учетную запись пользователя (запомните имя пользователя и пароль)
4. Пропустите все опциональные функции

После завершения настройки включите SSH:
1. Откройте Системные настройки → Основные → Общий доступ
2. Включите "Удаленный вход"

---

## 4) Получите IP-адрес виртуальной машины

```bash
lume get openclaw
```

Ищите IP-адрес (обычно `192.168.64.x`).

---

## 5) Подключитесь к виртуальной машине по SSH

```bash
ssh youruser@192.168.64.X
```

Замените `youruser` на созданную учетную запись, а IP на IP вашей виртуальной машины.

---

## 6) Установите OpenClaw

Внутри виртуальной машины:

```bash
npm install -g openclaw@latest
openclaw onboard --install-daemon
```

Следуйте запросам onboarding для настройки провайдера модели (Anthropic, OpenAI и т. д.).

---

## 7) Настройте каналы

Отредактируйте файл конфигурации:

```bash
nano ~/.openclaw/openclaw.json
```

Добавьте свои каналы:

```json
\{
  "channels": \{
    "whatsapp": \{
      "dmPolicy": "allowlist",
      "allowFrom": ["+15551234567"]
    \},
    "telegram": \{
      "botToken": "YOUR_BOT_TOKEN"
    \}
  \}
\}
```

Затем войдите в WhatsApp (отсканируйте QR):

```bash
openclaw channels login
```

---

## 8) Запустите виртуальную машину без дисплея

Остановите виртуальную машину и перезапустите без дисплея:

```bash
lume stop openclaw
lume run openclaw --no-display
```

Виртуальная машина работает в фоновом режиме. Демон OpenClaw поддерживает работу шлюза.

Чтобы проверить статус:

```bash
ssh youruser@192.168.64.X "openclaw status"
```

---

## Бонус: интеграция iMessage

Это убийственная функция запуска на macOS. Используйте [BlueBubbles](https://bluebubbles.app) для добавления iMessage в OpenClaw.

Внутри виртуальной машины:

1. Загрузите BlueBubbles с bluebubbles.app
2. Войдите с вашим Apple ID
3. Включите Web API и установите пароль
4. Направьте вебхуки BlueBubbles на ваш шлюз (пример: `https://your-gateway-host:3000/bluebubbles-webhook?password=<password>`)

Добавьте в вашу конфигурацию OpenClaw:

```json
\{
  "channels": \{
    "bluebubbles": \{
      "serverUrl": "http://localhost:1234",
      "password": "your-api-password",
      "webhookPath": "/bluebubbles-webhook"
    \}
  \}
\}
```

Перезапустите шлюз. Теперь ваш агент может отправлять и получать iMessages.

Полная настройка деталей: [Канал BlueBubbles](/channels/bluebubbles)

---

## Сохраните золотой образ

Перед дальнейшей настройкой сделайте снимок вашего чистого состояния:

```bash
lume stop openclaw
lume clone openclaw openclaw-golden
```

Сброс в любое время:

```bash
lume stop openclaw && lume delete openclaw
lume clone openclaw-golden openclaw
lume run openclaw --no-display
```

---

## Работа 24/7

Держите виртуальную машину работающей:
- Держите ваш Mac подключенным к сети
- Отключите спящий режим в Системных настройках → Экономия энергии
- Используйте `caffeinate` при необходимости

Для настоящего всегда работающего режима рассмотрите выделенный Mac mini или небольшой VPS. См. [Хостинг VPS](/vps).

---

## Устранение неполадок

| Проблема | Решение |
|---------|----------|
| Не удается подключиться к виртуальной машине по SSH | Проверьте, включен ли "Удаленный вход" в Системных настройках виртуальной машины |
| IP виртуальной машины не отображается | Подождите полной загрузки виртуальной машины, снова запустите `lume get openclaw` |
| Команда Lume не найдена | Добавьте `~/.local/bin` в ваш PATH |
| QR WhatsApp не сканируется | Убедитесь, что вы вошли в виртуальную машину (не хост) при запуске `openclaw channels login` |

---

## Связанные документы

- [Хостинг VPS](/vps)
- [Узлы](/nodes)
- [Удаленный шлюз](/gateway/remote)
- [Канал BlueBubbles](/channels/bluebubbles)
- [Быстрый старт Lume](https://cua.ai/docs/lume/guide/getting-started/quickstart)
- [Справочник CLI Lume](https://cua.ai/docs/lume/reference/cli-reference)
- [Настройка виртуальной машины без присмотра](https://cua.ai/docs/lume/guide/fundamentals/unattended-setup) (расширенное)
- [Песочница Docker](/install/docker) (альтернативный подход к изоляции)
