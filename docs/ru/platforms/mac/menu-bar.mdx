---
summary: "–õ–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é –∏ —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º"
read_when:
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UI –º–µ–Ω—é mac –∏–ª–∏ –ª–æ–≥–∏–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
---
# –õ–æ–≥–∏–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Å—Ç—Ä–æ–∫–µ –º–µ–Ω—é

## –ß—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ú—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞ –≤ –∏–∫–æ–Ω–∫–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–Ω—é –∏ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ —Å—Ç–∞—Ç—É—Å–∞ –º–µ–Ω—é.
- –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–∫—Ä—ã—Ç, –ø–æ–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Ä–∞–±–æ—Ç–∞; –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç.
- –ë–ª–æ–∫ "–£–∑–ª—ã" –≤ –º–µ–Ω—é –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (—Å–ø–∞—Ä–µ–Ω–Ω—ã–µ —É–∑–ª—ã —á–µ—Ä–µ–∑ `node.list`), –∞ –Ω–µ –∑–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–∞/–ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è.
- –†–∞–∑–¥–µ–ª "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ" –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥ –ö–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–Ω–∏–º–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

## –ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –°–µ—Å—Å–∏–∏: —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Å `runId` (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞) –ø–ª—é—Å `sessionKey` –≤ payload. "–û—Å–Ω–æ–≤–Ω–∞—è" —Å–µ—Å—Å–∏—è - —ç—Ç–æ –∫–ª—é—á `main`; –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–µ—Å—Å–∏–∏.
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: main –≤—Å–µ–≥–¥–∞ –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç. –ï—Å–ª–∏ main –∞–∫—Ç–∏–≤–Ω–∞, –µ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ. –ï—Å–ª–∏ main –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–∞—è –Ω–µ-main —Å–µ—Å—Å–∏—è. –ú—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è —Ç—É–¥–∞-—Å—é–¥–∞ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏; –º—ã –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ—Å—Ç–æ–π –∏–ª–∏ main —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π.
- –í–∏–¥—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
  - `job`: –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (`state: started|streaming|done|error`).
  - `tool`: `phase: start|result` —Å `toolName` –∏ `meta/args`.

## Enum IconState (Swift)
- `idle`
- `workingMain(ActivityKind)`
- `workingOther(ActivityKind)`
- `overridden(ActivityKind)` (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏)

### ActivityKind ‚Üí –≥–ª–∏—Ñ
- `exec` ‚Üí üíª
- `read` ‚Üí üìÑ
- `write` ‚Üí ‚úçÔ∏è
- `edit` ‚Üí üìù
- `attach` ‚Üí üìé
- default ‚Üí üõ†Ô∏è

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `idle`: –æ–±—ã—á–Ω—ã–π critter.
- `workingMain`: –∑–Ω–∞—á–æ–∫ —Å –≥–ª–∏—Ñ–æ–º, –ø–æ–ª–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫, –∞–Ω–∏–º–∞—Ü–∏—è "—Ä–∞–±–æ—Ç—ã" –ª–∞–ø.
- `workingOther`: –∑–Ω–∞—á–æ–∫ —Å –≥–ª–∏—Ñ–æ–º, –ø—Ä–∏–≥–ª—É—à–µ–Ω–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫, –±–µ–∑ —Å—É–µ—Ç—ã.
- `overridden`: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–ª–∏—Ñ/–æ—Ç—Ç–µ–Ω–æ–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

## –¢–µ–∫—Å—Ç —Å—Ç—Ä–æ–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ (–º–µ–Ω—é)
- –ü–æ–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Ä–∞–±–æ—Ç–∞: `<–†–æ–ª—å —Å–µ—Å—Å–∏–∏> ¬∑ <–º–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏>`
  - –ü—Ä–∏–º–µ—Ä—ã: `Main ¬∑ exec: pnpm test`, `Other ¬∑ read: apps/macos/Sources/OpenClaw/AppState.swift`.
- –í –ø—Ä–æ—Å—Ç–æ–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–≤–æ–¥–∫–µ –∑–¥–æ—Ä–æ–≤—å—è.

## –ü—Ä–∏–µ–º —Å–æ–±—ã—Ç–∏–π
- –ò—Å—Ç–æ—á–Ω–∏–∫: —Å–æ–±—ã—Ç–∏—è `agent` –∫–∞–Ω–∞–ª–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (`ControlChannel.handleAgentEvent`).
- –ü–∞—Ä—Å–µ–Ω–Ω—ã–µ –ø–æ–ª—è:
  - `stream: "job"` —Å `data.state` –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
  - `stream: "tool"` —Å `data.phase`, `name`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ `meta`/`args`.
- –ú–µ—Ç–∫–∏:
  - `exec`: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ `args.command`.
  - `read`/`write`: —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π –ø—É—Ç—å.
  - `edit`: –ø—É—Ç—å –ø–ª—é—Å –≤—ã–≤–µ–¥–µ–Ω–Ω—ã–π –≤–∏–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ `meta`/—Å—á–µ—Ç—á–∏–∫–æ–≤ diff.
  - fallback: –∏–º—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.

## –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚ñ∏ –û—Ç–ª–∞–¥–∫–∞ ‚ñ∏ –í—ã–±–æ—Ä "–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–∫–∏":
  - `System (auto)` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - `Working: main` (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)
  - `Working: other` (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)
  - `Idle`
- –•—Ä–∞–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ `@AppStorage("iconOverride")`; –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ `IconState.overridden`.

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∫–æ–Ω–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏ —Å—Ç—Ä–æ–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –º–µ—Ç–∫—É.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –Ω–µ-–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –ø—Ä–æ—Å—Ç–æ–µ –æ—Å–Ω–æ–≤–Ω–æ–π: –∏–∫–æ–Ω–∫–∞/—Å—Ç–∞—Ç—É—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ-–æ—Å–Ω–æ–≤–Ω—É—é; –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π, –ø–æ–∫–∞ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é, –ø–æ–∫–∞ –¥—Ä—É–≥–∞—è –∞–∫—Ç–∏–≤–Ω–∞: –∏–∫–æ–Ω–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.
- –ë—ã—Å—Ç—Ä—ã–µ —Å–µ—Ä–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–æ–∫ –Ω–µ –º–µ—Ä—Ü–∞–µ—Ç (TTL grace –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤).
- –°—Ç—Ä–æ–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–Ω–æ–≤–∞, –∫–æ–≥–¥–∞ –≤—Å–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç.
