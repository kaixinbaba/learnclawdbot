---
summary: "Логирование OpenClaw: ротационный файл диагностических логов + флаги приватности unified log"
read_when:
  - Захват логов macOS или исследование логирования приватных данных
  - Отладка голосовой активации/проблем жизненного цикла сессии
---
# Логирование (macOS)

## Ротационный файл диагностических логов (панель отладки)
OpenClaw направляет логи приложения macOS через swift-log (unified logging по умолчанию) и может записывать локальный, ротационный файл лога на диск, когда вам нужен долговечный захват.

- Подробность: **Панель отладки → Логи → Логирование приложения → Подробность**
- Включить: **Панель отладки → Логи → Логирование приложения → "Записывать ротационный диагностический лог (JSONL)"**
- Расположение: `~/Library/Logs/OpenClaw/diagnostics.jsonl` (ротация автоматическая; старые файлы получают суффикс `.1`, `.2`, …)
- Очистить: **Панель отладки → Логи → Логирование приложения → "Очистить"**

Примечания:
- Это **выключено по умолчанию**. Включайте только во время активной отладки.
- Обращайтесь с файлом как с конфиденциальным; не делитесь им без проверки.

## Приватные данные unified logging на macOS

Unified logging редактирует большинство payload, если подсистема не включает `privacy -off`. Согласно материалу Питера о macOS [logging privacy shenanigans](https://steipete.me/posts/2025/logging-privacy-shenanigans) (2025) это контролируется plist в `/Library/Preferences/Logging/Subsystems/` с ключом по имени подсистемы. Только новые записи лога используют флаг, поэтому включите его перед воспроизведением проблемы.

## Включение для OpenClaw (`bot.molt`)
- Сначала запишите plist во временный файл, затем установите его атомарно как root:

```bash
cat <<'EOF' >/tmp/bot.molt.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>DEFAULT-OPTIONS</key>
    <dict>
        <key>Enable-Private-Data</key>
        <true/>
    </dict>
</dict>
</plist>
EOF
sudo install -m 644 -o root -g wheel /tmp/bot.molt.plist /Library/Preferences/Logging/Subsystems/bot.molt.plist
```

- Перезагрузка не требуется; logd быстро замечает файл, но только новые строки лога будут включать приватные payload.
- Просмотрите расширенный вывод с помощью существующего помощника, например `./scripts/clawlog.sh --category WebChat --last 5m`.

## Отключение после отладки
- Удалите переопределение: `sudo rm /Library/Preferences/Logging/Subsystems/bot.molt.plist`.
- Опционально запустите `sudo log config --reload`, чтобы заставить logd немедленно отбросить переопределение.
- Помните, что эта поверхность может включать номера телефонов и тела сообщений; держите plist на месте только пока вам активно нужны дополнительные детали.
