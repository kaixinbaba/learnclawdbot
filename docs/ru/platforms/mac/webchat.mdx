---
summary: "Как приложение mac встраивает шлюз WebChat и как его отлаживать"
read_when:
  - Отладка представления WebChat для mac или порта loopback
---
# WebChat (приложение macOS)

Приложение строки меню macOS встраивает пользовательский интерфейс WebChat как нативное представление SwiftUI. Оно подключается к шлюзу и по умолчанию использует **основной сеанс** для выбранного агента (с переключателем сеанса для других сеансов).

- **Локальный режим**: подключается напрямую к локальному WebSocket шлюза.
- **Удаленный режим**: пересылает порт управления шлюзом через SSH и использует этот туннель как плоскость данных.

## Запуск и отладка

- Вручную: меню Lobster → "Открыть чат".
- Автоматическое открытие для тестирования:
  ```bash
  dist/OpenClaw.app/Contents/MacOS/OpenClaw --webchat
  ```
- Логи: `./scripts/clawlog.sh` (подсистема `bot.molt`, категория `WebChatSwiftUI`).

## Как это подключено

- Плоскость данных: методы WS шлюза `chat.history`, `chat.send`, `chat.abort`, `chat.inject` и события `chat`, `agent`, `presence`, `tick`, `health`.
- Сеанс: по умолчанию основной сеанс (`main` или `global`, когда область глобальная). Пользовательский интерфейс может переключаться между сеансами.
- Onboarding использует выделенный сеанс, чтобы держать первоначальную настройку отдельно.

## Поверхность безопасности

- Удаленный режим пересылает только порт управления WebSocket шлюза через SSH.

## Известные ограничения

- Пользовательский интерфейс оптимизирован для чат-сеансов (не полная песочница браузера).
