---
summary: "Интеграция PeekabooBridge для автоматизации пользовательского интерфейса macOS"
read_when:
  - Размещение PeekabooBridge в OpenClaw.app
  - Интеграция Peekaboo через Swift Package Manager
  - Изменение протокола/путей PeekabooBridge
---
# Peekaboo Bridge (автоматизация пользовательского интерфейса macOS)

OpenClaw может размещать **PeekabooBridge** как локального брокера автоматизации пользовательского интерфейса с учетом разрешений. Это позволяет CLI `peekaboo` управлять автоматизацией пользовательского интерфейса, повторно используя разрешения TCC приложения macOS.

## Что это такое (и что это не такое)

- **Хост**: OpenClaw.app может выступать в качестве хоста PeekabooBridge.
- **Клиент**: используйте CLI `peekaboo` (без отдельной поверхности `openclaw ui ...`).
- **Пользовательский интерфейс**: визуальные оверлеи остаются в Peekaboo.app; OpenClaw является тонким хостом-брокером.

## Включение моста

В приложении macOS:
- Настройки → **Включить Peekaboo Bridge**

При включении OpenClaw запускает локальный сервер сокетов UNIX. Если отключено, хост останавливается, и `peekaboo` вернется к другим доступным хостам.

## Порядок обнаружения клиента

Клиенты Peekaboo обычно пробуют хосты в таком порядке:

1. Peekaboo.app (полный UX)
2. Claude.app (если установлен)
3. OpenClaw.app (тонкий брокер)

Используйте `peekaboo bridge status --verbose`, чтобы увидеть, какой хост активен и какой путь сокета используется. Вы можете переопределить с помощью:

```bash
export PEEKABOO_BRIDGE_SOCKET=/path/to/bridge.sock
```

## Безопасность и разрешения

- Мост проверяет **подписи кода вызывающей стороны**; применяется список разрешенных TeamID (TeamID хоста Peekaboo + TeamID приложения OpenClaw).
- Запросы истекают по времени через ~10 секунд.
- Если отсутствуют необходимые разрешения, мост возвращает четкое сообщение об ошибке вместо запуска Системных настроек.

## Поведение снимков (автоматизация)

Снимки хранятся в памяти и автоматически истекают после короткого окна. Если вам нужно более длительное хранение, сделайте повторный снимок с клиента.

## Устранение неполадок

- Если `peekaboo` сообщает "bridge client is not authorized", убедитесь, что клиент правильно подписан, или запустите хост с `PEEKABOO_ALLOW_UNSIGNED_SOCKET_CLIENTS=1` только в **отладочном** режиме.
- Если хосты не найдены, откройте одно из хост-приложений (Peekaboo.app или OpenClaw.app) и подтвердите, что разрешения предоставлены.
