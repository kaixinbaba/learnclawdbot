---
title: "Протокол онбординга и конфигурации"
summary: "Общие интерфейсы онбординга и конфигурации для CLI, приложения macOS и Web UI"
---

# Протокол онбординга и конфигурации

Цель: общие интерфейсы онбординга + конфигурации для CLI, приложения macOS и Web UI.

## Компоненты

- Движок Wizard (общая сессия + промпты + состояние онбординга)
- CLI онбординг использует тот же wizard поток, что и UI клиенты
- Gateway RPC предоставляет wizard + конечные точки схемы конфигурации
- macOS онбординг использует модель шагов wizard
- Web UI отображает формы конфигурации из JSON Schema + UI подсказок

## Gateway RPC

- `wizard.start` параметры: `\{ mode?: "local"|"remote", workspace?: string \}`
- `wizard.next` параметры: `\{ sessionId, answer?: \{ stepId, value? \} \}`
- `wizard.cancel` параметры: `\{ sessionId \}`
- `wizard.status` параметры: `\{ sessionId \}`
- `config.schema` параметры: `\{\}`

Ответы (структура):

- Wizard: `\{ sessionId, done, step?, status?, error? \}`
- Config schema: `\{ schema, uiHints, version, generatedAt \}`

## UI подсказки

- `uiHints` с ключами по пути; необязательные метаданные (label/help/group/order/advanced/sensitive/placeholder)
- Чувствительные поля отображаются как поля ввода пароля; без слоя редактирования
- Неподдерживаемые узлы схемы возвращаются к сырому JSON редактору

## Примечания

- Этот документ является единственным местом для отслеживания рефакторинга протокола онбординга/конфигурации
