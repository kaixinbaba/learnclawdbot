---
summary: "Обзор сопряжения: одобрение того, кто может отправлять вам прямые сообщения + какие узлы могут присоединиться"
read_when:
  - Настройка контроля доступа к прямым сообщениям
  - Сопряжение нового узла iOS/Android
  - Проверка позиции безопасности OpenClaw
---

# Сопряжение

"Сопряжение" — это явный шаг **одобрения владельцем** OpenClaw.
Он используется в двух местах:

1) **Сопряжение прямых сообщений** (кому разрешено общаться с ботом)
2) **Сопряжение узлов** (какие устройства/узлы могут присоединиться к сети gateway)

Контекст безопасности: [Безопасность](/gateway/security)

## 1) Сопряжение прямых сообщений (доступ к входящему чату)

Когда канал настроен с политикой прямых сообщений `pairing`, неизвестные отправители получают короткий код, и их сообщение **не обрабатывается** до вашего одобрения.

Политики прямых сообщений по умолчанию задокументированы в: [Безопасность](/gateway/security)

Коды сопряжения:
- 8 символов, заглавные, без неоднозначных символов (`0O1I`).
- **Истекают через 1 час**. Бот отправляет сообщение о сопряжении только когда создается новый запрос (примерно раз в час на отправителя).
- Ожидающие запросы сопряжения прямых сообщений ограничены **3 на канал** по умолчанию; дополнительные запросы игнорируются до истечения или одобрения одного.

### Одобрение отправителя

```bash
openclaw pairing list telegram
openclaw pairing approve telegram <КОД>
```

Поддерживаемые каналы: `telegram`, `whatsapp`, `signal`, `imessage`, `discord`, `slack`.

### Где хранится состояние

Хранится в `~/.openclaw/credentials/`:
- Ожидающие запросы: `<channel>-pairing.json`
- Хранилище одобренного списка разрешений: `<channel>-allowFrom.json`

Рассматривайте их как конфиденциальные (они контролируют доступ к вашему ассистенту).


## 2) Сопряжение устройств узлов (узлы iOS/Android/macOS/безголовые)

Узлы подключаются к Gateway как **устройства** с `role: node`. Gateway
создает запрос сопряжения устройства, который должен быть одобрен.

### Одобрение устройства узла

```bash
openclaw devices list
openclaw devices approve <requestId>
openclaw devices reject <requestId>
```

### Где хранится состояние

Хранится в `~/.openclaw/devices/`:
- `pending.json` (краткосрочное; ожидающие запросы истекают)
- `paired.json` (сопряженные устройства + токены)

### Примечания

- Устаревший API `node.pair.*` (CLI: `openclaw nodes pending/approve`) — это
  отдельное хранилище сопряжения, принадлежащее gateway. WS-узлы все еще требуют сопряжения устройств.


## Связанные документы

- Модель безопасности + prompt injection: [Безопасность](/gateway/security)
- Безопасное обновление (запуск doctor): [Обновление](/install/updating)
- Конфигурации каналов:
  - Telegram: [Telegram](/channels/telegram)
  - WhatsApp: [WhatsApp](/channels/whatsapp)
  - Signal: [Signal](/channels/signal)
  - iMessage: [iMessage](/channels/imessage)
  - Discord: [Discord](/channels/discord)
  - Slack: [Slack](/channels/slack)
