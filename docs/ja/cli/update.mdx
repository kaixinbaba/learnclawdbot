---
summary: "`openclaw update` の CLI リファレンス（安全なソース更新 + Gateway 自動再起動）"
read_when:
  - ソースチェックアウトを安全に更新したい場合
  - `--update` 短縮形の動作を理解する必要がある場合
---

# `openclaw update`

OpenClaw を安全に更新し、stable/beta/dev チャネル間を切り替えます。

**npm/pnpm** 経由でインストールした場合（グローバルインストール、git メタデータなし）、更新は [Updating](/install/updating) のパッケージマネージャーフローで行われます。

## 使用方法

```bash
openclaw update
openclaw update status
openclaw update wizard
openclaw update --channel beta
openclaw update --channel dev
openclaw update --tag beta
openclaw update --no-restart
openclaw update --json
openclaw --update
```

## オプション

- `--no-restart`：更新成功後の Gateway サービスの再起動をスキップします。
- `--channel <stable|beta|dev>`：更新チャネルを設定します（git + npm；設定に保存されます）。
- `--tag <dist-tag|version>`：この更新のみ npm dist-tag またはバージョンを上書きします。
- `--json`：マシン可読 `UpdateRunResult` JSON を出力します。
- `--timeout <seconds>`：ステップごとのタイムアウト（デフォルトは 1200 秒）。

注意：ダウングレードは、古いバージョンが設定を破壊する可能性があるため、確認が必要です。

## `update status`

アクティブな更新チャネル + git タグ/ブランチ/SHA（ソースチェックアウトの場合）と更新の可用性を表示します。

```bash
openclaw update status
openclaw update status --json
openclaw update status --timeout 10
```

オプション：
- `--json`：マシン可読ステータス JSON を出力します。
- `--timeout <seconds>`：チェックのタイムアウト（デフォルトは 3 秒）。

## `update wizard`

更新チャネルを選択し、更新後に Gateway を再起動するかどうかを確認するインタラクティブフローです（デフォルトは再起動）。git チェックアウトなしで `dev` を選択した場合、作成するオプションが提供されます。

## 動作内容

チャネルを明示的に切り替える場合（`--channel ...`）、OpenClaw はインストール方法も整合させます：

- `dev` → git チェックアウトを確保します（デフォルト：`~/openclaw`、`OPENCLAW_GIT_DIR` で上書き可能）、
  更新し、そのチェックアウトからグローバル CLI をインストールします。
- `stable`/`beta` → 一致する dist-tag を使用して npm からインストールします。

## Git チェックアウトフロー

チャネル：

- `stable`：最新の非ベータタグをチェックアウトし、ビルド + doctor を実行します。
- `beta`：最新の `-beta` タグをチェックアウトし、ビルド + doctor を実行します。
- `dev`：`main` をチェックアウトし、フェッチ + リベースを実行します。

概要：

1. クリーンなワークツリーが必要です（コミットされていない変更なし）。
2. 選択したチャネル（タグまたはブランチ）に切り替えます。
3. アップストリームをフェッチします（dev のみ）。
4. Dev のみ：一時ワークツリーでプリフライト lint + TypeScript ビルドを実行；先端が失敗した場合、最新のクリーンビルドを見つけるために最大 10 コミットを遡ります。
5. 選択したコミットにリベースします（dev のみ）。
6. 依存関係をインストールします（pnpm 優先；npm フォールバック）。
7. ビルド + Control UI をビルドします。
8. 最終的な「安全な更新」チェックとして `openclaw doctor` を実行します。
9. プラグインをアクティブチャネルに同期します（dev はバンドル拡張を使用；stable/beta は npm を使用）し、npm インストールされたプラグインを更新します。

## `--update` 短縮形

`openclaw --update` は `openclaw update` に書き換えられます（シェルやランチャースクリプトに便利）。

## 関連項目

- `openclaw doctor`（git チェックアウト時に最初に更新を実行するオプションを提供）
- [Development channels](/install/development-channels)
- [Updating](/install/updating)
- [CLI reference](/cli)
