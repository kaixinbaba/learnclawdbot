---
summary: "OpenClawが環境変数を読み込む場所と優先順位"
read_when:
  - どの環境変数がどの順序で読み込まれるかを知る必要がある場合
  - GatewayでAPIキーが見つからない問題をデバッグする場合
  - プロバイダー認証またはデプロイメント環境を文書化する場合
---
# 環境変数

OpenClawは複数のソースから環境変数を取得します。ルールは**既存の値を上書きしない**ことです。

## 優先順位（高→低）

1) **プロセス環境**（Gatewayプロセスが親シェル/デーモンからすでに持っているもの）。
2) **現在の作業ディレクトリの`.env`**（dotenvデフォルト；上書きしない）。
3) **グローバル`.env`**（`~/.openclaw/.env`、別名`$OPENCLAW_STATE_DIR/.env`；上書きしない）。
4) **`~/.openclaw/openclaw.json`内の設定`env`ブロック**（欠落している場合にのみ適用）。
5) **オプションのログインシェルインポート**（`env.shellEnv.enabled`または`OPENCLAW_LOAD_SHELL_ENV=1`）、欠落している予期されるキーにのみ適用。

設定ファイルが完全に欠落している場合、ステップ4はスキップされます。シェルインポートは有効になっている場合でも実行されます。

## 設定`env`ブロック

インライン環境変数を設定する2つの同等の方法（両方とも非上書き）：

```json5
{
  env: {
    OPENROUTER_API_KEY: "sk-or-...",
    vars: {
      GROQ_API_KEY: "gsk-..."
    }
  }
}
```

## シェル環境インポート

`env.shellEnv`はログインシェルを実行し、**欠落している**予期されるキーのみをインポートします：

```json5
{
  env: {
    shellEnv: {
      enabled: true,
      timeoutMs: 15000
    }
  }
}
```

環境変数の同等物：
- `OPENCLAW_LOAD_SHELL_ENV=1`
- `OPENCLAW_SHELL_ENV_TIMEOUT_MS=15000`

## 設定での環境変数置換

設定文字列値内で`${VAR_NAME}`構文を使用して環境変数を直接参照できます：

```json5
{
  models: {
    providers: {
      "vercel-gateway": {
        apiKey: "${VERCEL_GATEWAY_API_KEY}"
      }
    }
  }
}
```

詳細については、[Configuration: Env var substitution](/gateway/configuration#env-var-substitution-in-config)を参照してください。

## 関連

- [Gateway configuration](/gateway/configuration)
- [FAQ: env vars and .env loading](/help/faq#env-vars-and-env-loading)
- [Models overview](/concepts/models)
