---
summary: "web_search用のPerplexity Sonarセットアップ"
read_when:
  - web検索にPerplexity Sonarを使用したい場合
  - PERPLEXITY_API_KEYまたはOpenRouterのセットアップが必要な場合
---

# Perplexity Sonar

OpenClawは `web_search` ツールにPerplexity Sonarを使用できます。
Perplexityの直接APIまたはOpenRouter経由で接続できます。

## APIオプション

### Perplexity（直接）

- Base URL: https://api.perplexity.ai
- 環境変数：`PERPLEXITY_API_KEY`

### OpenRouter（代替）

- Base URL: https://openrouter.ai/api/v1
- 環境変数：`OPENROUTER_API_KEY`
- プリペイド/暗号通貨クレジットをサポートします。

## 設定例

```json5
{
  tools: {
    web: {
      search: {
        provider: "perplexity",
        perplexity: {
          apiKey: "pplx-...",
          baseUrl: "https://api.perplexity.ai",
          model: "perplexity/sonar-pro"
        }
      }
    }
  }
}
```

## Braveからの切り替え

```json5
{
  tools: {
    web: {
      search: {
        provider: "perplexity",
        perplexity: {
          apiKey: "pplx-...",
          baseUrl: "https://api.perplexity.ai"
        }
      }
    }
  }
}
```

`PERPLEXITY_API_KEY` と `OPENROUTER_API_KEY` の両方が設定されている場合、
`tools.web.search.perplexity.baseUrl`（または `tools.web.search.perplexity.apiKey`）を設定して明確にします。

Base URLが設定されていない場合、OpenClawはAPIキーのソースに基づいてデフォルトを選択します：

- `PERPLEXITY_API_KEY` または `pplx-...` → 直接Perplexity（`https://api.perplexity.ai`）
- `OPENROUTER_API_KEY` または `sk-or-...` → OpenRouter（`https://openrouter.ai/api/v1`）
- 不明なキー形式 → OpenRouter（安全なフォールバック）

## モデル

- `perplexity/sonar` — Web検索による高速Q&A
- `perplexity/sonar-pro`（デフォルト）— マルチステップ推論 + Web検索
- `perplexity/sonar-reasoning-pro` — 深い調査

完全なweb_search設定については、[Webツール](/tools/web)を参照してください。
